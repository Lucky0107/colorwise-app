import{r as p,a as Re,R as Be}from"./vendor-nf7bT_Uh.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const h of i.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function l(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=l(s);fetch(s.href,i)}})();var he={exports:{}},q={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var De=p,ze=Symbol.for("react.element"),Te=Symbol.for("react.fragment"),Ae=Object.prototype.hasOwnProperty,We=De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Oe={key:!0,ref:!0,__self:!0,__source:!0};function ue(t,r,l){var a,s={},i=null,h=null;l!==void 0&&(i=""+l),r.key!==void 0&&(i=""+r.key),r.ref!==void 0&&(h=r.ref);for(a in r)Ae.call(r,a)&&!Oe.hasOwnProperty(a)&&(s[a]=r[a]);if(t&&t.defaultProps)for(a in r=t.defaultProps,r)s[a]===void 0&&(s[a]=r[a]);return{$$typeof:ze,type:t,key:i,ref:h,props:s,_owner:We.current}}q.Fragment=Te;q.jsx=ue;q.jsxs=ue;he.exports=q;var e=he.exports,ie={},de=Re;ie.createRoot=de.createRoot,ie.hydrateRoot=de.hydrateRoot;function $(t){return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function _(t){return t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055}function me(t,r){const[l,a,s]=r;return[t[0][0]*l+t[0][1]*a+t[0][2]*s,t[1][0]*l+t[1][1]*a+t[1][2]*s,t[2][0]*l+t[2][1]*a+t[2][2]*s]}function G(t){return Math.max(0,Math.min(1,t))}function H(t){return Math.max(0,Math.min(255,Math.round(t)))}function Pe(t,r,l){if(t.length!==r.length)throw new Error("xs and ys must have the same length");const a=t.length,s=l;if(a<s+1)throw new Error(`Need at least degree+1 points (got ${a}, degree ${s})`);const i=Array.from({length:a},()=>Array(s+1).fill(0)),h=r.slice();for(let w=0;w<a;w++){let u=1;for(let M=0;M<=s;M++)i[w][M]=u,u*=t[w]}const x=Ie(i),m=Ge(x,i),y=Le(x,h);return Ne(m,y)}function Ie(t){const r=t.length,l=t[0].length,a=Array.from({length:l},()=>Array(r).fill(0));for(let s=0;s<r;s++)for(let i=0;i<l;i++)a[i][s]=t[s][i];return a}function Ge(t,r){const l=t.length,a=t[0].length,s=r[0].length,i=Array.from({length:l},()=>Array(s).fill(0));for(let h=0;h<l;h++)for(let x=0;x<s;x++){let m=0;for(let y=0;y<a;y++)m+=t[h][y]*r[y][x];i[h][x]=m}return i}function Le(t,r){const l=t.length,a=t[0].length,s=Array(l).fill(0);for(let i=0;i<l;i++){let h=0;for(let x=0;x<a;x++)h+=t[i][x]*r[x];s[i]=h}return s}function Ne(t,r){const l=t.length,a=t.map((i,h)=>i.concat([r[h]]));for(let i=0;i<l;i++){let h=i;for(let m=i+1;m<l;m++)Math.abs(a[m][i])>Math.abs(a[h][i])&&(h=m);[a[i],a[h]]=[a[h],a[i]];const x=a[i][i];if(Math.abs(x)<1e-12)throw new Error("Singular matrix in gaussianSolve");for(let m=i;m<=l;m++)a[i][m]/=x;for(let m=0;m<l;m++){if(m===i)continue;const y=a[m][i];for(let f=i;f<=l;f++)a[m][f]-=y*a[i][f]}}return a.map(i=>i[l])}const Se=[{s:0,M:[[1,0,-0],[0,1,0],[-0,-0,1]]},{s:.1,M:[[.866435,.177704,-.044139],[.049567,.939063,.01137],[-.003453,.007233,.99622]]},{s:.2,M:[[.760729,.319078,-.079807],[.090568,.889315,.020117],[-.006027,.013325,.992702]]},{s:.3,M:[[.675425,.43385,-.109275],[.125303,.847755,.026942],[-.00795,.018572,.989378]]},{s:.4,M:[[.605511,.52856,-.134071],[.155318,.812366,.032316],[-.009376,.023176,.9862]]},{s:.5,M:[[.547494,.607765,-.155259],[.181692,.781742,.036566],[-.01041,.027275,.983136]]},{s:.6,M:[[.498864,.674741,-.173604],[.205199,.754872,.039929],[-.011131,.030969,.980162]]},{s:.7,M:[[.457771,.731899,-.18967],[.226409,.731012,.042579],[-.011595,.034333,.977261]]},{s:.8,M:[[.422823,.781057,-.203881],[.245752,.709602,.044646],[-.011843,.037423,.974421]]},{s:.9,M:[[.392952,.82361,-.216562],[.263559,.69021,.046232],[-.01191,.040281,.97163]]},{s:1,M:[[.367322,.860646,-.227968],[.280085,.672501,.047413],[-.01182,.04294,.968881]]}];function $e(t,r){const l=t.map(s=>s.s),a=[[],[],[]];for(let s=0;s<3;s++){a[s]=[];for(let i=0;i<3;i++){const h=t.map(m=>m.M[s][i]),x=Pe(l,h,r);a[s][i]=x}}return a}function _e(t,r){let l=0;for(let a=t.length-1;a>=0;a--)l=l*r+t[a];return l}function fe(t,r){const l=G(r),a=[[0,0,0],[0,0,0],[0,0,0]];for(let s=0;s<3;s++)for(let i=0;i<3;i++)a[s][i]=_e(t[s][i],l);return a}const He=4,ge=$e(Se,He);function xe(t,r){const l=[$(t[0]/255),$(t[1]/255),$(t[2]/255)],a=fe(ge,r),[s,i,h]=me(a,l);return[H(_(G(s))*255),H(_(G(i))*255),H(_(G(h))*255)]}function Ue(t,r,l=.6,a=3){let s=[$(t[0]/255),$(t[1]/255),$(t[2]/255)];const i=[...s],h=fe(ge,r),x=m=>me(h,m);for(let m=0;m<a;m++){const y=x(s),f=[i[0]-y[0],i[1]-y[1],i[2]-y[2]];s=[G(s[0]+l*f[0]),G(s[1]+l*f[1]),G(s[2]+l*f[2])]}return[H(_(s[0])*255),H(_(s[1])*255),H(_(s[2])*255)]}function ye(t,r=.2){return Ue(t,r,.6,3)}function pe(t,r,l){t=t/360,r=r/100,l=l/100;const a=(x,m,y)=>(y<0&&(y+=1),y>1&&(y-=1),y<1/6?x+(m-x)*6*y:y<1/2?m:y<2/3?x+(m-x)*(2/3-y)*6:x);let s,i,h;if(r===0)s=i=h=l;else{const x=l<.5?l*(1+r):l+r-l*r,m=2*l-x;s=a(m,x,t+1/3),i=a(m,x,t),h=a(m,x,t-1/3)}return[Math.round(s*255),Math.round(i*255),Math.round(h*255)]}const Ye=({colorVisionSettings:t})=>{const r=p.useRef(null),[l,a]=p.useState(null),[s,i]=p.useState(!0),[h,x]=p.useState([]),[m,y]=p.useState(!1),[f,w]=p.useState(Math.min(window.innerWidth-40,600)),[u,M]=p.useState([]),[R,A]=p.useState([]),P=p.useCallback(()=>{const n=r.current;if(!n)return[];const o=f,d=window.devicePixelRatio||1;n.width=o*d,n.height=o*d;const c=n.getContext("2d");c&&c.scale(d,d);const b=o/2,j=o/2,g=o/2-20,C=[g*.94,g*.74,g*.58,g*.44,g*.33,g*.23],k=[g*.082,g*.07,g*.058,g*.046,g*.036,g*.023],F=[];for(let D=0;D<6;D++){const O=C[D],S=k[D],Z=50+D*7,V=100-D*14;for(let Y=0;Y<24;Y++){const X=Y*15,ce=X*Math.PI/180,ke=b+Math.cos(ce)*O,Ee=j+Math.sin(ce)*O,Me=`hsl(${X}, ${V}%, ${Z}%)`;let B=pe(X,V,Z),ee=[B[0],B[1],B[2]];if(t.simulation.useSimulation&&t.simulation.simulationType==="deuteranopia"){const te=[...B];B=xe(B,t.simulation.severity),ee=[B[0],B[1],B[2]],D===0&&Y===0&&console.log("ğŸ¨ Deuteranopia simulation applied:",{original:te,simulated:B,severity:t.simulation.severity})}if(t.correction.useCorrection&&t.correction.correctionType==="deuteranopia"){const te=[...B];B=ye(B,t.correction.strength),ee=[B[0],B[1],B[2]],D===0&&Y===0&&console.log("âœ… Deuteranopia correction applied:",{beforeCorrection:te,afterCorrection:B,strength:t.correction.strength})}const Fe=`rgb(${B[0]}, ${B[1]}, ${B[2]})`;F.push({hue:X,saturation:V,lightness:Z,rgb:ee,position:{x:ke,y:Ee},ring:D+1,originalColor:Me,finalColor:Fe,circleSize:S})}}const T=g*.12;return F.push({hue:0,saturation:0,lightness:100,rgb:[255,255,255],position:{x:b,y:j},ring:0,originalColor:"hsl(0, 0%, 100%)",finalColor:"#ffffff",circleSize:T}),F},[t,f]),z=n=>{const o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return o?{r:parseInt(o[1],16),g:parseInt(o[2],16),b:parseInt(o[3],16)}:null},v=(n,o,d)=>{n/=255,o/=255,d/=255;const c=Math.max(n,o,d),b=Math.min(n,o,d);let j=0,g=0;const C=(c+b)/2;if(c!==b){const k=c-b;switch(g=C>.5?k/(2-c-b):k/(c+b),c){case n:j=(o-d)/k+(o<d?6:0);break;case o:j=(d-n)/k+2;break;case d:j=(n-o)/k+4;break}j/=6}return{h:j*360,s:g*100,l:C*100}},E=p.useCallback((n,o,d,c)=>{if(!r.current)return null;const g=(O=>{const S=O.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);return S?{r:parseInt(S[1],10),g:parseInt(S[2],10),b:parseInt(S[3],10)}:null})(o.finalColor);if(!g)return console.error("ğŸš¨ RGB parsing failed:",o.finalColor),null;n.save(),n.beginPath(),n.arc(o.position.x,o.position.y,d,0,2*Math.PI),n.clip();const C=n.createLinearGradient(o.position.x-d,o.position.y,o.position.x+d,o.position.y),k=c*.7,F=c*.7,T={r:Math.min(255,g.r+(255-g.r)*k*.8),g:Math.min(255,g.g+80*k*.4),b:Math.min(255,g.b+120*k*.4)},D={r:Math.min(255,g.r+80*F*.4),g:Math.min(255,g.g+180*F*.6),b:Math.min(255,g.b+(255-g.b)*F*.8)};return C.addColorStop(0,`rgb(${Math.round(T.r)}, ${Math.round(T.g)}, ${Math.round(T.b)})`),C.addColorStop(.5,o.finalColor),C.addColorStop(1,`rgb(${Math.round(D.r)}, ${Math.round(D.g)}, ${Math.round(D.b)})`),n.fillStyle=C,n.beginPath(),n.arc(o.position.x,o.position.y,d,0,2*Math.PI),n.fill(),n.globalCompositeOperation="overlay",n.globalAlpha=c*.3,n.beginPath(),n.arc(o.position.x,o.position.y,d,0,2*Math.PI),n.fill(),n.restore(),null},[]),W=p.useCallback((n,o)=>{if(!l)return{color:n.finalColor,size:1};const d=r.current;if(!d)return{color:n.finalColor,size:1};const c=Math.sqrt(Math.pow(n.position.x-l.position.x,2)+Math.pow(n.position.y-l.position.y,2)),b=d.width*.5,j=Math.min(1,c/b),g=z(n.finalColor);if(!g)return{color:n.finalColor,size:1};const C=j*o*.6,k=j*o*.3,F=v(g.r,g.g,g.b);F.s*=1-C,F.l=Math.min(100,F.l+k*100);const T=pe(F.h,F.s,F.l),D=`rgb(${T[0]}, ${T[1]}, ${T[2]})`,O=1+(1-j)*o*.2;return{color:D,size:O}},[l]),I=p.useCallback((n,o,d)=>{const{specialEffect:c}=t;if(!c.enabled)return{color:o.finalColor,size:d,gradient:null,skipDrawing:!1};let b=o.finalColor,j=d;const g=null;let C=!1;switch(c.type){case"double-light":E(n,o,d,c.intensity),C=!0;break;case"depth":{const k=W(o,c.intensity);b=k.color,j=d*k.size;break}}return{color:b,size:j,gradient:g,skipDrawing:C}},[t,E,W]),J=(n,o,d)=>{var C;const c=Math.max(4,Math.floor(o*.015)),b=Math.min(.4,d.specialEffect.intensity*.4),j=((C=d.specialEffect.details.munker)==null?void 0:C.stripePattern)||"red-green";let g;switch(j){case"red-green":case"red-blue":g=`rgba(255, 60, 60, ${b})`;break;case"green-red":case"green-blue":g=`rgba(60, 255, 60, ${b})`;break;case"blue-red":case"blue-green":g=`rgba(60, 60, 255, ${b})`;break}n.save(),n.fillStyle=g;for(let k=0;k<o;k+=c*2)n.fillRect(k,0,c,o);n.restore()},U=(n,o,d)=>{var C;const c=Math.max(4,Math.floor(o*.015)),b=Math.min(.4,d.specialEffect.intensity*.4),j=((C=d.specialEffect.details.munker)==null?void 0:C.stripePattern)||"red-green";let g;switch(j){case"red-green":case"blue-green":g=`rgba(60, 255, 60, ${b})`;break;case"green-red":case"blue-red":g=`rgba(255, 60, 60, ${b})`;break;case"red-blue":case"green-blue":g=`rgba(60, 60, 255, ${b})`;break}n.save(),n.fillStyle=g;for(let k=c;k<o;k+=c*2)n.fillRect(k,0,c,o);n.restore()},we=(n,o,d,c)=>{const b=c*4;if(n.beginPath(),n.arc(o.position.x,o.position.y,d,0,Math.PI*2),n.fillStyle=o.finalColor,n.fill(),n.globalAlpha=.6,n.beginPath(),n.arc(o.position.x+b,o.position.y,d,0,Math.PI*2),n.fillStyle="rgba(255, 50, 50, 0.4)",n.fill(),n.beginPath(),n.arc(o.position.x-b,o.position.y,d,0,Math.PI*2),n.fillStyle="rgba(50, 255, 255, 0.4)",n.fill(),c>.5){n.globalAlpha=.3;const j=b*.3;n.beginPath(),n.arc(o.position.x,o.position.y-j,d,0,Math.PI*2),n.fillStyle="rgba(50, 255, 50, 0.3)",n.fill(),n.beginPath(),n.arc(o.position.x,o.position.y+j,d,0,Math.PI*2),n.fillStyle="rgba(255, 50, 255, 0.3)",n.fill()}n.globalAlpha=1},L=p.useCallback(()=>{const n=r.current;if(!n||h.length===0)return;const o=n.getContext("2d");if(!o)return;const d=f;o.fillStyle="#ffffff",o.fillRect(0,0,d,d),t.specialEffect.enabled&&t.specialEffect.type==="munker"&&J(o,d,t);const c=d/2-20,b=[c*.082,c*.07,c*.058,c*.046,c*.036,c*.023];h.forEach(j=>{if(j.ring===0)return;let g=b[j.ring-1];const C=I(o,j,g);g=C.size,!C.skipDrawing&&(t.specialEffect.enabled&&t.specialEffect.type==="watercolor"&&(o.shadowColor=C.color,o.shadowBlur=t.specialEffect.intensity*10,o.shadowOffsetX=0,o.shadowOffsetY=0),t.specialEffect.enabled&&t.specialEffect.type==="glitch"?we(o,j,g,t.specialEffect.intensity):(o.beginPath(),o.arc(j.position.x,j.position.y,g,0,Math.PI*2),o.fillStyle=C.color,o.fill()),o.shadowBlur=0)}),t.specialEffect.enabled&&t.specialEffect.type==="munker"&&U(o,d,t)},[h,s,l,t,I,f]);p.useEffect(()=>{if(!m){const n=P();x(n),y(!0)}},[m,P]),p.useEffect(()=>{const n=()=>{const o=Math.min(window.innerWidth-40,600);w(o)};return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),p.useEffect(()=>{if(m){const n=P();x(n)}},[t,P,m]),p.useEffect(()=>{h.length>0&&L()},[h,L,l,s]),p.useEffect(()=>{l&&t.specialEffect.enabled&&t.specialEffect.type==="depth"&&h.length>0&&L()},[l,t.specialEffect.enabled,t.specialEffect.type,h.length,L]);const K=p.useCallback(n=>{const d={id:Date.now()+Math.random(),x:n.position.x,y:n.position.y,radius:10,opacity:1,color:`hsl(${n.hue}, ${n.saturation}%, ${n.lightness}%)`,startTime:Date.now(),maxRadius:300};M(c=>[...c,d])},[]),oe=p.useCallback(n=>{const o=[];for(let c=0;c<8;c++){const b=c/8*Math.PI*2+(Math.random()-.5)*.5,j=3+Math.random()*4,g=n.ring===0?"#ffffff":`hsl(${n.hue}, ${Math.min(100,n.saturation+20)}%, ${Math.min(80,n.lightness+10)}%)`,C=n.ring===0?4+Math.random()*6:2+Math.random()*3;o.push({id:Date.now()+c,x:n.position.x,y:n.position.y,vx:Math.cos(b)*j,vy:Math.sin(b)*j,life:1,maxLife:200+Math.random()*100,size:C,color:g})}A(c=>[...c,...o])},[]),Ce=p.useCallback(n=>{const o=r.current;if(!o)return;const d=o.getBoundingClientRect(),c=n.clientX-d.left,b=n.clientY-d.top,j=f/d.width,g=f/d.height,C=c*j,k=b*g;let F=null,T=1/0;h.forEach(D=>{const O=Math.sqrt(Math.pow(C-D.position.x,2)+Math.pow(k-D.position.y,2));O<T&&(T=O,F=D)}),F&&T<30&&(t.specialEffect.enabled&&t.specialEffect.type==="depth"?(a(F),s&&K(F)):(a(F),s&&(K(F),oe(F))))},[h,s,K,oe,t]),le=p.useCallback(()=>{const n=Date.now(),o=d=>1-Math.pow(1-d,3);M(d=>d.map(c=>{const j=(n-c.startTime)/3e4;if(j>=1)return null;const g=c.radius,C=c.maxRadius||80,k=o(j);return{...c,radius:g+k*(C-g),opacity:Math.exp(-j*3)*c.opacity}}).filter(c=>c!==null)),A(d=>d.map(c=>{const b=r.current;if(!b)return null;const j=c.x+c.vx,g=c.y+c.vy,C=c.life-1/c.maxLife;return C<=0||j<-c.size||j>b.width+c.size||g<-c.size||g>b.height+c.size?null:{...c,x:j,y:g,life:C,vx:c.vx*.995,vy:c.vy*.995}}).filter(c=>c!==null))},[]),ae=p.useCallback(()=>{const n=r.current;if(!n||u.length===0&&R.length===0)return;const o=n.getContext("2d");o&&(u.forEach(d=>{o.beginPath(),o.arc(d.x,d.y,d.radius,0,Math.PI*2),o.strokeStyle=d.color;const c=(Date.now()-d.startTime)/3e3,b=Math.max(1.5,3*(1-c*.5));o.lineWidth=b,o.globalAlpha=d.opacity,o.stroke()}),R.forEach(d=>{d.life>.01&&(o.beginPath(),o.arc(d.x,d.y,d.size,0,Math.PI*2),o.fillStyle=d.color,o.globalAlpha=Math.max(0,d.life),o.fill(),o.shadowColor=d.color,o.shadowBlur=8,o.fill(),o.shadowBlur=0)}),o.globalAlpha=1)},[u,R]),N=p.useRef(),Q=p.useCallback(()=>{if(!s||u.length===0&&R.length===0)return;const n=r.current;if(!n)return;const o=n.getContext("2d");o&&(o.clearRect(0,0,n.width,n.height),L(),le(),ae(),N.current=requestAnimationFrame(Q))},[s,u.length,R.length,L,le,ae]);return p.useEffect(()=>(s&&(u.length>0||R.length>0)?N.current=requestAnimationFrame(Q):N.current&&cancelAnimationFrame(N.current),()=>{N.current&&cancelAnimationFrame(N.current)}),[s,u.length,R.length,Q]),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",background:"#ffffff",borderRadius:"1rem",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)",padding:"1.5rem"},children:e.jsx("canvas",{ref:r,onClick:Ce,style:{display:"block",width:`${f}px`,height:`${f}px`,cursor:"pointer"}})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"rgba(255, 255, 255, 0.95)",padding:"1rem",borderRadius:"0.5rem",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(0, 0, 0, 0.1)"},children:[e.jsx("input",{type:"checkbox",id:"effect-toggle",checked:s,onChange:n=>i(n.target.checked),style:{width:"18px",height:"18px",cursor:"pointer"}}),e.jsx("label",{htmlFor:"effect-toggle",style:{fontSize:"0.875rem",cursor:"pointer",userSelect:"none",color:"#333"},children:"âœ¨ ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’æœ‰åŠ¹ã«ã™ã‚‹"})]})]})},Xe=({colorVisionSettings:t})=>e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"0"},children:[e.jsx(Ye,{colorVisionSettings:t}),t.simulation.showSimulationInfo&&e.jsx("div",{style:{position:"absolute",bottom:"1rem",left:"50%",transform:"translateX(-50%)",padding:"0.5rem 1rem",background:"rgba(240, 249, 255, 0.95)",borderRadius:"0.5rem",textAlign:"center",border:"1px solid #bfdbfe",backdropFilter:"blur(4px)",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},children:e.jsxs("span",{style:{fontSize:"0.875rem",color:"#374151",fontWeight:"500"},children:[t.simulation.useSimulation&&e.jsxs(e.Fragment,{children:[t.simulation.simulationType==="deuteranopia"&&"ãƒ‡ãƒ¥ãƒ¼ã‚¿ãƒ³",t.simulation.simulationType==="protanopia"&&"ãƒ—ãƒ­ã‚¿ãƒ³",t.simulation.simulationType==="tritanopia"&&"ãƒˆãƒªã‚¿ãƒ³","ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ (",(t.simulation.severity*100).toFixed(0),"%)"]}),t.correction.useCorrection&&e.jsxs(e.Fragment,{children:[t.simulation.useSimulation&&" | ","è£œæ­£ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ (",(t.correction.strength*100).toFixed(0),"%)"]})]})})]});function re(t,r,l){return Math.min(Math.max(t,r),l)}const se=({colorVisionSettings:t,onColorVisionSettingsChange:r})=>{var w;const l=p.useCallback(()=>{r({...t,simulation:{...t.simulation,useSimulation:!t.simulation.useSimulation}})},[t,r]),a=p.useCallback(u=>{r({...t,simulation:{...t.simulation,simulationType:u}})},[t,r]),s=p.useCallback(u=>{r({...t,simulation:{...t.simulation,severity:re(u,0,1)}})},[t,r]),i=p.useCallback(()=>{r({...t,correction:{...t.correction,useCorrection:!t.correction.useCorrection}})},[t,r]),h=p.useCallback(u=>{r({...t,correction:{...t.correction,correctionType:u}})},[t,r]),x=p.useCallback(u=>{r({...t,correction:{...t.correction,strength:re(u,0,1)}})},[t,r]),m=p.useCallback(()=>{r({...t,specialEffect:{...t.specialEffect,enabled:!t.specialEffect.enabled}})},[t,r]),y=p.useCallback(u=>{r({...t,specialEffect:{...t.specialEffect,type:u}})},[t,r]),f=p.useCallback(u=>{r({...t,specialEffect:{...t.specialEffect,intensity:re(u,0,1)}})},[t,r]);return e.jsxs("div",{style:{background:"#FFFFFF",borderRadius:"1rem",padding:"1.5rem",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)",maxWidth:"500px",width:"100%"},children:[e.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"#f8fafc",borderRadius:"0.5rem",border:"1px solid #e2e8f0"},children:[e.jsx("h3",{style:{fontSize:"1rem",margin:"0 0 1rem 0",color:"#374151"},children:"è‰²è¦šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³"}),e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:t.simulation.useSimulation,onChange:l,style:{accentColor:"#3B82F6"}}),e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500"},children:"è‰²è¦šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æœ‰åŠ¹ã«ã™ã‚‹"})]})}),t.simulation.useSimulation&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:"ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ—:"}),e.jsxs("select",{value:t.simulation.simulationType,onChange:u=>a(u.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #D1D5DB",borderRadius:"0.375rem",fontSize:"0.875rem"},children:[e.jsx("option",{value:"deuteranopia",children:"ãƒ‡ãƒ¥ãƒ¼ã‚¿ãƒ³ï¼ˆç·‘è‰²è¦šç•°å¸¸ï¼‰"}),e.jsx("option",{value:"protanopia",children:"ãƒ—ãƒ­ã‚¿ãƒ³ï¼ˆèµ¤è‰²è¦šç•°å¸¸ï¼‰"}),e.jsx("option",{value:"tritanopia",children:"ãƒˆãƒªã‚¿ãƒ³ï¼ˆé’è‰²è¦šç•°å¸¸ï¼‰"})]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:["ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å¼·åº¦: ",(t.simulation.severity*100).toFixed(0),"%"]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:t.simulation.severity,onChange:u=>s(Number(u.target.value)),style:{width:"100%",height:"6px"}})]})]})]}),e.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"#fff7ed",borderRadius:"0.5rem",border:"1px solid #fed7aa"},children:[e.jsx("h3",{style:{fontSize:"1rem",margin:"0 0 1rem 0",color:"#374151"},children:"è‰²è¦šè£œæ­£ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼"}),e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:t.correction.useCorrection,onChange:i,style:{accentColor:"#ea580c"}}),e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500"},children:"è‰²è¦šè£œæ­£ã‚’æœ‰åŠ¹ã«ã™ã‚‹"})]})}),t.correction.useCorrection&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:"è£œæ­£å¯¾è±¡:"}),e.jsxs("select",{value:t.correction.correctionType,onChange:u=>h(u.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #D1D5DB",borderRadius:"0.375rem",fontSize:"0.875rem"},children:[e.jsx("option",{value:"deuteranopia",children:"ãƒ‡ãƒ¥ãƒ¼ã‚¿ãƒ³ï¼ˆç·‘è‰²è¦šç•°å¸¸ï¼‰"}),e.jsx("option",{value:"protanopia",children:"ãƒ—ãƒ­ã‚¿ãƒ³ï¼ˆèµ¤è‰²è¦šç•°å¸¸ï¼‰"}),e.jsx("option",{value:"tritanopia",children:"ãƒˆãƒªã‚¿ãƒ³ï¼ˆé’è‰²è¦šç•°å¸¸ï¼‰"})]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:["è£œæ­£å¼·åº¦: ",(t.correction.strength*100).toFixed(0),"%"]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:t.correction.strength,onChange:u=>x(Number(u.target.value)),style:{width:"100%",height:"6px"}})]}),e.jsx("div",{style:{marginBottom:"1rem"}})]})]}),e.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"#f3f4ff",borderRadius:"0.5rem",border:"1px solid #c7d2fe"},children:[e.jsx("h3",{style:{fontSize:"1rem",margin:"0 0 1rem 0",color:"#374151"},children:"ç‰¹æ®Šè¦–è¦šåŠ¹æœ"}),e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:t.specialEffect.enabled,onChange:m,style:{accentColor:"#7c3aed"}}),e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500"},children:"ç‰¹æ®Šè¦–è¦šåŠ¹æœã‚’æœ‰åŠ¹ã«ã™ã‚‹"})]})}),t.specialEffect.enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:"åŠ¹æœã‚¿ã‚¤ãƒ—:"}),e.jsxs("select",{value:t.specialEffect.type,onChange:u=>y(u.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #D1D5DB",borderRadius:"0.375rem",fontSize:"0.875rem"},children:[e.jsx("option",{value:"double-light",children:"ğŸ’¡ ãƒ€ãƒ–ãƒ«ãƒ©ã‚¤ãƒˆåŠ¹æœ"}),e.jsx("option",{value:"glitch",children:"ğŸ”¸ ã‚°ãƒªãƒƒãƒåŠ¹æœ"}),e.jsx("option",{value:"depth",children:"ğŸ¯ é è¿‘æ„ŸåŠ¹æœ"}),e.jsx("option",{value:"watercolor",children:"ğŸ¨ ã‚¦ã‚©ãƒ¼ã‚¿ãƒ¼ã‚«ãƒ©ãƒ¼åŠ¹æœ"}),e.jsx("option",{value:"munker",children:"ğŸ“ ãƒ ãƒ³ã‚«ãƒ¼éŒ¯è¦–"})]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:["åŠ¹æœå¼·åº¦: ",(t.specialEffect.intensity*100).toFixed(0),"%"]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:t.specialEffect.intensity,onChange:u=>f(Number(u.target.value)),style:{width:"100%",height:"6px"}})]}),t.specialEffect.type==="munker"&&e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:"ã‚¹ãƒˆãƒ©ã‚¤ãƒ—è‰²ãƒ‘ã‚¿ãƒ¼ãƒ³:"}),e.jsxs("select",{value:((w=t.specialEffect.details.munker)==null?void 0:w.stripePattern)||"red-green",onChange:u=>{var R;const M=u.target.value;r({...t,specialEffect:{...t.specialEffect,details:{...t.specialEffect.details,munker:{stripeWidth:((R=t.specialEffect.details.munker)==null?void 0:R.stripeWidth)||8,stripePattern:M}}}})},style:{width:"100%",padding:"0.5rem",border:"1px solid #D1D5DB",borderRadius:"0.375rem",fontSize:"0.875rem"},children:[e.jsx("option",{value:"red-green",children:"ğŸ”´Bottom ğŸŸ¢Top"}),e.jsx("option",{value:"green-red",children:"ğŸŸ¢Bottom ğŸ”´Top"}),e.jsx("option",{value:"red-blue",children:"ğŸ”´Bottom ğŸ”µTop"}),e.jsx("option",{value:"blue-red",children:"ğŸ”µBottom ğŸ”´Top"}),e.jsx("option",{value:"green-blue",children:"ğŸŸ¢Bottom ğŸ”µTop"}),e.jsx("option",{value:"blue-green",children:"ğŸ”µBottom ğŸŸ¢Top"})]})]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280",background:"rgba(255,255,255,0.5)",padding:"0.5rem",borderRadius:"0.25rem",marginTop:"1rem"},children:[t.specialEffect.type==="double-light"&&"2ã¤ã®å…‰æºã‹ã‚‰ç…§ã‚‰ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ãªåŠ¹æœã‚’è¿½åŠ ã—ã¾ã™",t.specialEffect.type==="glitch"&&"æ˜ åƒã®ãƒã‚°ã®ã‚ˆã†ãªè‰²ã‚ºãƒ¬ã‚„ãƒã‚¤ã‚ºã‚’æ„å›³çš„ã«åŠ ãˆã¾ã™",t.specialEffect.type==="depth"&&"é è¿‘æ„Ÿã‚’è‰²ã§è¡¨ç¾ã—ã€é¸æŠã—ãŸå††ã‚’è¿‘ãã«è¦‹ã›ã¾ã™",t.specialEffect.type==="watercolor"&&"å¢ƒç•Œç·šã®è‰²ãŒå†…å´ã«ã«ã˜ã‚“ã§è¦‹ãˆã‚‹ã‚ˆã†ãªåŠ¹æœã‚’è¿½åŠ ã—ã¾ã™",t.specialEffect.type==="munker"&&"èƒŒæ™¯ã®ã‚¹ãƒˆãƒ©ã‚¤ãƒ—ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã‚ˆã‚Šè‰²ãŒé•ã£ã¦è¦‹ãˆã‚‹éŒ¯è¦–åŠ¹æœ"]})]})]})]})};async function je(t,r,l){console.log("processImageData called with settings:",r),console.log("Image data size:",t.width,"x",t.height);const a=new Uint8ClampedArray(t.data),s=a.length/4,i=Math.max(1e3,Math.floor(s/100));let h=0,x=!1;for(let m=0;m<a.length;m+=i*4){const y=Math.min(m+i*4,a.length);for(let f=m;f<y;f+=4){let u=[a[f],a[f+1],a[f+2]];r.simulation.useSimulation&&r.simulation.simulationType==="deuteranopia"&&(u=xe(u,r.simulation.severity),x=!0),r.correction.useCorrection&&r.correction.correctionType==="deuteranopia"&&(u=ye(u,r.correction.strength),x=!0),a[f]=u[0],a[f+1]=u[1],a[f+2]=u[2],h++}if(l){const f=Math.round(h/s*100);l(f)}await new Promise(f=>setTimeout(f,0))}return console.log("Processing completed. Actually processed:",x),console.log("Total pixels processed:",h),new ImageData(a,t.width,t.height)}function qe(t,r=4096,l=4096){return new Promise((a,s)=>{const i=new Image,h=document.createElement("canvas"),x=h.getContext("2d");if(!x){s(new Error("Canvas context not available"));return}i.onload=()=>{let{width:m,height:y}=i;if(m>r||y>l){const w=Math.min(r/m,l/y);m*=w,y*=w}h.width=m,h.height=y,x.drawImage(i,0,0,m,y);const f=x.getImageData(0,0,m,y);a({canvas:h,imageData:f})},i.onerror=()=>{s(new Error("Failed to load image"))},i.src=URL.createObjectURL(t)})}function ne(t,r){const l=t.getContext("2d");if(!l)throw new Error("Canvas context not available");t.width=r.width,t.height=r.height,l.putImageData(r,0,0)}function be(t,r="colorwise-processed.png",l="image/png",a=.9){t.toBlob(s=>{if(!s)return;const i=URL.createObjectURL(s),h=document.createElement("a");h.href=i,h.download=r,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(i)},l,a)}function ve(t){if(t===0)return"0 Bytes";const r=1024,l=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(t)/Math.log(r));return parseFloat((t/Math.pow(r,a)).toFixed(2))+" "+l[a]}function Je(t,r=10*1024*1024){return t.type.startsWith("image/")?["image/jpeg","image/png","image/webp","image/gif"].includes(t.type)?t.size>r?`ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãŒå¤§ãã™ãã¾ã™ï¼ˆæœ€å¤§: ${ve(r)}ï¼‰`:null:"ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„ç”»åƒå½¢å¼ã§ã™ï¼ˆJPEG, PNG, WebP, GIFã®ã¿ï¼‰":"ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„"}const Ke=({onImageLoad:t,processingState:r,disabled:l=!1})=>{const[a,s]=p.useState(!1),i=p.useCallback(f=>{const w=Je(f);if(w){alert(w);return}const u=new Image;u.onload=()=>{const M={file:f,url:URL.createObjectURL(f),width:u.width,height:u.height,size:f.size};t(M)},u.src=URL.createObjectURL(f)},[t]),h=p.useCallback(f=>{var u;const w=(u=f.target.files)==null?void 0:u[0];w&&i(w)},[i]),x=p.useCallback(f=>{f.preventDefault(),s(!1);const w=f.dataTransfer.files[0];w&&i(w)},[i]),m=p.useCallback(f=>{f.preventDefault(),s(!0)},[]),y=p.useCallback(f=>{f.preventDefault(),s(!1)},[]);return e.jsxs("div",{style:{background:"#FFFFFF",borderRadius:"0.75rem",padding:"2rem",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)",width:"100%"},children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#111827",margin:"0 0 1.5rem 0"},children:"ğŸ“¸ å†™çœŸã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰"}),e.jsx("div",{onDrop:x,onDragOver:m,onDragLeave:y,style:{border:a?"2px dashed #3B82F6":"2px dashed #D1D5DB",borderRadius:"0.5rem",padding:"3rem 1rem",textAlign:"center",transition:"all 0.2s ease",background:a?"#F0F9FF":"#F9FAFB",cursor:l?"not-allowed":"pointer",opacity:l?.5:1},children:r.isProcessing?e.jsxs("div",{children:[e.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid #E5E7EB",borderTop:"4px solid #3B82F6",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),e.jsxs("p",{style:{color:"#6B7280",fontSize:"1rem",margin:"0 0 0.5rem 0"},children:["å‡¦ç†ä¸­... ",r.progress,"%"]}),e.jsx("div",{style:{width:"100%",height:"8px",background:"#E5E7EB",borderRadius:"4px",overflow:"hidden",margin:"0 auto",maxWidth:"200px"},children:e.jsx("div",{style:{width:`${r.progress}%`,height:"100%",background:"#3B82F6",transition:"width 0.3s ease"}})})]}):e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"ğŸ“·"}),e.jsx("p",{style:{color:"#374151",fontSize:"1.125rem",fontWeight:"500",margin:"0 0 0.5rem 0"},children:"å†™çœŸã‚’ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—"}),e.jsx("p",{style:{color:"#6B7280",fontSize:"0.875rem",margin:"0 0 1.5rem 0"},children:"ã¾ãŸã¯ä¸‹ã®ãƒœã‚¿ãƒ³ã‹ã‚‰é¸æŠ"}),e.jsxs("label",{style:{display:"inline-block",background:"#3B82F6",color:"white",padding:"0.75rem 2rem",borderRadius:"0.5rem",fontWeight:"500",cursor:l?"not-allowed":"pointer",transition:"background-color 0.2s ease"},children:["ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ",e.jsx("input",{type:"file",accept:"image/*",onChange:h,disabled:l,style:{display:"none"}})]})]})}),e.jsx("div",{style:{marginTop:"1rem",padding:"1rem",background:"#F0F9FF",borderRadius:"0.5rem",border:"1px solid #BFDBFE"},children:e.jsxs("p",{style:{fontSize:"0.875rem",color:"#374151",margin:"0",lineHeight:"1.5"},children:["ğŸ’¡ ",e.jsx("strong",{children:"å¯¾å¿œå½¢å¼:"})," JPEG, PNG, WebP, GIF",e.jsx("br",{}),"ğŸ“ ",e.jsx("strong",{children:"æ¨å¥¨ã‚µã‚¤ã‚º:"})," 10MBä»¥ä¸‹ã€1920Ã—1080pxä»¥ä¸‹"]})}),r.error&&e.jsx("div",{style:{marginTop:"1rem",padding:"1rem",background:"#FEF2F2",borderRadius:"0.5rem",border:"1px solid #FECACA"},children:e.jsxs("p",{style:{fontSize:"0.875rem",color:"#DC2626",margin:"0",fontWeight:"500"},children:["âŒ ã‚¨ãƒ©ãƒ¼: ",r.error]})}),e.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]})},Qe=({imageInfo:t,colorVisionSettings:r,onProcessingStateChange:l})=>{const a=p.useRef(null),s=p.useRef(null),[i,h]=p.useState("processed"),[x,m]=p.useState(null),[y,f]=p.useState(null);p.useEffect(()=>{if(!t){m(null),f(null);return}(async()=>{try{l(!0,0);const{imageData:M}=await qe(t.file);m(M),a.current&&ne(a.current,M),console.log("Image loaded, waiting for color processing...")}catch(M){console.error("ç”»åƒèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:",M),l(!1,0,"ç”»åƒã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ")}})()},[t]),p.useEffect(()=>{if(!x)return;const u=setTimeout(()=>{(async()=>{try{console.log("Starting color processing...",r),l(!0,0);const R=await je(x,r,A=>{console.log("Processing progress:",A),l(!0,A)});console.log("Color processing completed"),f(R),s.current&&ne(s.current,R),l(!1,100)}catch(R){console.error("ç”»åƒå‡¦ç†ã‚¨ãƒ©ãƒ¼:",R),l(!1,0,"ç”»åƒå‡¦ç†ã«å¤±æ•—ã—ã¾ã—ãŸ")}})()},100);return()=>clearTimeout(u)},[x,r]);const w=()=>{if(!s.current||!y)return;const u=`colorwise-${(t==null?void 0:t.file.name)||"processed"}.png`;be(s.current,u)};return t?e.jsxs("div",{style:{background:"#FFFFFF",borderRadius:"0.75rem",padding:"1.5rem",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)",width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#111827",margin:"0 0 0.5rem 0"},children:"ğŸ–¼ï¸ ç”»åƒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼"}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"#6B7280",margin:"0"},children:[t.file.name," (",t.width,"Ã—",t.height,", ",ve(t.size),")"]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsxs("select",{value:i,onChange:u=>h(u.target.value),style:{padding:"0.5rem",border:"1px solid #D1D5DB",borderRadius:"0.375rem",fontSize:"0.875rem"},children:[e.jsx("option",{value:"original",children:"å…ƒç”»åƒ"}),e.jsx("option",{value:"processed",children:"å¤‰æ›æ¸ˆã¿"}),e.jsx("option",{value:"split",children:"åˆ†å‰²è¡¨ç¤º"})]}),e.jsx("button",{onClick:w,disabled:!y,style:{background:y?"#10B981":"#D1D5DB",color:"white",padding:"0.5rem 1rem",borderRadius:"0.375rem",fontWeight:"500",border:"none",cursor:y?"pointer":"not-allowed",fontSize:"0.875rem"},children:"ğŸ’¾ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰"})]})]}),e.jsxs("div",{style:{borderRadius:"0.5rem",overflow:"auto",background:"#F3F4F6",position:"relative",maxHeight:"80vh"},children:[i==="split"&&e.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx("canvas",{ref:a,style:{maxWidth:"100%",height:"auto",display:"block"}}),e.jsx("div",{style:{position:"absolute",top:"0.5rem",left:"0.5rem",background:"rgba(0,0,0,0.7)",color:"white",padding:"0.25rem 0.5rem",borderRadius:"0.25rem",fontSize:"0.75rem",fontWeight:"500"},children:"å…ƒç”»åƒ"})]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("canvas",{ref:s,style:{maxWidth:"100%",height:"auto",display:"block"}}),e.jsx("div",{style:{position:"absolute",top:"0.5rem",left:"0.5rem",background:"rgba(0,0,0,0.7)",color:"white",padding:"0.25rem 0.5rem",borderRadius:"0.25rem",fontSize:"0.75rem",fontWeight:"500"},children:"å¤‰æ›æ¸ˆã¿"})]})]}),i==="original"&&e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx("canvas",{ref:a,style:{maxWidth:"100%",height:"auto",display:"block"}})}),i==="processed"&&e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx("canvas",{ref:s,style:{maxWidth:"100%",height:"auto",display:"block"}})})]}),e.jsx("div",{style:{marginTop:"1rem",padding:"1rem",background:"#F0F9FF",borderRadius:"0.5rem",border:"1px solid #BFDBFE"},children:e.jsxs("p",{style:{fontSize:"0.875rem",color:"#374151",margin:"0",lineHeight:"1.5"},children:["ğŸ”„ ",e.jsx("strong",{children:"ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å‡¦ç†:"})," å·¦ã®ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼èª¿æ•´ãŒå³åº§ã«åæ˜ ã•ã‚Œã¾ã™",e.jsx("br",{}),"ğŸ’¾ ",e.jsx("strong",{children:"ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰:"})," å‡¦ç†çµæœã‚’PNGå½¢å¼ã§ä¿å­˜ã§ãã¾ã™"]})})]}):e.jsxs("div",{style:{background:"#F9FAFB",borderRadius:"0.75rem",padding:"3rem",textAlign:"center",border:"2px dashed #D1D5DB"},children:[e.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"ğŸ–¼ï¸"}),e.jsx("p",{style:{color:"#6B7280",fontSize:"1.125rem",margin:"0"},children:"ç”»åƒã‚’é¸æŠã—ã¦ãã ã•ã„"})]})},Ze=({colorVisionSettings:t,onProcessingStateChange:r})=>{const l=p.useRef(null),a=p.useRef(null),s=p.useRef(null),[i,h]=p.useState({isActive:!1,facingMode:"environment",resolution:{width:1280,height:720}}),[x,m]=p.useState([]),[y,f]=p.useState(null),[w,u]=p.useState(!1),[M,R]=p.useState("processed");p.useEffect(()=>{(async()=>{try{const W=(await navigator.mediaDevices.enumerateDevices()).filter(I=>I.kind==="videoinput");m(W)}catch(E){console.error("ãƒ‡ãƒã‚¤ã‚¹å–å¾—ã‚¨ãƒ©ãƒ¼:",E)}})()},[]);const A=p.useCallback(async()=>{if(console.log("toggleCamera called, current state:",i.isActive),i.isActive&&y){console.log("Stopping camera..."),y.getTracks().forEach(v=>v.stop()),f(null),h(v=>({...v,isActive:!1}));return}if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){console.error("getUserMedia not supported"),r(!1,0,"ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯ã‚«ãƒ¡ãƒ©ã‚¢ã‚¯ã‚»ã‚¹ã«å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“");return}try{console.log("Starting camera..."),r(!0,0,"");const v={video:i.deviceId?{deviceId:{exact:i.deviceId}}:{facingMode:i.facingMode}};console.log("Camera constraints:",v);const E=await navigator.mediaDevices.getUserMedia(v);console.log("Camera stream obtained:",E),f(E),h(W=>({...W,isActive:!0})),l.current&&(l.current.srcObject=E,console.log("Video element source set"),l.current.onloadedmetadata=()=>{console.log("Video metadata loaded"),r(!1,100,"")})}catch(v){console.error("ã‚«ãƒ¡ãƒ©ã‚¢ã‚¯ã‚»ã‚¹ã‚¨ãƒ©ãƒ¼:",v);let E="ã‚«ãƒ¡ãƒ©ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã›ã‚“ã§ã—ãŸ";v instanceof Error&&(v.name==="NotAllowedError"?E="ã‚«ãƒ¡ãƒ©ã‚¢ã‚¯ã‚»ã‚¹ãŒæ‹’å¦ã•ã‚Œã¾ã—ãŸã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šã‚’ç¢ºèªã—ã¦ãã ã•ã„":v.name==="NotFoundError"?E="ã‚«ãƒ¡ãƒ©ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ":v.name==="NotReadableError"?E="ã‚«ãƒ¡ãƒ©ãŒä»–ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ä½¿ç”¨ä¸­ã§ã™":E=`ã‚«ãƒ¡ãƒ©ã‚¨ãƒ©ãƒ¼: ${v.message}`),r(!1,0,E)}},[i,y,r]),P=p.useCallback(async()=>{if(!l.current||!a.current||!s.current||w)return;const v=l.current,E=a.current,W=s.current;E.width=v.videoWidth,E.height=v.videoHeight,W.width=v.videoWidth,W.height=v.videoHeight;const I=E.getContext("2d");if(!I)return;I.drawImage(v,0,0);const J=I.getImageData(0,0,E.width,E.height);u(!0),r(!0,50,"ç”»åƒã‚’å‡¦ç†ä¸­...");try{const U=await je(J,t);ne(W,U),r(!1,100,"å‡¦ç†å®Œäº†")}catch(U){console.error("ãƒ•ãƒ¬ãƒ¼ãƒ å‡¦ç†ã‚¨ãƒ©ãƒ¼:",U),r(!1,0,"å‡¦ç†ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ")}finally{u(!1)}},[t,w,r]),z=p.useCallback(()=>{if(!s.current)return;const E=`colorwise-capture-${new Date().toISOString().replace(/[:.]/g,"-")}.png`;be(s.current,E)},[]);return e.jsxs("div",{style:{background:"#FFFFFF",borderRadius:"0.75rem",padding:"1.5rem",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)",width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#111827",margin:"0"},children:"ğŸ“· ã‚«ãƒ¡ãƒ©ã‚­ãƒ£ãƒ—ãƒãƒ£"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[x.length>1&&e.jsxs("select",{value:i.deviceId||"",onChange:v=>h(E=>({...E,deviceId:v.target.value})),disabled:i.isActive,style:{padding:"0.5rem",border:"1px solid #D1D5DB",borderRadius:"0.375rem",fontSize:"0.875rem"},children:[e.jsx("option",{value:"",children:"ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ"}),x.map(v=>e.jsx("option",{value:v.deviceId,children:v.label||`ã‚«ãƒ¡ãƒ© ${v.deviceId.slice(0,8)}`},v.deviceId))]}),e.jsxs("select",{value:M,onChange:v=>R(v.target.value),style:{padding:"0.5rem",border:"1px solid #D1D5DB",borderRadius:"0.375rem",fontSize:"0.875rem"},children:[e.jsx("option",{value:"original",children:"å…ƒç”»åƒ"}),e.jsx("option",{value:"processed",children:"å¤‰æ›æ¸ˆã¿"}),e.jsx("option",{value:"split",children:"åˆ†å‰²è¡¨ç¤º"})]}),e.jsx("button",{onClick:A,style:{background:i.isActive?"#DC2626":"#10B981",color:"white",padding:"0.5rem 1rem",borderRadius:"0.375rem",fontWeight:"500",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:i.isActive?"â¹ï¸ åœæ­¢":"ğŸ“¹ ã‚«ãƒ¡ãƒ©ã‚’èµ·å‹•"}),i.isActive&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:P,disabled:w,style:{background:w?"#9CA3AF":"#059669",color:"white",padding:"0.5rem 1rem",borderRadius:"0.375rem",fontWeight:"500",border:"none",cursor:w?"not-allowed":"pointer",fontSize:"0.875rem"},children:w?"ğŸ”„ å‡¦ç†ä¸­...":"ğŸ“¸ æ’®å½±"}),e.jsx("button",{onClick:z,disabled:!s.current,style:{background:"#3B82F6",color:"white",padding:"0.5rem 1rem",borderRadius:"0.375rem",fontWeight:"500",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:"ğŸ’¾ ä¿å­˜"})]})]})]}),e.jsx("div",{style:{borderRadius:"0.5rem",overflow:"auto",background:"#F3F4F6",position:"relative",minHeight:"400px",maxHeight:"80vh"},children:i.isActive?e.jsxs(e.Fragment,{children:[e.jsx("video",{ref:l,autoPlay:!0,playsInline:!0,muted:!0,style:{display:"none"}}),M==="split"&&e.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx("canvas",{ref:a,style:{maxWidth:"100%",height:"auto",display:"block"}}),e.jsx("div",{style:{position:"absolute",top:"0.5rem",left:"0.5rem",background:"rgba(0,0,0,0.7)",color:"white",padding:"0.25rem 0.5rem",borderRadius:"0.25rem",fontSize:"0.75rem",fontWeight:"500"},children:"ã‚ªãƒªã‚¸ãƒŠãƒ«"})]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("canvas",{ref:s,style:{maxWidth:"100%",height:"auto",display:"block"}}),e.jsx("div",{style:{position:"absolute",top:"0.5rem",left:"0.5rem",background:"rgba(0,0,0,0.7)",color:"white",padding:"0.25rem 0.5rem",borderRadius:"0.25rem",fontSize:"0.75rem",fontWeight:"500"},children:"å‡¦ç†å¾Œ"}),w&&e.jsx("div",{style:{position:"absolute",top:"0.5rem",right:"0.5rem",background:"rgba(0,0,0,0.7)",color:"white",padding:"0.25rem 0.5rem",borderRadius:"0.25rem",fontSize:"0.75rem"},children:"å‡¦ç†ä¸­..."})]})]}),M==="original"&&e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx("canvas",{ref:a,style:{maxWidth:"100%",height:"auto",display:"block"}})}),M==="processed"&&e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx("canvas",{ref:s,style:{maxWidth:"100%",height:"auto",display:"block"}})})]}):e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"300px",flexDirection:"column",gap:"1rem"},children:[e.jsx("div",{style:{fontSize:"3rem"},children:"ğŸ“¹"}),e.jsx("p",{style:{color:"#6B7280",fontSize:"1.125rem",margin:"0"},children:"ã‚«ãƒ¡ãƒ©ã‚’èµ·å‹•ã—ã¦ãã ã•ã„"})]})}),e.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"#F0F9FF",borderRadius:"0.5rem",border:"1px solid #BFDBFE"},children:[e.jsxs("p",{style:{fontSize:"0.875rem",color:"#374151",margin:"0 0 0.5rem 0",lineHeight:"1.5"},children:["ğŸ“¸ ",e.jsx("strong",{children:"æ’®å½±:"})," ã€Œæ’®å½±ã€ãƒœã‚¿ãƒ³ã§é™æ­¢ç”»ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ã€è‰²è¦šå¤‰æ›ã‚’é©ç”¨",e.jsx("br",{}),"ğŸ’¾ ",e.jsx("strong",{children:"ä¿å­˜:"})," å‡¦ç†å¾Œã®ç”»åƒã‚’PNGå½¢å¼ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã¾ã™"]}),e.jsxs("p",{style:{fontSize:"0.75rem",color:"#6B7280",margin:"0",lineHeight:"1.4",fontStyle:"italic"},children:["âš ï¸ ",e.jsx("strong",{children:"ã‚«ãƒ¡ãƒ©ã‚¢ã‚¯ã‚»ã‚¹ã®ãƒ’ãƒ³ãƒˆ:"}),e.jsx("br",{}),"â€¢ ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚«ãƒ¡ãƒ©è¨±å¯ãŒå¿…è¦ã§ã™",e.jsx("br",{}),"â€¢ ä»–ã®ã‚¢ãƒ—ãƒªã§ã‚«ãƒ¡ãƒ©ã‚’ä½¿ç”¨ä¸­ã§ãªã„ã‹ç¢ºèªã—ã¦ãã ã•ã„",e.jsx("br",{}),"â€¢ HTTPSã§ãªã„å ´åˆã€ä¸€éƒ¨ãƒ–ãƒ©ã‚¦ã‚¶ã§åˆ¶é™ã•ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™"]})]})]})},Ve=({isOpen:t,onClose:r,activeSection:l})=>{if(!t)return null;const a=()=>{switch(l){case"about":return e.jsxs("div",{children:[e.jsx("h2",{style:{color:"#111827",marginBottom:"1rem"},children:"ã“ã®ã‚¢ãƒ—ãƒªã«ã¤ã„ã¦"}),e.jsxs("div",{style:{lineHeight:"1.6",color:"#374151"},children:[e.jsxs("p",{children:[e.jsx("strong",{children:"ColorWiseï¼ˆã‚«ãƒ©ãƒ¼ãƒ¯ã‚¤ã‚ºï¼‰"}),"ã¯ã€è‰²è¦šã®å¤šæ§˜æ€§ã«é…æ…®ã—ãŸè‰²è¡¨ç¤ºæ”¯æ´ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚"]}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"ğŸ¯ ç›®çš„"}),e.jsxs("ul",{style:{paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"è‰²è¦šã®é•ã„ã«ã‚ˆã‚‹è¦‹ãˆæ–¹ã®ä½“é¨“ãƒ»ç†è§£ä¿ƒé€²"}),e.jsx("li",{children:"ãƒ‡ã‚¸ã‚¿ãƒ«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®è‰²èª¿æ•´æ”¯æ´"}),e.jsx("li",{children:"ã‚ˆã‚ŠåŒ…æ‹¬çš„ãªãƒ‡ã‚¶ã‚¤ãƒ³ç’°å¢ƒã®å®Ÿç¾"})]}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"âš ï¸ é‡è¦ãªæ³¨æ„"}),e.jsxs("ul",{style:{paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"æœ¬ã‚¢ãƒ—ãƒªã¯åŒ»ç™‚æ©Ÿå™¨ã§ã¯ã‚ã‚Šã¾ã›ã‚“"}),e.jsx("li",{children:"è‰²è¦šç•°å¸¸ã®è¨ºæ–­ãƒ»æ²»ç™‚ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã›ã‚“"}),e.jsx("li",{children:"åŒ»å¸«ã®è¨ºæ–­ã«ä»£ã‚ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“"})]}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"ğŸ”’ ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼"}),e.jsxs("ul",{style:{paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"ã™ã¹ã¦ã®å‡¦ç†ã¯ç«¯æœ«å†…ã§å®Œçµ"}),e.jsx("li",{children:"ç”»åƒãƒ‡ãƒ¼ã‚¿ã®å¤–éƒ¨é€ä¿¡ãªã—"}),e.jsx("li",{children:"å€‹äººæƒ…å ±ã®åé›†ãªã—"})]}),e.jsx("div",{style:{marginTop:"2rem",paddingTop:"1rem",borderTop:"1px solid #E5E7EB",fontSize:"0.75rem",color:"#6B7280"},children:e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{children:"Version:"})," ","3.0.2",e.jsxs("span",{children:[" (Built: ",new Date("2025-10-04T11:37:38.957Z").toLocaleString("ja-JP"),")"]})]})})]})]});case"credits":return e.jsxs("div",{children:[e.jsx("h2",{style:{color:"#111827",marginBottom:"1rem"},children:"ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆãƒ»è¬è¾"}),e.jsxs("div",{style:{lineHeight:"1.6",color:"#374151"},children:[e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"ğŸ“ å­¦è¡“çš„åŸºç›¤"}),e.jsx("p",{children:"æœ¬ã‚¢ãƒ—ãƒªã®è‰²è¦šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã¯ã€ä»¥ä¸‹ã®ç ”ç©¶æˆæœã‚’å‚è€ƒã«å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ï¼š"}),e.jsxs("div",{style:{background:"#F9FAFB",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #E5E7EB",marginTop:"0.5rem"},children:[e.jsx("p",{style:{fontWeight:"bold",margin:"0 0 0.5rem 0"},children:"Machado, G.M., Oliveira, M.M., and Fernandes, L.A.F. (2009)"}),e.jsx("p",{style:{fontStyle:"italic",margin:"0 0 0.5rem 0"},children:'"A Physiologically-based Model for Simulation of Color Vision Deficiency"'}),e.jsx("p",{style:{fontSize:"0.875rem",margin:"0"},children:"IEEE Transactions on Visualization and Computer Graphics, Vol.15, No.6, pp.1291-1298"})]}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"ğŸ› ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯"}),e.jsxs("ul",{style:{paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"React 18 + TypeScript"}),e.jsx("li",{children:"Vite (ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«)"}),e.jsx("li",{children:"PWA (Service Worker + Manifest)"}),e.jsx("li",{children:"Canvas API (ç”»åƒå‡¦ç†)"})]}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"ğŸ™ è¬è¾"}),e.jsx("p",{children:"è‰²è¦šã®å¤šæ§˜æ€§ã«é–¢ã™ã‚‹ç†è§£ä¿ƒé€²ã¨ã€ã‚ˆã‚ŠåŒ…æ‹¬çš„ãªæŠ€è¡“ç’°å¢ƒã®æ§‹ç¯‰ã«è²¢çŒ®ã—ã¦ãã ã•ã‚‹ ç ”ç©¶è€…ãƒ»é–‹ç™ºè€…ãƒ»ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®çš†æ§˜ã«æ·±ãæ„Ÿè¬ã„ãŸã—ã¾ã™ã€‚"}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"â˜• é–‹ç™ºã‚’æ”¯æ´"}),e.jsx("p",{style:{marginBottom:"1rem"},children:"ã“ã®ã‚¢ãƒ—ãƒªãŒå½¹ã«ç«‹ã¡ã¾ã—ãŸã‚‰ã€é–‹ç™ºç¶™ç¶šã®ãŸã‚ã®ã”æ”¯æ´ã‚’ã„ãŸã ã‘ã‚‹ã¨å¤§å¤‰å¬‰ã—ã„ã§ã™ï¼ˆå®Œå…¨ä»»æ„ã§ã™ï¼‰ã€‚"}),e.jsx("div",{style:{textAlign:"center"},children:e.jsx("a",{href:"https://github.com/sponsors",target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",background:"#EA4AAA",color:"white",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",textDecoration:"none",fontWeight:"500",transition:"background 0.2s"},children:"ğŸ’ GitHub Sponsors ã§æ”¯æ´"})}),e.jsx("p",{style:{fontSize:"0.75rem",color:"#6B7280",textAlign:"center",margin:"0.5rem 0 0 0"},children:"â€» æ©Ÿèƒ½åˆ¶é™ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã™ã¹ã¦ä»»æ„ã®ã‚µãƒãƒ¼ãƒˆã§ã™ã€‚"})]})]});case"privacy":return e.jsxs("div",{children:[e.jsx("h2",{style:{color:"#111827",marginBottom:"1rem"},children:"ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼"}),e.jsxs("div",{style:{lineHeight:"1.6",color:"#374151"},children:[e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"ğŸ”’ ãƒ‡ãƒ¼ã‚¿åé›†ã«ã¤ã„ã¦"}),e.jsx("p",{children:e.jsx("strong",{children:"æœ¬ã‚¢ãƒ—ãƒªã¯ä»¥ä¸‹ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¸€åˆ‡åé›†ã—ã¾ã›ã‚“ï¼š"})}),e.jsxs("ul",{style:{paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"å€‹äººè­˜åˆ¥æƒ…å ±"}),e.jsx("li",{children:"ç”»åƒãƒ»å†™çœŸãƒ‡ãƒ¼ã‚¿"}),e.jsx("li",{children:"ä½ç½®æƒ…å ±"}),e.jsx("li",{children:"é–²è¦§å±¥æ­´"})]}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"ğŸ’¾ ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ãƒ¼ã‚¿"}),e.jsxs("ul",{style:{paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"è¨­å®šæƒ…å ±ã®ã¿ã‚’ãƒ–ãƒ©ã‚¦ã‚¶å†…ã«ä¿å­˜"}),e.jsx("li",{children:"å¤–éƒ¨ã‚µãƒ¼ãƒãƒ¼ã¸ã®é€ä¿¡ãªã—"}),e.jsx("li",{children:"ãƒ–ãƒ©ã‚¦ã‚¶è¨­å®šã‹ã‚‰å‰Šé™¤å¯èƒ½"})]}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"ğŸ“· ã‚«ãƒ¡ãƒ©æ©Ÿèƒ½"}),e.jsxs("ul",{style:{paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"ã™ã¹ã¦ã®å‡¦ç†ãŒç«¯æœ«å†…ã§å®Œçµ"}),e.jsx("li",{children:"æ’®å½±ãƒ‡ãƒ¼ã‚¿ã®å¤–éƒ¨é€ä¿¡ãªã—"}),e.jsx("li",{children:"ã‚¢ãƒ—ãƒªçµ‚äº†æ™‚ã«è‡ªå‹•å‰Šé™¤"})]}),e.jsxs("p",{style:{background:"#EFF6FF",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #DBEAFE",marginTop:"1rem"},children:["è©³ç´°ã¯ ",e.jsx("a",{href:"/PRIVACY.md",target:"_blank",rel:"noopener noreferrer",style:{color:"#3B82F6"},children:"å®Œå…¨ç‰ˆãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼"})," ã‚’ã”ç¢ºèªãã ã•ã„ã€‚"]})]})]});case"disclaimer":return e.jsxs("div",{children:[e.jsx("h2",{style:{color:"#111827",marginBottom:"1rem"},children:"å…è²¬äº‹é …"}),e.jsxs("div",{style:{lineHeight:"1.6",color:"#374151"},children:[e.jsx("div",{style:{background:"#FEF3C7",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #FCD34D",marginBottom:"1rem"},children:e.jsx("p",{style:{margin:0,fontWeight:"bold"},children:"âš ï¸ é‡è¦ï¼šæœ¬ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯åŒ»ç™‚æ©Ÿå™¨ã§ã¯ã‚ã‚Šã¾ã›ã‚“"})}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"âŒ æœ¬ã‚¢ãƒ—ãƒªã¯ä»¥ä¸‹ã§ã¯ã‚ã‚Šã¾ã›ã‚“"}),e.jsxs("ul",{style:{paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"è‰²è¦šç•°å¸¸ã®è¨ºæ–­ãƒ„ãƒ¼ãƒ«"}),e.jsx("li",{children:"æ²»ç™‚ã‚’ç›®çš„ã¨ã—ãŸè£½å“"}),e.jsx("li",{children:"åŒ»å¸«ã«ã‚ˆã‚‹è¨ºæ–­ãƒ»æ²»ç™‚ã®ä»£æ›¿æ‰‹æ®µ"})]}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"âœ… æœ¬ã‚¢ãƒ—ãƒªã®ç›®çš„"}),e.jsxs("ul",{style:{paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"è‰²è¦šã®é•ã„ã«ã‚ˆã‚‹è¦‹ãˆæ–¹ã®ä½“é¨“ãƒ»ç†è§£ä¿ƒé€²"}),e.jsx("li",{children:"ãƒ‡ã‚¸ã‚¿ãƒ«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®è‰²èª¿æ•´æ”¯æ´"}),e.jsx("li",{children:"ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å‘ä¸Šã®ãŸã‚ã®æ”¯æ´"})]}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"ğŸ¥ åŒ»ç™‚ç›¸è«‡ã®æ¨å¥¨"}),e.jsx("p",{children:"è‰²è¦šã«é–¢ã™ã‚‹ç–‘å•ã‚„ä¸å®‰ãŒã‚ã‚‹å ´åˆã¯ã€å¿…ãšå°‚é–€ã®çœ¼ç§‘åŒ»å¸«ã«ã”ç›¸è«‡ãã ã•ã„ã€‚"}),e.jsxs("p",{style:{background:"#FEF2F2",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #FECACA",marginTop:"1rem"},children:["è©³ç´°ã¯ ",e.jsx("a",{href:"/DISCLAIMER.md",target:"_blank",rel:"noopener noreferrer",style:{color:"#3B82F6"},children:"å®Œå…¨ç‰ˆå…è²¬äº‹é …"})," ã‚’ã”ç¢ºèªãã ã•ã„ã€‚"]})]})]});default:return null}};return e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",padding:"2rem",maxWidth:"600px",maxHeight:"80vh",overflow:"auto",position:"relative",boxShadow:"0 20px 25px -5px rgb(0 0 0 / 0.1), 0 10px 10px -5px rgb(0 0 0 / 0.04)"},children:[e.jsx("button",{onClick:r,style:{position:"absolute",top:"1rem",right:"1rem",background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#6B7280",width:"2rem",height:"2rem",display:"flex",alignItems:"center",justifyContent:"center"},children:"Ã—"}),a()]})})},et=({size:t="medium",className:r="",style:l={}})=>{const s=(()=>{if(typeof t=="number")return t;switch(t){case"small":return 24;case"medium":return 32;case"large":return 48;default:return 32}})();return e.jsxs("svg",{width:s,height:s,viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",className:r,style:{...l,shapeRendering:"geometricPrecision",imageRendering:"optimizeQuality",filter:"drop-shadow(0 0 8px rgba(255, 255, 255, 0.4))"},children:[e.jsxs("defs",{children:[e.jsxs("filter",{id:"flare",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsxs("radialGradient",{id:"purpleGlow",children:[e.jsx("stop",{offset:"0%",stopColor:"hsl(270, 85%, 75%)",stopOpacity:"1"}),e.jsx("stop",{offset:"70%",stopColor:"hsl(270, 85%, 60%)",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"hsl(270, 85%, 50%)",stopOpacity:"1"})]}),e.jsxs("radialGradient",{id:"magentaGlow",children:[e.jsx("stop",{offset:"0%",stopColor:"hsl(300, 85%, 75%)",stopOpacity:"1"}),e.jsx("stop",{offset:"70%",stopColor:"hsl(300, 85%, 60%)",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"hsl(300, 85%, 50%)",stopOpacity:"1"})]}),e.jsxs("radialGradient",{id:"pinkGlow",children:[e.jsx("stop",{offset:"0%",stopColor:"hsl(330, 85%, 75%)",stopOpacity:"1"}),e.jsx("stop",{offset:"70%",stopColor:"hsl(330, 85%, 60%)",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"hsl(330, 85%, 50%)",stopOpacity:"1"})]}),e.jsxs("radialGradient",{id:"redGlow",children:[e.jsx("stop",{offset:"0%",stopColor:"hsl(0, 85%, 75%)",stopOpacity:"1"}),e.jsx("stop",{offset:"70%",stopColor:"hsl(0, 85%, 60%)",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"hsl(0, 85%, 50%)",stopOpacity:"1"})]}),e.jsxs("radialGradient",{id:"orangeGlow",children:[e.jsx("stop",{offset:"0%",stopColor:"hsl(30, 85%, 75%)",stopOpacity:"1"}),e.jsx("stop",{offset:"70%",stopColor:"hsl(30, 85%, 60%)",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"hsl(30, 85%, 50%)",stopOpacity:"1"})]}),e.jsxs("radialGradient",{id:"yellowGlow",children:[e.jsx("stop",{offset:"0%",stopColor:"hsl(60, 85%, 75%)",stopOpacity:"1"}),e.jsx("stop",{offset:"70%",stopColor:"hsl(60, 85%, 60%)",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"hsl(60, 85%, 50%)",stopOpacity:"1"})]}),e.jsxs("radialGradient",{id:"yellowGreenGlow",children:[e.jsx("stop",{offset:"0%",stopColor:"hsl(90, 85%, 75%)",stopOpacity:"1"}),e.jsx("stop",{offset:"70%",stopColor:"hsl(90, 85%, 60%)",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"hsl(90, 85%, 50%)",stopOpacity:"1"})]}),e.jsxs("radialGradient",{id:"greenGlow",children:[e.jsx("stop",{offset:"0%",stopColor:"hsl(120, 85%, 75%)",stopOpacity:"1"}),e.jsx("stop",{offset:"70%",stopColor:"hsl(120, 85%, 60%)",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"hsl(120, 85%, 50%)",stopOpacity:"1"})]}),e.jsxs("radialGradient",{id:"blueGreenGlow",children:[e.jsx("stop",{offset:"0%",stopColor:"hsl(150, 85%, 75%)",stopOpacity:"1"}),e.jsx("stop",{offset:"70%",stopColor:"hsl(150, 85%, 60%)",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"hsl(150, 85%, 50%)",stopOpacity:"1"})]}),e.jsxs("radialGradient",{id:"cyanGlow",children:[e.jsx("stop",{offset:"0%",stopColor:"hsl(180, 85%, 75%)",stopOpacity:"1"}),e.jsx("stop",{offset:"70%",stopColor:"hsl(180, 85%, 60%)",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"hsl(180, 85%, 50%)",stopOpacity:"1"})]}),e.jsxs("radialGradient",{id:"lightBlueGlow",children:[e.jsx("stop",{offset:"0%",stopColor:"hsl(210, 85%, 75%)",stopOpacity:"1"}),e.jsx("stop",{offset:"70%",stopColor:"hsl(210, 85%, 60%)",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"hsl(210, 85%, 50%)",stopOpacity:"1"})]}),e.jsxs("radialGradient",{id:"blueGlow",children:[e.jsx("stop",{offset:"0%",stopColor:"hsl(240, 85%, 75%)",stopOpacity:"1"}),e.jsx("stop",{offset:"70%",stopColor:"hsl(240, 85%, 60%)",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"hsl(240, 85%, 50%)",stopOpacity:"1"})]})]}),e.jsx("circle",{cx:"256",cy:"106",r:"32",fill:"url(#purpleGlow)",filter:"url(#flare)"})," ",e.jsx("circle",{cx:"331",cy:"131",r:"32",fill:"url(#magentaGlow)",filter:"url(#flare)"})," ",e.jsx("circle",{cx:"385.8",cy:"181",r:"32",fill:"url(#pinkGlow)",filter:"url(#flare)"})," ",e.jsx("circle",{cx:"406",cy:"256",r:"32",fill:"url(#redGlow)",filter:"url(#flare)"})," ",e.jsx("circle",{cx:"385.8",cy:"331",r:"32",fill:"url(#orangeGlow)",filter:"url(#flare)"})," ",e.jsx("circle",{cx:"331",cy:"381",r:"32",fill:"url(#yellowGlow)",filter:"url(#flare)"})," ",e.jsx("circle",{cx:"256",cy:"406",r:"32",fill:"url(#yellowGreenGlow)",filter:"url(#flare)"})," ",e.jsx("circle",{cx:"181",cy:"381",r:"32",fill:"url(#greenGlow)",filter:"url(#flare)"})," ",e.jsx("circle",{cx:"126.2",cy:"331",r:"32",fill:"url(#blueGreenGlow)",filter:"url(#flare)"})," ",e.jsx("circle",{cx:"106",cy:"256",r:"32",fill:"url(#cyanGlow)",filter:"url(#flare)"})," ",e.jsx("circle",{cx:"126.2",cy:"181",r:"32",fill:"url(#lightBlueGlow)",filter:"url(#flare)"})," ",e.jsx("circle",{cx:"181",cy:"131",r:"32",fill:"url(#blueGlow)",filter:"url(#flare)"})," "]})};function tt(){const[t,r]=p.useState({simulation:{useSimulation:!1,simulationType:"deuteranopia",severity:.2,showSimulationInfo:!1},correction:{useCorrection:!1,correctionType:"deuteranopia",strength:.2},specialEffect:{enabled:!1,type:"double-light",intensity:.5,details:{doubleLight:{light1Position:{x:.25,y:.25},light2Position:{x:.75,y:.75}},glitch:{offsetAmount:2,noiseLevel:.1},depth:{focusedRing:void 0},munker:{stripeWidth:8,stripePattern:"red-green"},watercolor:{blurRadius:5,spreadAmount:.3}}}}),[l,a]=p.useState("rgb"),[s,i]=p.useState(!1),[h,x]=p.useState("about"),[m,y]=p.useState(null),[f,w]=p.useState({isProcessing:!1,progress:0,error:null}),[u,M]=p.useState(window.innerWidth),R=p.useCallback((z,v,E)=>{w({isProcessing:z,progress:v,error:E||null})},[]);p.useEffect(()=>{const z=()=>{M(window.innerWidth)};return window.addEventListener("resize",z),()=>window.removeEventListener("resize",z)},[]),p.useEffect(()=>{const z=localStorage.getItem("colorwise-color-vision-settings");if(z)try{const v=JSON.parse(z);r(v)}catch(v){console.error("è‰²è¦šè¨­å®šã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ:",v)}},[]),p.useEffect(()=>{localStorage.setItem("colorwise-color-vision-settings",JSON.stringify(t))},[t]);const A=z=>{x(z),i(!0)},P=()=>{i(!1)};return e.jsxs("div",{className:"app",children:[e.jsx("header",{className:"app-header",children:e.jsxs("div",{className:"container",children:[e.jsxs("h1",{className:"app-title",children:[e.jsx(et,{size:"large",className:"app-logo"}),"ColorWise"]}),e.jsx("p",{className:"app-subtitle",children:"ColorWise - è‰²ã®ä¸–ç•Œã‚’ã€ã‚‚ã£ã¨æ¥½ã—ã"})]})}),e.jsxs("main",{className:"app-main",children:[e.jsx("nav",{className:"tab-navigation",children:e.jsxs("div",{className:"tab-buttons",children:[e.jsx("button",{onClick:()=>a("rgb"),className:`tab-button ${l==="rgb"?"active":""}`,children:"ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼"}),e.jsxs("button",{onClick:()=>a("image"),className:`tab-button ${l==="image"?"active":""}`,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",style:{marginRight:"0.5rem",verticalAlign:"middle"},children:[e.jsx("path",{d:"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"å†™çœŸ"]}),e.jsxs("button",{onClick:()=>a("camera"),className:`tab-button ${l==="camera"?"active":""}`,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{marginRight:"0.5rem",verticalAlign:"middle"},children:[e.jsx("path",{d:"M14.5 4h-5L7 7H4a2 2 0 00-2 2v9a2 2 0 002 2h16a2 2 0 002-2V9a2 2 0 00-2-2h-3l-2.5-3z"}),e.jsx("circle",{cx:"12",cy:"13",r:"3"})]}),"ã‚«ãƒ¡ãƒ©"]})]})}),e.jsx("div",{className:"container",children:e.jsxs("div",{className:l==="rgb"?"app-content":"",children:[l==="rgb"&&e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"visualization-section",children:[e.jsx("div",{className:"visualization-wrapper",children:e.jsx(Xe,{colorVisionSettings:t})}),e.jsx("div",{className:"section-description",children:e.jsx("p",{children:"24è‰²ç›¸ç’°ã§æ§˜ã€…ãªè‰²ã®è¦‹ãˆæ–¹ã‚’ã€è‰²è¦šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚„è£œæ­£ã®åŠ¹æœã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ãã¾ã™ã€‚ è¨­å®šãƒ‘ãƒãƒ«ã§èª¿æ•´ã—ã¦ãã ã•ã„ã€‚"})})]}),e.jsx("section",{className:"adjustment-section",children:e.jsx(se,{colorVisionSettings:t,onColorVisionSettingsChange:r})})]}),l==="image"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:u>768?"350px 1fr":"1fr",gap:"2rem",alignItems:"start"},children:[e.jsxs("div",{style:{position:u>1400?"sticky":"static",top:"1rem"},children:[e.jsx("h2",{className:"section-title",style:{color:"#9CA3AF",marginBottom:"1rem"},children:"Settings"}),e.jsx(se,{colorVisionSettings:t,onColorVisionSettingsChange:r}),e.jsx("div",{style:{marginTop:"2rem"},children:e.jsx(Ke,{onImageLoad:y,processingState:f,disabled:f.isProcessing})})]}),e.jsx("div",{style:{width:"100%"},children:e.jsx(Qe,{imageInfo:m,colorVisionSettings:t,onProcessingStateChange:R})})]}),l==="camera"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:u>768?"350px 1fr":"1fr",gap:"2rem",alignItems:"start"},children:[e.jsxs("div",{style:{position:u>1400?"sticky":"static",top:"1rem"},children:[e.jsx("h2",{className:"section-title",style:{color:"#9CA3AF",marginBottom:"1rem"},children:"Settings"}),e.jsx(se,{colorVisionSettings:t,onColorVisionSettingsChange:r})]}),e.jsx("div",{style:{width:"100%"},children:e.jsx(Ze,{colorVisionSettings:t,onProcessingStateChange:R})})]})]})})]}),e.jsx("footer",{className:"app-footer",children:e.jsxs("div",{className:"container",children:[e.jsx("p",{className:"footer-text",children:"Â© 2025 ColorWise - è‰²ã®ä¸–ç•Œã‚’ã€ã‚‚ã£ã¨æ¥½ã—ã"}),e.jsxs("p",{className:"footer-links",children:[e.jsx("button",{onClick:()=>A("about"),className:"footer-link",style:{background:"none",border:"none",color:"inherit",textDecoration:"underline",cursor:"pointer"},children:"ã“ã®ã‚¢ãƒ—ãƒªã«ã¤ã„ã¦"}),e.jsx("span",{className:"footer-separator",children:"|"}),e.jsx("button",{onClick:()=>A("credits"),className:"footer-link",style:{background:"none",border:"none",color:"inherit",textDecoration:"underline",cursor:"pointer"},children:"ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ"}),e.jsx("span",{className:"footer-separator",children:"|"}),e.jsx("button",{onClick:()=>A("privacy"),className:"footer-link",style:{background:"none",border:"none",color:"inherit",textDecoration:"underline",cursor:"pointer"},children:"ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼"}),e.jsx("span",{className:"footer-separator",children:"|"}),e.jsx("button",{onClick:()=>A("disclaimer"),className:"footer-link",style:{background:"none",border:"none",color:"inherit",textDecoration:"underline",cursor:"pointer"},children:"å…è²¬äº‹é …"})]})]})}),e.jsx(Ve,{isOpen:s,onClose:P,activeSection:h})]})}ie.createRoot(document.getElementById("root")).render(e.jsx(Be.StrictMode,{children:e.jsx(tt,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/colorwise-app/sw.js").then(async t=>{console.log("SW registered: ",t),t.waiting?t.waiting.postMessage({type:"SKIP_WAITING"}):t.installing&&t.installing.addEventListener("statechange",()=>{t.waiting&&t.waiting.postMessage({type:"SKIP_WAITING"})})}).catch(t=>{console.log("SW registration failed: ",t)})});
//# sourceMappingURL=index-FajMtitD.js.map
