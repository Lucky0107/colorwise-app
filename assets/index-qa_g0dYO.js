import{r as u,a as J,R as Y}from"./vendor-nf7bT_Uh.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}})();var W={exports:{}},E={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q=u,K=Symbol.for("react.element"),X=Symbol.for("react.fragment"),Q=Object.prototype.hasOwnProperty,Z=q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,V={key:!0,ref:!0,__self:!0,__source:!0};function N(r,t,s){var i,o={},n=null,d=null;s!==void 0&&(n=""+s),t.key!==void 0&&(n=""+t.key),t.ref!==void 0&&(d=t.ref);for(i in t)Q.call(t,i)&&!V.hasOwnProperty(i)&&(o[i]=t[i]);if(r&&r.defaultProps)for(i in t=r.defaultProps,t)o[i]===void 0&&(o[i]=t[i]);return{$$typeof:K,type:r,key:n,ref:d,props:o,_owner:Z.current}}E.Fragment=X;E.jsx=N;E.jsxs=N;W.exports=E;var e=W.exports,S={},A=J;S.createRoot=A.createRoot,S.hydrateRoot=A.hydrateRoot;function C(r){return r<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function k(r){return r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055}function L(r,t){const[s,i,o]=t;return[r[0][0]*s+r[0][1]*i+r[0][2]*o,r[1][0]*s+r[1][1]*i+r[1][2]*o,r[2][0]*s+r[2][1]*i+r[2][2]*o]}function w(r){return Math.max(0,Math.min(1,r))}function R(r){return Math.max(0,Math.min(255,Math.round(r)))}function ee(r,t,s){if(r.length!==t.length)throw new Error("xs and ys must have the same length");const i=r.length,o=s;if(i<o+1)throw new Error(`Need at least degree+1 points (got ${i}, degree ${o})`);const n=Array.from({length:i},()=>Array(o+1).fill(0)),d=t.slice();for(let g=0;g<i;g++){let p=1;for(let f=0;f<=o;f++)n[g][f]=p,p*=r[g]}const a=re(n),l=te(a,n),h=ne(a,d);return oe(l,h)}function re(r){const t=r.length,s=r[0].length,i=Array.from({length:s},()=>Array(t).fill(0));for(let o=0;o<t;o++)for(let n=0;n<s;n++)i[n][o]=r[o][n];return i}function te(r,t){const s=r.length,i=r[0].length,o=t[0].length,n=Array.from({length:s},()=>Array(o).fill(0));for(let d=0;d<s;d++)for(let a=0;a<o;a++){let l=0;for(let h=0;h<i;h++)l+=r[d][h]*t[h][a];n[d][a]=l}return n}function ne(r,t){const s=r.length,i=r[0].length,o=Array(s).fill(0);for(let n=0;n<s;n++){let d=0;for(let a=0;a<i;a++)d+=r[n][a]*t[a];o[n]=d}return o}function oe(r,t){const s=r.length,i=r.map((n,d)=>n.concat([t[d]]));for(let n=0;n<s;n++){let d=n;for(let l=n+1;l<s;l++)Math.abs(i[l][n])>Math.abs(i[d][n])&&(d=l);[i[n],i[d]]=[i[d],i[n]];const a=i[n][n];if(Math.abs(a)<1e-12)throw new Error("Singular matrix in gaussianSolve");for(let l=n;l<=s;l++)i[n][l]/=a;for(let l=0;l<s;l++){if(l===n)continue;const h=i[l][n];for(let c=n;c<=s;c++)i[l][c]-=h*i[n][c]}}return i.map(n=>n[s])}const ie=[{s:0,M:[[1,0,-0],[0,1,0],[-0,-0,1]]},{s:.1,M:[[.866435,.177704,-.044139],[.049567,.939063,.01137],[-.003453,.007233,.99622]]},{s:.2,M:[[.760729,.319078,-.079807],[.090568,.889315,.020117],[-.006027,.013325,.992702]]},{s:.3,M:[[.675425,.43385,-.109275],[.125303,.847755,.026942],[-.00795,.018572,.989378]]},{s:.4,M:[[.605511,.52856,-.134071],[.155318,.812366,.032316],[-.009376,.023176,.9862]]},{s:.5,M:[[.547494,.607765,-.155259],[.181692,.781742,.036566],[-.01041,.027275,.983136]]},{s:.6,M:[[.498864,.674741,-.173604],[.205199,.754872,.039929],[-.011131,.030969,.980162]]},{s:.7,M:[[.457771,.731899,-.18967],[.226409,.731012,.042579],[-.011595,.034333,.977261]]},{s:.8,M:[[.422823,.781057,-.203881],[.245752,.709602,.044646],[-.011843,.037423,.974421]]},{s:.9,M:[[.392952,.82361,-.216562],[.263559,.69021,.046232],[-.01191,.040281,.97163]]},{s:1,M:[[.367322,.860646,-.227968],[.280085,.672501,.047413],[-.01182,.04294,.968881]]}];function se(r,t){const s=r.map(o=>o.s),i=[[],[],[]];for(let o=0;o<3;o++){i[o]=[];for(let n=0;n<3;n++){const d=r.map(l=>l.M[o][n]),a=ee(s,d,t);i[o][n]=a}}return i}function le(r,t){let s=0;for(let i=r.length-1;i>=0;i--)s=s*t+r[i];return s}function O(r,t){const s=w(t),i=[[0,0,0],[0,0,0],[0,0,0]];for(let o=0;o<3;o++)for(let n=0;n<3;n++)i[o][n]=le(r[o][n],s);return i}const ae=4,P=se(ie,ae);function _(r,t){const s=[C(r[0]/255),C(r[1]/255),C(r[2]/255)],i=O(P,t),[o,n,d]=L(i,s);return[R(k(w(o))*255),R(k(w(n))*255),R(k(w(d))*255)]}function de(r,t,s=.6,i=3){let o=[C(r[0]/255),C(r[1]/255),C(r[2]/255)];const n=[...o],d=O(P,t),a=l=>L(d,l);for(let l=0;l<i;l++){const h=a(o),c=[n[0]-h[0],n[1]-h[1],n[2]-h[2]];o=[w(o[0]+s*c[0]),w(o[1]+s*c[1]),w(o[2]+s*c[2])]}return[R(k(o[0])*255),R(k(o[1])*255),R(k(o[2])*255)]}function G(r,t=.2){return de(r,t,.6,3)}const ce=({colorVisionSettings:r,width:t=400,height:s=400})=>{const i=u.useRef(null),o={red:100,green:100,blue:100},n=d=>{let a=d;return r.simulation.useSimulation&&r.simulation.simulationType==="deuteranopia"&&(a=_(a,r.simulation.severity)),r.correction.useCorrection&&r.correction.correctionType==="deuteranopia"&&(a=G(a,r.correction.strength)),a};return u.useEffect(()=>{const d=i.current;if(!d)return;const a=d.getContext("2d");if(!a)return;a.clearRect(0,0,t,s),a.imageSmoothingEnabled=!0;const l=t/2,h=s/2,c=Math.min(t,s)/3,g=[255,0,0],p=[0,255,0],f=[0,0,255],j=n(g),b=n(p),B=n(f),y=[{color:"red",x:l,y:h-c*.3,intensity:o.red,transformedColor:j},{color:"green",x:l-c*.4,y:h+c*.2,intensity:o.green,transformedColor:b},{color:"blue",x:l+c*.4,y:h+c*.2,intensity:o.blue,transformedColor:B}];a.globalCompositeOperation="screen",y.forEach(m=>{a.save(),a.globalAlpha=m.intensity/100;const x=a.createRadialGradient(m.x,m.y,0,m.x,m.y,c),[v,F,D]=m.transformedColor;x.addColorStop(0,`rgba(${v}, ${F}, ${D}, 1)`),x.addColorStop(1,`rgba(${v}, ${F}, ${D}, 0)`),a.beginPath(),a.arc(m.x,m.y,c,0,Math.PI*2),a.fillStyle=x,a.fill(),a.restore()}),a.globalCompositeOperation="destination-over",a.fillStyle="#FFFFFF",a.fillRect(0,0,t,s)},[r,t,s]),e.jsxs("div",{style:{position:"relative",display:"inline-block",borderRadius:"0.75rem",overflow:"hidden",boxShadow:"0 10px 15px -3px rgb(0 0 0 / 0.1)",background:"#FFFFFF",padding:"1.5rem"},children:[e.jsx("canvas",{ref:i,width:t,height:s,style:{display:"block",borderRadius:"0.5rem",maxWidth:"100%",height:"auto"},"aria-label":"RGB色調整の視覚化"}),r.simulation.showSimulationInfo&&e.jsx("div",{style:{marginTop:"0.5rem",padding:"0.5rem",background:"#f0f9ff",borderRadius:"0.25rem",textAlign:"center",border:"1px solid #bfdbfe"},children:e.jsxs("span",{style:{fontSize:"0.75rem",color:"#374151",fontWeight:"500"},children:[r.simulation.useSimulation&&e.jsxs(e.Fragment,{children:[r.simulation.simulationType==="deuteranopia"&&"デュータン",r.simulation.simulationType==="protanopia"&&"プロタン",r.simulation.simulationType==="tritanopia"&&"トリタン","シミュレーション (",(r.simulation.severity*100).toFixed(0),"%)"]}),r.correction.useCorrection&&e.jsxs(e.Fragment,{children:[r.simulation.useSimulation&&" | ","補正フィルター (",(r.correction.strength*100).toFixed(0),"%)"]})]})})]})};function I(r,t,s){return Math.min(Math.max(r,t),s)}const T=({colorVisionSettings:r,onColorVisionSettingsChange:t})=>{const s=u.useCallback(()=>{t({...r,simulation:{...r.simulation,useSimulation:!r.simulation.useSimulation}})},[r,t]),i=u.useCallback(l=>{t({...r,simulation:{...r.simulation,simulationType:l}})},[r,t]),o=u.useCallback(l=>{t({...r,simulation:{...r.simulation,severity:I(l,0,1)}})},[r,t]),n=u.useCallback(()=>{t({...r,correction:{...r.correction,useCorrection:!r.correction.useCorrection}})},[r,t]),d=u.useCallback(l=>{t({...r,correction:{...r.correction,correctionType:l}})},[r,t]),a=u.useCallback(l=>{t({...r,correction:{...r.correction,strength:I(l,0,1)}})},[r,t]);return e.jsxs("div",{style:{background:"#FFFFFF",borderRadius:"0.75rem",padding:"2rem",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)",maxWidth:"500px",width:"100%"},children:[e.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"#f8fafc",borderRadius:"0.5rem",border:"1px solid #e2e8f0"},children:[e.jsx("h3",{style:{fontSize:"1rem",margin:"0 0 1rem 0",color:"#374151"},children:"色覚シミュレーション"}),e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:r.simulation.useSimulation,onChange:s,style:{accentColor:"#3B82F6"}}),e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500"},children:"色覚シミュレーションを有効にする"})]})}),r.simulation.useSimulation&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:"シミュレーションタイプ:"}),e.jsxs("select",{value:r.simulation.simulationType,onChange:l=>i(l.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #D1D5DB",borderRadius:"0.375rem",fontSize:"0.875rem"},children:[e.jsx("option",{value:"deuteranopia",children:"デュータン（緑色覚異常）"}),e.jsx("option",{value:"protanopia",children:"プロタン（赤色覚異常）"}),e.jsx("option",{value:"tritanopia",children:"トリタン（青色覚異常）"})]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:["シミュレーション強度: ",(r.simulation.severity*100).toFixed(0),"%"]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:r.simulation.severity,onChange:l=>o(Number(l.target.value)),style:{width:"100%",height:"6px"}})]})]})]}),e.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"#fff7ed",borderRadius:"0.5rem",border:"1px solid #fed7aa"},children:[e.jsx("h3",{style:{fontSize:"1rem",margin:"0 0 1rem 0",color:"#374151"},children:"色覚補正フィルター"}),e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:r.correction.useCorrection,onChange:n,style:{accentColor:"#ea580c"}}),e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500"},children:"色覚補正を有効にする"})]})}),r.correction.useCorrection&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:"補正対象:"}),e.jsxs("select",{value:r.correction.correctionType,onChange:l=>d(l.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #D1D5DB",borderRadius:"0.375rem",fontSize:"0.875rem"},children:[e.jsx("option",{value:"deuteranopia",children:"デュータン（緑色覚異常）"}),e.jsx("option",{value:"protanopia",children:"プロタン（赤色覚異常）"}),e.jsx("option",{value:"tritanopia",children:"トリタン（青色覚異常）"})]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:["補正強度: ",(r.correction.strength*100).toFixed(0),"%"]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:r.correction.strength,onChange:l=>a(Number(l.target.value)),style:{width:"100%",height:"6px"}})]}),e.jsx("div",{style:{marginBottom:"1rem"}})]})]})]})};async function U(r,t,s){console.log("processImageData called with settings:",t),console.log("Image data size:",r.width,"x",r.height);const i=new Uint8ClampedArray(r.data),o=i.length/4,n=Math.max(1e3,Math.floor(o/100));let d=0,a=!1;for(let l=0;l<i.length;l+=n*4){const h=Math.min(l+n*4,i.length);for(let c=l;c<h;c+=4){let p=[i[c],i[c+1],i[c+2]];t.simulation.useSimulation&&t.simulation.simulationType==="deuteranopia"&&(p=_(p,t.simulation.severity),a=!0),t.correction.useCorrection&&t.correction.correctionType==="deuteranopia"&&(p=G(p,t.correction.strength),a=!0),i[c]=p[0],i[c+1]=p[1],i[c+2]=p[2],d++}if(s){const c=Math.round(d/o*100);s(c)}await new Promise(c=>setTimeout(c,0))}return console.log("Processing completed. Actually processed:",a),console.log("Total pixels processed:",d),new ImageData(i,r.width,r.height)}function me(r,t=4096,s=4096){return new Promise((i,o)=>{const n=new Image,d=document.createElement("canvas"),a=d.getContext("2d");if(!a){o(new Error("Canvas context not available"));return}n.onload=()=>{let{width:l,height:h}=n;if(l>t||h>s){const g=Math.min(t/l,s/h);l*=g,h*=g}d.width=l,d.height=h,a.drawImage(n,0,0,l,h);const c=a.getImageData(0,0,l,h);i({canvas:d,imageData:c})},n.onerror=()=>{o(new Error("Failed to load image"))},n.src=URL.createObjectURL(r)})}function z(r,t){const s=r.getContext("2d");if(!s)throw new Error("Canvas context not available");r.width=t.width,r.height=t.height,s.putImageData(t,0,0)}function $(r,t="colorwise-processed.png",s="image/png",i=.9){r.toBlob(o=>{if(!o)return;const n=URL.createObjectURL(o),d=document.createElement("a");d.href=n,d.download=t,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(n)},s,i)}function H(r){if(r===0)return"0 Bytes";const t=1024,s=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(r)/Math.log(t));return parseFloat((r/Math.pow(t,i)).toFixed(2))+" "+s[i]}function ue(r,t=10*1024*1024){return r.type.startsWith("image/")?["image/jpeg","image/png","image/webp","image/gif"].includes(r.type)?r.size>t?`ファイルサイズが大きすぎます（最大: ${H(t)}）`:null:"サポートされていない画像形式です（JPEG, PNG, WebP, GIFのみ）":"画像ファイルを選択してください"}const he=({onImageLoad:r,processingState:t,disabled:s=!1})=>{const[i,o]=u.useState(!1),n=u.useCallback(c=>{const g=ue(c);if(g){alert(g);return}const p=new Image;p.onload=()=>{const f={file:c,url:URL.createObjectURL(c),width:p.width,height:p.height,size:c.size};r(f)},p.src=URL.createObjectURL(c)},[r]),d=u.useCallback(c=>{var p;const g=(p=c.target.files)==null?void 0:p[0];g&&n(g)},[n]),a=u.useCallback(c=>{c.preventDefault(),o(!1);const g=c.dataTransfer.files[0];g&&n(g)},[n]),l=u.useCallback(c=>{c.preventDefault(),o(!0)},[]),h=u.useCallback(c=>{c.preventDefault(),o(!1)},[]);return e.jsxs("div",{style:{background:"#FFFFFF",borderRadius:"0.75rem",padding:"2rem",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)",width:"100%"},children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#111827",margin:"0 0 1.5rem 0"},children:"📸 写真をアップロード"}),e.jsx("div",{onDrop:a,onDragOver:l,onDragLeave:h,style:{border:i?"2px dashed #3B82F6":"2px dashed #D1D5DB",borderRadius:"0.5rem",padding:"3rem 1rem",textAlign:"center",transition:"all 0.2s ease",background:i?"#F0F9FF":"#F9FAFB",cursor:s?"not-allowed":"pointer",opacity:s?.5:1},children:t.isProcessing?e.jsxs("div",{children:[e.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid #E5E7EB",borderTop:"4px solid #3B82F6",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),e.jsxs("p",{style:{color:"#6B7280",fontSize:"1rem",margin:"0 0 0.5rem 0"},children:["処理中... ",t.progress,"%"]}),e.jsx("div",{style:{width:"100%",height:"8px",background:"#E5E7EB",borderRadius:"4px",overflow:"hidden",margin:"0 auto",maxWidth:"200px"},children:e.jsx("div",{style:{width:`${t.progress}%`,height:"100%",background:"#3B82F6",transition:"width 0.3s ease"}})})]}):e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"📷"}),e.jsx("p",{style:{color:"#374151",fontSize:"1.125rem",fontWeight:"500",margin:"0 0 0.5rem 0"},children:"写真をドラッグ&ドロップ"}),e.jsx("p",{style:{color:"#6B7280",fontSize:"0.875rem",margin:"0 0 1.5rem 0"},children:"または下のボタンから選択"}),e.jsxs("label",{style:{display:"inline-block",background:"#3B82F6",color:"white",padding:"0.75rem 2rem",borderRadius:"0.5rem",fontWeight:"500",cursor:s?"not-allowed":"pointer",transition:"background-color 0.2s ease"},children:["ファイルを選択",e.jsx("input",{type:"file",accept:"image/*",onChange:d,disabled:s,style:{display:"none"}})]})]})}),e.jsx("div",{style:{marginTop:"1rem",padding:"1rem",background:"#F0F9FF",borderRadius:"0.5rem",border:"1px solid #BFDBFE"},children:e.jsxs("p",{style:{fontSize:"0.875rem",color:"#374151",margin:"0",lineHeight:"1.5"},children:["💡 ",e.jsx("strong",{children:"対応形式:"})," JPEG, PNG, WebP, GIF",e.jsx("br",{}),"📏 ",e.jsx("strong",{children:"推奨サイズ:"})," 10MB以下、1920×1080px以下"]})}),t.error&&e.jsx("div",{style:{marginTop:"1rem",padding:"1rem",background:"#FEF2F2",borderRadius:"0.5rem",border:"1px solid #FECACA"},children:e.jsxs("p",{style:{fontSize:"0.875rem",color:"#DC2626",margin:"0",fontWeight:"500"},children:["❌ エラー: ",t.error]})}),e.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]})},pe=({imageInfo:r,colorVisionSettings:t,onProcessingStateChange:s})=>{const i=u.useRef(null),o=u.useRef(null),[n,d]=u.useState("processed"),[a,l]=u.useState(null),[h,c]=u.useState(null);u.useEffect(()=>{if(!r){l(null),c(null);return}(async()=>{try{s(!0,0);const{imageData:f}=await me(r.file);l(f),i.current&&z(i.current,f),console.log("Image loaded, waiting for color processing...")}catch(f){console.error("画像読み込みエラー:",f),s(!1,0,"画像の読み込みに失敗しました")}})()},[r]),u.useEffect(()=>{if(!a)return;const p=setTimeout(()=>{(async()=>{try{console.log("Starting color processing...",t),s(!0,0);const j=await U(a,t,b=>{console.log("Processing progress:",b),s(!0,b)});console.log("Color processing completed"),c(j),o.current&&z(o.current,j),s(!1,100)}catch(j){console.error("画像処理エラー:",j),s(!1,0,"画像処理に失敗しました")}})()},100);return()=>clearTimeout(p)},[a,t]);const g=()=>{if(!o.current||!h)return;const p=`colorwise-${(r==null?void 0:r.file.name)||"processed"}.png`;$(o.current,p)};return r?e.jsxs("div",{style:{background:"#FFFFFF",borderRadius:"0.75rem",padding:"1.5rem",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)",width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#111827",margin:"0 0 0.5rem 0"},children:"🖼️ 画像プレビュー"}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"#6B7280",margin:"0"},children:[r.file.name," (",r.width,"×",r.height,", ",H(r.size),")"]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsxs("select",{value:n,onChange:p=>d(p.target.value),style:{padding:"0.5rem",border:"1px solid #D1D5DB",borderRadius:"0.375rem",fontSize:"0.875rem"},children:[e.jsx("option",{value:"original",children:"元画像"}),e.jsx("option",{value:"processed",children:"変換済み"}),e.jsx("option",{value:"split",children:"分割表示"})]}),e.jsx("button",{onClick:g,disabled:!h,style:{background:h?"#10B981":"#D1D5DB",color:"white",padding:"0.5rem 1rem",borderRadius:"0.375rem",fontWeight:"500",border:"none",cursor:h?"pointer":"not-allowed",fontSize:"0.875rem"},children:"💾 ダウンロード"})]})]}),e.jsxs("div",{style:{borderRadius:"0.5rem",overflow:"auto",background:"#F3F4F6",position:"relative",maxHeight:"80vh"},children:[n==="split"&&e.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx("canvas",{ref:i,style:{maxWidth:"100%",height:"auto",display:"block"}}),e.jsx("div",{style:{position:"absolute",top:"0.5rem",left:"0.5rem",background:"rgba(0,0,0,0.7)",color:"white",padding:"0.25rem 0.5rem",borderRadius:"0.25rem",fontSize:"0.75rem",fontWeight:"500"},children:"元画像"})]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("canvas",{ref:o,style:{maxWidth:"100%",height:"auto",display:"block"}}),e.jsx("div",{style:{position:"absolute",top:"0.5rem",left:"0.5rem",background:"rgba(0,0,0,0.7)",color:"white",padding:"0.25rem 0.5rem",borderRadius:"0.25rem",fontSize:"0.75rem",fontWeight:"500"},children:"変換済み"})]})]}),n==="original"&&e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx("canvas",{ref:i,style:{maxWidth:"100%",height:"auto",display:"block"}})}),n==="processed"&&e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx("canvas",{ref:o,style:{maxWidth:"100%",height:"auto",display:"block"}})})]}),e.jsx("div",{style:{marginTop:"1rem",padding:"1rem",background:"#F0F9FF",borderRadius:"0.5rem",border:"1px solid #BFDBFE"},children:e.jsxs("p",{style:{fontSize:"0.875rem",color:"#374151",margin:"0",lineHeight:"1.5"},children:["🔄 ",e.jsx("strong",{children:"リアルタイム処理:"})," 左のスライダー調整が即座に反映されます",e.jsx("br",{}),"💾 ",e.jsx("strong",{children:"ダウンロード:"})," 処理結果をPNG形式で保存できます"]})})]}):e.jsxs("div",{style:{background:"#F9FAFB",borderRadius:"0.75rem",padding:"3rem",textAlign:"center",border:"2px dashed #D1D5DB"},children:[e.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"🖼️"}),e.jsx("p",{style:{color:"#6B7280",fontSize:"1.125rem",margin:"0"},children:"画像を選択してください"})]})},ge=({colorVisionSettings:r,onProcessingStateChange:t})=>{const s=u.useRef(null),i=u.useRef(null),o=u.useRef(null),[n,d]=u.useState({isActive:!1,facingMode:"environment",resolution:{width:1280,height:720}}),[a,l]=u.useState([]),[h,c]=u.useState(null),[g,p]=u.useState(!1),[f,j]=u.useState("processed");u.useEffect(()=>{(async()=>{try{const v=(await navigator.mediaDevices.enumerateDevices()).filter(F=>F.kind==="videoinput");l(v)}catch(x){console.error("デバイス取得エラー:",x)}})()},[]);const b=u.useCallback(async()=>{if(console.log("toggleCamera called, current state:",n.isActive),n.isActive&&h){console.log("Stopping camera..."),h.getTracks().forEach(m=>m.stop()),c(null),d(m=>({...m,isActive:!1}));return}if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){console.error("getUserMedia not supported"),t(!1,0,"お使いのブラウザはカメラアクセスに対応していません");return}try{console.log("Starting camera..."),t(!0,0,"");const m={video:n.deviceId?{deviceId:{exact:n.deviceId}}:{facingMode:n.facingMode}};console.log("Camera constraints:",m);const x=await navigator.mediaDevices.getUserMedia(m);console.log("Camera stream obtained:",x),c(x),d(v=>({...v,isActive:!0})),s.current&&(s.current.srcObject=x,console.log("Video element source set"),s.current.onloadedmetadata=()=>{console.log("Video metadata loaded"),t(!1,100,"")})}catch(m){console.error("カメラアクセスエラー:",m);let x="カメラにアクセスできませんでした";m instanceof Error&&(m.name==="NotAllowedError"?x="カメラアクセスが拒否されました。ブラウザの設定を確認してください":m.name==="NotFoundError"?x="カメラが見つかりませんでした":m.name==="NotReadableError"?x="カメラが他のアプリケーションで使用中です":x=`カメラエラー: ${m.message}`),t(!1,0,x)}},[n,h,t]),B=u.useCallback(async()=>{if(!s.current||!i.current||!o.current||g)return;const m=s.current,x=i.current,v=o.current;x.width=m.videoWidth,x.height=m.videoHeight,v.width=m.videoWidth,v.height=m.videoHeight;const F=x.getContext("2d");if(!F)return;F.drawImage(m,0,0);const D=F.getImageData(0,0,x.width,x.height);p(!0),t(!0,50,"画像を処理中...");try{const M=await U(D,r);z(v,M),t(!1,100,"処理完了")}catch(M){console.error("フレーム処理エラー:",M),t(!1,0,"処理中にエラーが発生しました")}finally{p(!1)}},[r,g,t]),y=u.useCallback(()=>{if(!o.current)return;const x=`colorwise-capture-${new Date().toISOString().replace(/[:.]/g,"-")}.png`;$(o.current,x)},[]);return e.jsxs("div",{style:{background:"#FFFFFF",borderRadius:"0.75rem",padding:"1.5rem",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)",width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#111827",margin:"0"},children:"📷 カメラキャプチャ"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[a.length>1&&e.jsxs("select",{value:n.deviceId||"",onChange:m=>d(x=>({...x,deviceId:m.target.value})),disabled:n.isActive,style:{padding:"0.5rem",border:"1px solid #D1D5DB",borderRadius:"0.375rem",fontSize:"0.875rem"},children:[e.jsx("option",{value:"",children:"デフォルト"}),a.map(m=>e.jsx("option",{value:m.deviceId,children:m.label||`カメラ ${m.deviceId.slice(0,8)}`},m.deviceId))]}),e.jsxs("select",{value:f,onChange:m=>j(m.target.value),style:{padding:"0.5rem",border:"1px solid #D1D5DB",borderRadius:"0.375rem",fontSize:"0.875rem"},children:[e.jsx("option",{value:"original",children:"元画像"}),e.jsx("option",{value:"processed",children:"変換済み"}),e.jsx("option",{value:"split",children:"分割表示"})]}),e.jsx("button",{onClick:b,style:{background:n.isActive?"#DC2626":"#10B981",color:"white",padding:"0.5rem 1rem",borderRadius:"0.375rem",fontWeight:"500",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:n.isActive?"⏹️ 停止":"📹 カメラを起動"}),n.isActive&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:B,disabled:g,style:{background:g?"#9CA3AF":"#059669",color:"white",padding:"0.5rem 1rem",borderRadius:"0.375rem",fontWeight:"500",border:"none",cursor:g?"not-allowed":"pointer",fontSize:"0.875rem"},children:g?"🔄 処理中...":"📸 撮影"}),e.jsx("button",{onClick:y,disabled:!o.current,style:{background:"#3B82F6",color:"white",padding:"0.5rem 1rem",borderRadius:"0.375rem",fontWeight:"500",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:"💾 保存"})]})]})]}),e.jsx("div",{style:{borderRadius:"0.5rem",overflow:"auto",background:"#F3F4F6",position:"relative",minHeight:"400px",maxHeight:"80vh"},children:n.isActive?e.jsxs(e.Fragment,{children:[e.jsx("video",{ref:s,autoPlay:!0,playsInline:!0,muted:!0,style:{display:"none"}}),f==="split"&&e.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx("canvas",{ref:i,style:{maxWidth:"100%",height:"auto",display:"block"}}),e.jsx("div",{style:{position:"absolute",top:"0.5rem",left:"0.5rem",background:"rgba(0,0,0,0.7)",color:"white",padding:"0.25rem 0.5rem",borderRadius:"0.25rem",fontSize:"0.75rem",fontWeight:"500"},children:"オリジナル"})]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("canvas",{ref:o,style:{maxWidth:"100%",height:"auto",display:"block"}}),e.jsx("div",{style:{position:"absolute",top:"0.5rem",left:"0.5rem",background:"rgba(0,0,0,0.7)",color:"white",padding:"0.25rem 0.5rem",borderRadius:"0.25rem",fontSize:"0.75rem",fontWeight:"500"},children:"処理後"}),g&&e.jsx("div",{style:{position:"absolute",top:"0.5rem",right:"0.5rem",background:"rgba(0,0,0,0.7)",color:"white",padding:"0.25rem 0.5rem",borderRadius:"0.25rem",fontSize:"0.75rem"},children:"処理中..."})]})]}),f==="original"&&e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx("canvas",{ref:i,style:{maxWidth:"100%",height:"auto",display:"block"}})}),f==="processed"&&e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx("canvas",{ref:o,style:{maxWidth:"100%",height:"auto",display:"block"}})})]}):e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"300px",flexDirection:"column",gap:"1rem"},children:[e.jsx("div",{style:{fontSize:"3rem"},children:"📹"}),e.jsx("p",{style:{color:"#6B7280",fontSize:"1.125rem",margin:"0"},children:"カメラを起動してください"})]})}),e.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"#F0F9FF",borderRadius:"0.5rem",border:"1px solid #BFDBFE"},children:[e.jsxs("p",{style:{fontSize:"0.875rem",color:"#374151",margin:"0 0 0.5rem 0",lineHeight:"1.5"},children:["📸 ",e.jsx("strong",{children:"撮影:"})," 「撮影」ボタンで静止画をキャプチャし、色覚変換を適用",e.jsx("br",{}),"💾 ",e.jsx("strong",{children:"保存:"})," 処理後の画像をPNG形式でダウンロードできます"]}),e.jsxs("p",{style:{fontSize:"0.75rem",color:"#6B7280",margin:"0",lineHeight:"1.4",fontStyle:"italic"},children:["⚠️ ",e.jsx("strong",{children:"カメラアクセスのヒント:"}),e.jsx("br",{}),"• ブラウザでカメラ許可が必要です",e.jsx("br",{}),"• 他のアプリでカメラを使用中でないか確認してください",e.jsx("br",{}),"• HTTPSでない場合、一部ブラウザで制限される場合があります"]})]})]})},xe=({isOpen:r,onClose:t,activeSection:s})=>{if(!r)return null;const i=()=>{switch(s){case"about":return e.jsxs("div",{children:[e.jsx("h2",{style:{color:"#111827",marginBottom:"1rem"},children:"このアプリについて"}),e.jsxs("div",{style:{lineHeight:"1.6",color:"#374151"},children:[e.jsxs("p",{children:[e.jsx("strong",{children:"ColorWise（カラーワイズ）"}),"は、色覚の多様性に配慮した色表示支援ツールです。"]}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"🎯 目的"}),e.jsxs("ul",{style:{paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"色覚の違いによる見え方の体験・理解促進"}),e.jsx("li",{children:"デジタルコンテンツの色調整支援"}),e.jsx("li",{children:"より包括的なデザイン環境の実現"})]}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"⚠️ 重要な注意"}),e.jsxs("ul",{style:{paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"本アプリは医療機器ではありません"}),e.jsx("li",{children:"色覚異常の診断・治療を目的としていません"}),e.jsx("li",{children:"医師の診断に代わるものではありません"})]}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"🔒 プライバシー"}),e.jsxs("ul",{style:{paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"すべての処理は端末内で完結"}),e.jsx("li",{children:"画像データの外部送信なし"}),e.jsx("li",{children:"個人情報の収集なし"})]})]})]});case"credits":return e.jsxs("div",{children:[e.jsx("h2",{style:{color:"#111827",marginBottom:"1rem"},children:"クレジット・謝辞"}),e.jsxs("div",{style:{lineHeight:"1.6",color:"#374151"},children:[e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"🎓 学術的基盤"}),e.jsx("p",{children:"本アプリの色覚シミュレーション機能は、以下の研究成果を参考に実装されています："}),e.jsxs("div",{style:{background:"#F9FAFB",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #E5E7EB",marginTop:"0.5rem"},children:[e.jsx("p",{style:{fontWeight:"bold",margin:"0 0 0.5rem 0"},children:"Machado, G.M., Oliveira, M.M., and Fernandes, L.A.F. (2009)"}),e.jsx("p",{style:{fontStyle:"italic",margin:"0 0 0.5rem 0"},children:'"A Physiologically-based Model for Simulation of Color Vision Deficiency"'}),e.jsx("p",{style:{fontSize:"0.875rem",margin:"0"},children:"IEEE Transactions on Visualization and Computer Graphics, Vol.15, No.6, pp.1291-1298"})]}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"🛠️ 技術スタック"}),e.jsxs("ul",{style:{paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"React 18 + TypeScript"}),e.jsx("li",{children:"Vite (ビルドツール)"}),e.jsx("li",{children:"PWA (Service Worker + Manifest)"}),e.jsx("li",{children:"Canvas API (画像処理)"})]}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"🙏 謝辞"}),e.jsx("p",{children:"色覚の多様性に関する理解促進と、より包括的な技術環境の構築に貢献してくださる 研究者・開発者・コミュニティの皆様に深く感謝いたします。"}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"☕ 開発を支援"}),e.jsx("p",{style:{marginBottom:"1rem"},children:"このアプリが役に立ちましたら、開発継続のためのご支援をいただけると大変嬉しいです（完全任意です）。"}),e.jsx("div",{style:{textAlign:"center"},children:e.jsx("a",{href:"https://github.com/sponsors",target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",background:"#EA4AAA",color:"white",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",textDecoration:"none",fontWeight:"500",transition:"background 0.2s"},children:"💝 GitHub Sponsors で支援"})}),e.jsx("p",{style:{fontSize:"0.75rem",color:"#6B7280",textAlign:"center",margin:"0.5rem 0 0 0"},children:"※ 機能制限はありません。すべて任意のサポートです。"})]})]});case"privacy":return e.jsxs("div",{children:[e.jsx("h2",{style:{color:"#111827",marginBottom:"1rem"},children:"プライバシーポリシー"}),e.jsxs("div",{style:{lineHeight:"1.6",color:"#374151"},children:[e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"🔒 データ収集について"}),e.jsx("p",{children:e.jsx("strong",{children:"本アプリは以下のデータを一切収集しません："})}),e.jsxs("ul",{style:{paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"個人識別情報"}),e.jsx("li",{children:"画像・写真データ"}),e.jsx("li",{children:"位置情報"}),e.jsx("li",{children:"閲覧履歴"})]}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"💾 ローカルデータ"}),e.jsxs("ul",{style:{paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"設定情報のみをブラウザ内に保存"}),e.jsx("li",{children:"外部サーバーへの送信なし"}),e.jsx("li",{children:"ブラウザ設定から削除可能"})]}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"📷 カメラ機能"}),e.jsxs("ul",{style:{paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"すべての処理が端末内で完結"}),e.jsx("li",{children:"撮影データの外部送信なし"}),e.jsx("li",{children:"アプリ終了時に自動削除"})]}),e.jsxs("p",{style:{background:"#EFF6FF",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #DBEAFE",marginTop:"1rem"},children:["詳細は ",e.jsx("a",{href:"/PRIVACY.md",target:"_blank",rel:"noopener noreferrer",style:{color:"#3B82F6"},children:"完全版プライバシーポリシー"})," をご確認ください。"]})]})]});case"disclaimer":return e.jsxs("div",{children:[e.jsx("h2",{style:{color:"#111827",marginBottom:"1rem"},children:"免責事項"}),e.jsxs("div",{style:{lineHeight:"1.6",color:"#374151"},children:[e.jsx("div",{style:{background:"#FEF3C7",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #FCD34D",marginBottom:"1rem"},children:e.jsx("p",{style:{margin:0,fontWeight:"bold"},children:"⚠️ 重要：本アプリケーションは医療機器ではありません"})}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"❌ 本アプリは以下ではありません"}),e.jsxs("ul",{style:{paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"色覚異常の診断ツール"}),e.jsx("li",{children:"治療を目的とした製品"}),e.jsx("li",{children:"医師による診断・治療の代替手段"})]}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"✅ 本アプリの目的"}),e.jsxs("ul",{style:{paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"色覚の違いによる見え方の体験・理解促進"}),e.jsx("li",{children:"デジタルコンテンツの色調整支援"}),e.jsx("li",{children:"アクセシビリティ向上のための支援"})]}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"🏥 医療相談の推奨"}),e.jsx("p",{children:"色覚に関する疑問や不安がある場合は、必ず専門の眼科医師にご相談ください。"}),e.jsxs("p",{style:{background:"#FEF2F2",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #FECACA",marginTop:"1rem"},children:["詳細は ",e.jsx("a",{href:"/DISCLAIMER.md",target:"_blank",rel:"noopener noreferrer",style:{color:"#3B82F6"},children:"完全版免責事項"})," をご確認ください。"]})]})]});default:return null}};return e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",padding:"2rem",maxWidth:"600px",maxHeight:"80vh",overflow:"auto",position:"relative",boxShadow:"0 20px 25px -5px rgb(0 0 0 / 0.1), 0 10px 10px -5px rgb(0 0 0 / 0.04)"},children:[e.jsx("button",{onClick:t,style:{position:"absolute",top:"1rem",right:"1rem",background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#6B7280",width:"2rem",height:"2rem",display:"flex",alignItems:"center",justifyContent:"center"},children:"×"}),i()]})})};function fe(){const[r,t]=u.useState({simulation:{useSimulation:!1,simulationType:"deuteranopia",severity:1,showSimulationInfo:!1},correction:{useCorrection:!1,correctionType:"deuteranopia",strength:.2}}),[s,i]=u.useState("rgb"),[o,n]=u.useState(!1),[d,a]=u.useState("about"),[l,h]=u.useState(null),[c,g]=u.useState({isProcessing:!1,progress:0,error:null}),[p,f]=u.useState(window.innerWidth),j=u.useCallback((y,m,x)=>{g({isProcessing:y,progress:m,error:x||null})},[]);u.useEffect(()=>{const y=()=>{f(window.innerWidth)};return window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[]),u.useEffect(()=>{const y=localStorage.getItem("colorwise-color-vision-settings");if(y)try{const m=JSON.parse(y);t(m)}catch(m){console.error("色覚設定の読み込みに失敗しました:",m)}},[]),u.useEffect(()=>{localStorage.setItem("colorwise-color-vision-settings",JSON.stringify(r))},[r]);const b=y=>{a(y),n(!0)},B=()=>{n(!1)};return e.jsxs("div",{className:"app",children:[e.jsx("header",{className:"app-header",children:e.jsxs("div",{className:"container",children:[e.jsxs("h1",{className:"app-title",children:[e.jsx("span",{className:"app-logo",children:"🎨"}),"ColorWise"]}),e.jsx("p",{className:"app-subtitle",children:"ColorWise - 色覚支援ツール"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1.5rem",justifyContent:"center",flexWrap:"wrap"},children:[e.jsx("button",{onClick:()=>i("rgb"),style:{background:s==="rgb"?"#3B82F6":"#F3F4F6",color:s==="rgb"?"white":"#374151",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",fontWeight:"500",border:"none",cursor:"pointer",fontSize:"0.875rem",transition:"all 0.2s ease"},children:"🎨 色のプレビュー"}),e.jsx("button",{onClick:()=>i("image"),style:{background:s==="image"?"#3B82F6":"#F3F4F6",color:s==="image"?"white":"#374151",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",fontWeight:"500",border:"none",cursor:"pointer",fontSize:"0.875rem",transition:"all 0.2s ease"},children:"📸 写真"}),e.jsx("button",{onClick:()=>i("camera"),style:{background:s==="camera"?"#3B82F6":"#F3F4F6",color:s==="camera"?"white":"#374151",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",fontWeight:"500",border:"none",cursor:"pointer",fontSize:"0.875rem",transition:"all 0.2s ease"},children:"📷 カメラ"})]})]})}),e.jsx("main",{className:"app-main",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:s==="rgb"?"app-content":"",children:[s==="rgb"&&e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"visualization-section",children:[e.jsx("div",{className:"visualization-wrapper",children:e.jsx(ce,{colorVisionSettings:r})}),e.jsxs("div",{className:"section-description",children:[e.jsx("p",{children:"赤・緑・青の3原色の円が重なる様子で、色覚シミュレーションや補正の効果をリアルタイムでプレビューできます。 設定パネルで調整してください。"}),r.simulation.useSimulation&&e.jsxs("p",{children:[e.jsx("strong",{children:"シミュレーションモード:"})," 有効"]}),r.correction.useCorrection&&e.jsxs("p",{children:[e.jsx("strong",{children:"補正フィルター:"})," 色覚補正が適用されています"]})]})]}),e.jsx("section",{className:"adjustment-section",children:e.jsx(T,{colorVisionSettings:r,onColorVisionSettingsChange:t})})]}),s==="image"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:p>768?"350px 1fr":"1fr",gap:"2rem",alignItems:"start"},children:[e.jsxs("div",{style:{position:p>1400?"sticky":"static",top:"1rem"},children:[e.jsx("h2",{className:"section-title",style:{color:"#9CA3AF",marginBottom:"1rem"},children:"Settings"}),e.jsx(T,{colorVisionSettings:r,onColorVisionSettingsChange:t}),e.jsx("div",{style:{marginTop:"2rem"},children:e.jsx(he,{onImageLoad:h,processingState:c,disabled:c.isProcessing})})]}),e.jsx("div",{style:{width:"100%"},children:e.jsx(pe,{imageInfo:l,colorVisionSettings:r,onProcessingStateChange:j})})]}),s==="camera"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:p>768?"350px 1fr":"1fr",gap:"2rem",alignItems:"start"},children:[e.jsxs("div",{style:{position:p>1400?"sticky":"static",top:"1rem"},children:[e.jsx("h2",{className:"section-title",style:{color:"#9CA3AF",marginBottom:"1rem"},children:"Settings"}),e.jsx(T,{colorVisionSettings:r,onColorVisionSettingsChange:t})]}),e.jsx("div",{style:{width:"100%"},children:e.jsx(ge,{colorVisionSettings:r,onProcessingStateChange:j})})]})]})})}),e.jsx("footer",{className:"app-footer",children:e.jsxs("div",{className:"container",children:[e.jsx("p",{className:"footer-text",children:"© 2025 ColorWise - 色覚支援ツール"}),e.jsxs("p",{className:"footer-links",children:[e.jsx("button",{onClick:()=>b("about"),className:"footer-link",style:{background:"none",border:"none",color:"inherit",textDecoration:"underline",cursor:"pointer"},children:"このアプリについて"}),e.jsx("span",{className:"footer-separator",children:"|"}),e.jsx("button",{onClick:()=>b("credits"),className:"footer-link",style:{background:"none",border:"none",color:"inherit",textDecoration:"underline",cursor:"pointer"},children:"クレジット"}),e.jsx("span",{className:"footer-separator",children:"|"}),e.jsx("button",{onClick:()=>b("privacy"),className:"footer-link",style:{background:"none",border:"none",color:"inherit",textDecoration:"underline",cursor:"pointer"},children:"プライバシーポリシー"}),e.jsx("span",{className:"footer-separator",children:"|"}),e.jsx("button",{onClick:()=>b("disclaimer"),className:"footer-link",style:{background:"none",border:"none",color:"inherit",textDecoration:"underline",cursor:"pointer"},children:"免責事項"})]})]})}),e.jsx(xe,{isOpen:o,onClose:B,activeSection:d})]})}S.createRoot(document.getElementById("root")).render(e.jsx(Y.StrictMode,{children:e.jsx(fe,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(r=>{console.log("SW registered: ",r)}).catch(r=>{console.log("SW registration failed: ",r)})});
//# sourceMappingURL=index-qa_g0dYO.js.map
