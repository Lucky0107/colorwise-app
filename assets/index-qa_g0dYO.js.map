{"version":3,"file":"index-qa_g0dYO.js","sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/react-dom/client.js","../../src/utils/deutan-simulator.ts","../../src/components/ColorCircles.tsx","../../src/utils/color-converter.ts","../../src/components/ColorAdjuster.tsx","../../src/utils/image-processor.ts","../../src/components/ImageUploader.tsx","../../src/components/ImageViewer.tsx","../../src/components/CameraCapture.tsx","../../src/components/AboutModal.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","// deutan_poly_full.ts\n// Machado 2009 Deuteranomaly matrices (full 0.0..1.0 step 0.1) → polynomialized (degree=4).\n// Provides: simulateDeutanPoly(), daltonizeDeutan().\n// Source for matrices: UFRGS page, Table 1 (Deuteranomaly column).\n\n// ---------- sRGB <-> linear ----------\nfunction srgbToLinear(c: number): number {\n  return (c <= 0.04045) ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);\n}\nfunction linearToSrgb(c: number): number {\n  return (c <= 0.0031308) ? 12.92 * c : 1.055 * Math.pow(c, 1/2.4) - 0.055;\n}\n\n// ---------- Linear algebra helpers ----------\ntype Vec3 = [number, number, number];\ntype Mat3 = [Vec3, Vec3, Vec3];\n\nfunction applyMat3(m: Mat3, v: Vec3): Vec3 {\n  const [x,y,z] = v;\n  return [\n    m[0][0]*x + m[0][1]*y + m[0][2]*z,\n    m[1][0]*x + m[1][1]*y + m[1][2]*z,\n    m[2][0]*x + m[2][1]*y + m[2][2]*z,\n  ];\n}\n\nfunction clamp01(x: number): number {\n  return Math.max(0, Math.min(1, x));\n}\n\nfunction clamp255(x: number): number {\n  return Math.max(0, Math.min(255, Math.round(x)));\n}\n\n// ---------- Polynomial fit (least squares) ----------\n// Fit y ≈ Σ_{k=0..d} c_k x^k\nfunction polyfitLeastSquares(xs: number[], ys: number[], degree: number): number[] {\n  if (xs.length !== ys.length) throw new Error(\"xs and ys must have the same length\");\n  const n = xs.length;\n  const d = degree;\n  if (n < d + 1) throw new Error(`Need at least degree+1 points (got ${n}, degree ${d})`);\n\n  // Build Vandermonde matrix A and vector b\n  const A: number[][] = Array.from({length: n}, () => Array(d+1).fill(0));\n  const b: number[] = ys.slice();\n\n  for (let i = 0; i < n; i++) {\n    let val = 1;\n    for (let j = 0; j <= d; j++) {\n      A[i][j] = val;\n      val *= xs[i];\n    }\n  }\n\n  // Solve normal equations (A^T A) c = A^T b via Gaussian elimination\n  const AT = transpose(A);\n  const ATA = matMul(AT, A);\n  const ATb = matVecMul(AT, b);\n\n  // Solve ATA * c = ATb\n  const c = gaussianSolve(ATA, ATb);\n  return c;\n}\n\nfunction transpose(M: number[][]): number[][] {\n  const rows = M.length, cols = M[0].length;\n  const T = Array.from({length: cols}, () => Array(rows).fill(0));\n  for (let i = 0; i < rows; i++) for (let j = 0; j < cols; j++) T[j][i] = M[i][j];\n  return T;\n}\n\nfunction matMul(A: number[][], B: number[][]): number[][] {\n  const r = A.length, k = A[0].length, c = B[0].length;\n  const out = Array.from({length: r}, () => Array(c).fill(0));\n  for (let i = 0; i < r; i++) {\n    for (let j = 0; j < c; j++) {\n      let sum = 0;\n      for (let t = 0; t < k; t++) sum += A[i][t] * B[t][j];\n      out[i][j] = sum;\n    }\n  }\n  return out;\n}\n\nfunction matVecMul(A: number[][], v: number[]): number[] {\n  const r = A.length, c = A[0].length;\n  const out = Array(r).fill(0);\n  for (let i = 0; i < r; i++) {\n    let sum = 0;\n    for (let j = 0; j < c; j++) sum += A[i][j] * v[j];\n    out[i] = sum;\n  }\n  return out;\n}\n\nfunction gaussianSolve(Ain: number[][], bIn: number[]): number[] {\n  // Augment\n  const n = Ain.length;\n  const A = Ain.map((row, i) => row.concat([bIn[i]]));\n\n  // Forward elimination\n  for (let i = 0; i < n; i++) {\n    // Pivot\n    let maxRow = i;\n    for (let r = i+1; r < n; r++) if (Math.abs(A[r][i]) > Math.abs(A[maxRow][i])) maxRow = r;\n    [A[i], A[maxRow]] = [A[maxRow], A[i]];\n\n    const pivot = A[i][i];\n    if (Math.abs(pivot) < 1e-12) throw new Error(\"Singular matrix in gaussianSolve\");\n\n    // Normalize row\n    for (let j = i; j <= n; j++) A[i][j] /= pivot;\n\n    // Eliminate\n    for (let r = 0; r < n; r++) {\n      if (r === i) continue;\n      const factor = A[r][i];\n      for (let j = i; j <= n; j++) A[r][j] -= factor * A[i][j];\n    }\n  }\n\n  // Extract solution\n  const x = A.map(row => row[n]);\n  return x;\n}\n\n// ---------- Deuteranomaly matrices from Machado2009 Table 1 ----------\ntype SamplePoint = { s: number, M: Mat3 };\n\nconst MACHADO_DEUTERANOMALY: SamplePoint[] = [\n  { s: 0.0, M: [\n    [1.000000, 0.000000, -0.000000],\n    [0.000000, 1.000000,  0.000000],\n    [-0.000000,-0.000000, 1.000000],\n  ]},\n  { s: 0.1, M: [\n    [0.866435, 0.177704, -0.044139],\n    [0.049567, 0.939063,  0.011370],\n    [-0.003453, 0.007233, 0.996220],\n  ]},\n  { s: 0.2, M: [\n    [0.760729, 0.319078, -0.079807],\n    [0.090568, 0.889315,  0.020117],\n    [-0.006027, 0.013325, 0.992702],\n  ]},\n  { s: 0.3, M: [\n    [0.675425, 0.433850, -0.109275],\n    [0.125303, 0.847755,  0.026942],\n    [-0.007950, 0.018572, 0.989378],\n  ]},\n  { s: 0.4, M: [\n    [0.605511, 0.528560, -0.134071],\n    [0.155318, 0.812366,  0.032316],\n    [-0.009376, 0.023176, 0.986200],\n  ]},\n  { s: 0.5, M: [\n    [0.547494, 0.607765, -0.155259],\n    [0.181692, 0.781742,  0.036566],\n    [-0.010410, 0.027275, 0.983136],\n  ]},\n  { s: 0.6, M: [\n    [0.498864, 0.674741, -0.173604],\n    [0.205199, 0.754872,  0.039929],\n    [-0.011131, 0.030969, 0.980162],\n  ]},\n  { s: 0.7, M: [\n    [0.457771, 0.731899, -0.189670],\n    [0.226409, 0.731012,  0.042579],\n    [-0.011595, 0.034333, 0.977261],\n  ]},\n  { s: 0.8, M: [\n    [0.422823, 0.781057, -0.203881],\n    [0.245752, 0.709602,  0.044646],\n    [-0.011843, 0.037423, 0.974421],\n  ]},\n  { s: 0.9, M: [\n    [0.392952, 0.823610, -0.216562],\n    [0.263559, 0.690210,  0.046232],\n    [-0.011910, 0.040281, 0.971630],\n  ]},\n  { s: 1.0, M: [\n    [0.367322, 0.860646, -0.227968],\n    [0.280085, 0.672501,  0.047413],\n    [-0.011820, 0.042940, 0.968881],\n  ]},\n];\n\n// ---------- Build polynomial coefficients per element ----------\ntype CoeffMat = number[][][]; // 3x3 of coefficient arrays [c0..cd]\nfunction buildPolynomialCoeffs(data: SamplePoint[], degree: number): CoeffMat {\n  if (degree < 1) throw new Error(\"degree must be >= 1\");\n  const xs = data.map(p => p.s);\n  const coeffs: CoeffMat = [[],[],[]] as unknown as CoeffMat;\n\n  for (let i = 0; i < 3; i++) {\n    coeffs[i] = [];\n    for (let j = 0; j < 3; j++) {\n      const ys = data.map(p => p.M[i][j]);\n      const c = polyfitLeastSquares(xs, ys, degree);\n      coeffs[i][j] = c; // length degree+1\n    }\n  }\n  return coeffs;\n}\n\nfunction evalPoly(c: number[], x: number): number {\n  // Horner\n  let acc = 0;\n  for (let k = c.length - 1; k >= 0; k--) acc = acc * x + c[k];\n  return acc;\n}\n\nfunction evaluateMatrix(coeffs: CoeffMat, s: number): Mat3 {\n  const ss = clamp01(s);\n  const M: Mat3 = [[0,0,0],[0,0,0],[0,0,0]] as Mat3;\n  for (let i = 0; i < 3; i++) {\n    for (let j = 0; j < 3; j++) {\n      M[i][j] = evalPoly(coeffs[i][j], ss);\n    }\n  }\n  return M;\n}\n\n// Precompute coefficients\nconst DEGREE = 4;\nconst COEFFS: CoeffMat = buildPolynomialCoeffs(MACHADO_DEUTERANOMALY, DEGREE);\n\n// ---------- Public API ----------\nexport type RGB8 = [number, number, number];\n\n/** Simulate Deuteranomaly using polynomialized Machado matrix. */\nexport function simulateDeutanPoly(rgb: RGB8, severity: number): RGB8 {\n  const lin: Vec3 = [\n    srgbToLinear(rgb[0]/255),\n    srgbToLinear(rgb[1]/255),\n    srgbToLinear(rgb[2]/255),\n  ];\n  const M = evaluateMatrix(COEFFS, severity);\n  const [R,G,B] = applyMat3(M, lin);\n  return [\n    clamp255(linearToSrgb(clamp01(R))*255),\n    clamp255(linearToSrgb(clamp01(G))*255),\n    clamp255(linearToSrgb(clamp01(B))*255),\n  ];\n}\n\n/**\n * Daltonize for Deuteranomaly via iterative pre-compensation.\n * Finds X such that S(X) ≈ Y (Y=original). Performs T steps:\n *   X_{k+1} = clip( X_k + alpha * ( Y - S(X_k) ) )\n * All operations in linear RGB; final result returned in sRGB 8-bit.\n */\nexport function daltonizeDeutan(rgb: RGB8, severity: number, alpha=0.6, steps=3): RGB8 {\n  // to linear\n  let X: Vec3 = [\n    srgbToLinear(rgb[0]/255),\n    srgbToLinear(rgb[1]/255),\n    srgbToLinear(rgb[2]/255),\n  ];\n  const Y: Vec3 = [...X];\n  const M = evaluateMatrix(COEFFS, severity);\n\n  const simulateLin = (v: Vec3): Vec3 => applyMat3(M, v);\n\n  for (let t = 0; t < steps; t++) {\n    const Sx = simulateLin(X);\n    // residual towards target Y\n    const err: Vec3 = [Y[0]-Sx[0], Y[1]-Sx[1], Y[2]-Sx[2]];\n    X = [\n      clamp01(X[0] + alpha * err[0]),\n      clamp01(X[1] + alpha * err[1]),\n      clamp01(X[2] + alpha * err[2]),\n    ];\n  }\n\n  return [\n    clamp255(linearToSrgb(X[0])*255),\n    clamp255(linearToSrgb(X[1])*255),\n    clamp255(linearToSrgb(X[2])*255),\n  ];\n}\n\n/**\n * Green enhancement \"inverse-ish\" filter in linear space.\n * This is not a true inverse; it boosts green while attenuating red/blue.\n * @param rgb 8-bit sRGB triple [0..255]\n * @param strength α in [0,1], typical 0.1~0.3\n */\nexport function enhanceGreen(rgb: RGB8, strength: number = 0.2): RGB8 {\n  const s = Math.max(0, Math.min(1, strength));\n  const E: Mat3 = [\n    [1 - s, 0,     0    ],\n    [0,     1 + s, 0    ],\n    [0,     0,     1 - s],\n  ];\n  const [r,g,b] = rgb.map(v => srgbToLinear(v/255)) as Vec3;\n  const [R,G,B] = applyMat3(E, [r,g,b]);\n  return [\n    clamp255(linearToSrgb(R)*255),\n    clamp255(linearToSrgb(G)*255),\n    clamp255(linearToSrgb(B)*255),\n  ];\n}\n\n/**\n * デュータン補正フィルター（Daltonization使用）\n * Machado 2009モデルによる科学的補正\n * @param rgb 8-bit sRGB triple [0..255]\n * @param strength 補正強度 α in [0,1], typical 0.1~0.3\n * @returns 補正されたRGB値\n */\nexport function correctForDeutan(rgb: RGB8, strength: number = 0.2): RGB8 {\n  return daltonizeDeutan(rgb, strength, 0.6, 3);\n}\n\n/**\n * RGB値配列に対するバッチ処理版\n * @param rgbArray RGB値の配列\n * @param severity デュータンシミュレーション強度\n * @returns シミュレーション結果の配列\n */\nexport function simulateDeutanBatch(rgbArray: RGB8[], severity: number): RGB8[] {\n  return rgbArray.map(rgb => simulateDeutanPoly(rgb, severity));\n}\n\n/**\n * Canvas ImageDataに対するデュータンシミュレーション\n * @param imageData Canvas ImageData\n * @param severity シミュレーション強度\n * @returns 変換されたImageData\n */\nexport function simulateDeutanImageData(imageData: ImageData, severity: number): ImageData {\n  const data = new Uint8ClampedArray(imageData.data);\n  \n  for (let i = 0; i < data.length; i += 4) {\n    const [r, g, b] = simulateDeutanPoly([data[i], data[i + 1], data[i + 2]], severity);\n    data[i] = r;\n    data[i + 1] = g;\n    data[i + 2] = b;\n    // alpha channel (data[i + 3]) is preserved\n  }\n  \n  return new ImageData(data, imageData.width, imageData.height);\n}\n","import React, { useRef, useEffect } from 'react';\nimport type { ColorVisionSettings } from '../types/color';\nimport { simulateDeutanPoly, correctForDeutan, type RGB8 } from '../utils/deutan-simulator';\n\ninterface ColorCirclesProps {\n  colorVisionSettings: ColorVisionSettings;\n  width?: number;\n  height?: number;\n}\n\n/**\n * RGB円を重ねて表示するコンポーネント\n * 各円の透明度は調整値に応じて変化し、色覚シミュレーション・補正を適用\n */\nexport const ColorCircles: React.FC<ColorCirclesProps> = ({\n  colorVisionSettings,\n  width = 400,\n  height = 400,\n}) => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  \n  // RGB調整値（固定値）\n  const adjustment = { red: 100, green: 100, blue: 100 };\n\n  // 色変換を適用する関数\n  const applyColorTransform = (rgb: RGB8): RGB8 => {\n    let transformedRgb = rgb;\n    \n    // シミュレーションを適用\n    if (colorVisionSettings.simulation.useSimulation && \n        colorVisionSettings.simulation.simulationType === 'deuteranopia') {\n      transformedRgb = simulateDeutanPoly(\n        transformedRgb, \n        colorVisionSettings.simulation.severity\n      );\n    }\n    \n    // 補正を適用\n    if (colorVisionSettings.correction.useCorrection && \n        colorVisionSettings.correction.correctionType === 'deuteranopia') {\n      transformedRgb = correctForDeutan(\n        transformedRgb, \n        colorVisionSettings.correction.strength\n      );\n    }\n    \n    return transformedRgb;\n  };\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n\n    // Canvas をクリア\n    ctx.clearRect(0, 0, width, height);\n\n    // アンチエイリアシングを有効化\n    ctx.imageSmoothingEnabled = true;\n\n    const centerX = width / 2;\n    const centerY = height / 2;\n    const radius = Math.min(width, height) / 3;\n\n    // 基準色から変換された色を計算\n    const baseRed: RGB8 = [255, 0, 0];\n    const baseGreen: RGB8 = [0, 255, 0];\n    const baseBlue: RGB8 = [0, 0, 255];\n    \n    const transformedRed = applyColorTransform(baseRed);\n    const transformedGreen = applyColorTransform(baseGreen);\n    const transformedBlue = applyColorTransform(baseBlue);\n\n    // 円の配置（正三角形の頂点、より近く配置）\n    const circles = [\n      {\n        color: 'red' as const,\n        x: centerX,\n        y: centerY - radius * 0.3,\n        intensity: adjustment.red,\n        transformedColor: transformedRed,\n      },\n      {\n        color: 'green' as const,\n        x: centerX - radius * 0.4,\n        y: centerY + radius * 0.2,\n        intensity: adjustment.green,\n        transformedColor: transformedGreen,\n      },\n      {\n        color: 'blue' as const,\n        x: centerX + radius * 0.4,\n        y: centerY + radius * 0.2,\n        intensity: adjustment.blue,\n        transformedColor: transformedBlue,\n      },\n    ];\n\n    // グローバルコンポジットオペレーションを設定（色の混合）\n    ctx.globalCompositeOperation = 'screen';\n\n    // 各円を描画\n    circles.forEach(circle => {\n      ctx.save();\n      \n      // 調整値に基づく透明度を適用\n      ctx.globalAlpha = circle.intensity / 100;\n\n      // グラデーションを作成\n      const gradient = ctx.createRadialGradient(\n        circle.x,\n        circle.y,\n        0,\n        circle.x,\n        circle.y,\n        radius\n      );\n\n      // 変換された色を使用してグラデーションを設定\n      const [r, g, b] = circle.transformedColor;\n      \n      gradient.addColorStop(0, `rgba(${r}, ${g}, ${b}, 1)`);\n      gradient.addColorStop(1, `rgba(${r}, ${g}, ${b}, 0)`);\n\n      // 円を描画\n      ctx.beginPath();\n      ctx.arc(circle.x, circle.y, radius, 0, Math.PI * 2);\n      ctx.fillStyle = gradient;\n      ctx.fill();\n      ctx.restore();\n    });\n\n    // 背景に白を追加（混合結果を見やすくするため）\n    ctx.globalCompositeOperation = 'destination-over';\n    ctx.fillStyle = '#FFFFFF';\n    ctx.fillRect(0, 0, width, height);\n\n  }, [colorVisionSettings, width, height]);\n\n  return (\n    <div style={{\n      position: 'relative',\n      display: 'inline-block',\n      borderRadius: '0.75rem',\n      overflow: 'hidden',\n      boxShadow: '0 10px 15px -3px rgb(0 0 0 / 0.1)',\n      background: '#FFFFFF',\n      padding: '1.5rem'\n    }}>\n      <canvas\n        ref={canvasRef}\n        width={width}\n        height={height}\n        style={{\n          display: 'block',\n          borderRadius: '0.5rem',\n          maxWidth: '100%',\n          height: 'auto'\n        }}\n        aria-label=\"RGB色調整の視覚化\"\n      />\n      {colorVisionSettings.simulation.showSimulationInfo && (\n        <div style={{\n          marginTop: '0.5rem',\n          padding: '0.5rem',\n          background: '#f0f9ff',\n          borderRadius: '0.25rem',\n          textAlign: 'center',\n          border: '1px solid #bfdbfe'\n        }}>\n          <span style={{\n            fontSize: '0.75rem',\n            color: '#374151',\n            fontWeight: '500'\n          }}>\n            {colorVisionSettings.simulation.useSimulation && (\n              <>\n                {colorVisionSettings.simulation.simulationType === 'deuteranopia' && 'デュータン'}\n                {colorVisionSettings.simulation.simulationType === 'protanopia' && 'プロタン'}\n                {colorVisionSettings.simulation.simulationType === 'tritanopia' && 'トリタン'}\n                シミュレーション ({(colorVisionSettings.simulation.severity * 100).toFixed(0)}%)\n              </>\n            )}\n            {colorVisionSettings.correction.useCorrection && (\n              <>\n                {colorVisionSettings.simulation.useSimulation && ' | '}\n                補正フィルター ({(colorVisionSettings.correction.strength * 100).toFixed(0)}%)\n              </>\n            )}\n          </span>\n        </div>\n      )}\n    </div>\n  );\n};","import type { RGBColor, HSLColor } from '../types/color';\n\n/**\n * RGB値を16進数カラーコードに変換\n */\nexport function rgbToHex(rgb: RGBColor): string {\n  const toHex = (n: number): string => {\n    const hex = Math.round(n).toString(16).padStart(2, '0');\n    return hex;\n  };\n  return `#${toHex(rgb.r)}${toHex(rgb.g)}${toHex(rgb.b)}`;\n}\n\n/**\n * 16進数カラーコードをRGB値に変換\n */\nexport function hexToRgb(hex: string): RGBColor | null {\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  return result\n    ? {\n        r: parseInt(result[1], 16),\n        g: parseInt(result[2], 16),\n        b: parseInt(result[3], 16),\n      }\n    : null;\n}\n\n/**\n * RGB値をHSL色空間に変換\n */\nexport function rgbToHsl(rgb: RGBColor): HSLColor {\n  const r = rgb.r / 255;\n  const g = rgb.g / 255;\n  const b = rgb.b / 255;\n\n  const max = Math.max(r, g, b);\n  const min = Math.min(r, g, b);\n  let h = 0;\n  let s = 0;\n  const l = (max + min) / 2;\n\n  if (max !== min) {\n    const d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n\n    switch (max) {\n      case r:\n        h = ((g - b) / d + (g < b ? 6 : 0)) / 6;\n        break;\n      case g:\n        h = ((b - r) / d + 2) / 6;\n        break;\n      case b:\n        h = ((r - g) / d + 4) / 6;\n        break;\n    }\n  }\n\n  return {\n    h: Math.round(h * 360),\n    s: Math.round(s * 100),\n    l: Math.round(l * 100),\n  };\n}\n\n/**\n * HSL色空間をRGB値に変換\n */\nexport function hslToRgb(hsl: HSLColor): RGBColor {\n  const h = hsl.h / 360;\n  const s = hsl.s / 100;\n  const l = hsl.l / 100;\n\n  let r: number, g: number, b: number;\n\n  if (s === 0) {\n    r = g = b = l;\n  } else {\n    const hue2rgb = (p: number, q: number, t: number): number => {\n      if (t < 0) t += 1;\n      if (t > 1) t -= 1;\n      if (t < 1 / 6) return p + (q - p) * 6 * t;\n      if (t < 1 / 2) return q;\n      if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n      return p;\n    };\n\n    const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    const p = 2 * l - q;\n\n    r = hue2rgb(p, q, h + 1 / 3);\n    g = hue2rgb(p, q, h);\n    b = hue2rgb(p, q, h - 1 / 3);\n  }\n\n  return {\n    r: Math.round(r * 255),\n    g: Math.round(g * 255),\n    b: Math.round(b * 255),\n  };\n}\n\n/**\n * 値を指定範囲内にクランプ\n */\nexport function clamp(value: number, min: number, max: number): number {\n  return Math.min(Math.max(value, min), max);\n}\n\n/**\n * ガンマ補正を適用\n */\nexport function applyGammaCorrection(value: number, gamma = 2.2): number {\n  return Math.pow(value / 255, gamma) * 255;\n}\n\n/**\n * 逆ガンマ補正を適用\n */\nexport function applyInverseGammaCorrection(value: number, gamma = 2.2): number {\n  return Math.pow(value / 255, 1 / gamma) * 255;\n}","import React, { useCallback } from 'react';\nimport type { ColorVisionSettings, ColorVisionType } from '../types/color';\nimport { clamp } from '../utils/color-converter';\n\ninterface ColorAdjusterProps {\n  colorVisionSettings: ColorVisionSettings;\n  onColorVisionSettingsChange: (settings: ColorVisionSettings) => void;\n}\n\n/**\n * 色覚シミュレーション・補正設定コンポーネント\n */\nexport const ColorAdjuster: React.FC<ColorAdjusterProps> = ({\n  colorVisionSettings,\n  onColorVisionSettingsChange,\n}) => {\n\n  // シミュレーション設定の変更\n  const handleSimulationToggle = useCallback(() => {\n    onColorVisionSettingsChange({\n      ...colorVisionSettings,\n      simulation: {\n        ...colorVisionSettings.simulation,\n        useSimulation: !colorVisionSettings.simulation.useSimulation,\n      },\n    });\n  }, [colorVisionSettings, onColorVisionSettingsChange]);\n\n  const handleSimulationTypeChange = useCallback((type: ColorVisionType) => {\n    onColorVisionSettingsChange({\n      ...colorVisionSettings,\n      simulation: {\n        ...colorVisionSettings.simulation,\n        simulationType: type,\n      },\n    });\n  }, [colorVisionSettings, onColorVisionSettingsChange]);\n\n  const handleSimulationSeverityChange = useCallback((severity: number) => {\n    onColorVisionSettingsChange({\n      ...colorVisionSettings,\n      simulation: {\n        ...colorVisionSettings.simulation,\n        severity: clamp(severity, 0, 1),\n      },\n    });\n  }, [colorVisionSettings, onColorVisionSettingsChange]);\n\n  // 補正設定の変更\n  const handleCorrectionToggle = useCallback(() => {\n    onColorVisionSettingsChange({\n      ...colorVisionSettings,\n      correction: {\n        ...colorVisionSettings.correction,\n        useCorrection: !colorVisionSettings.correction.useCorrection,\n      },\n    });\n  }, [colorVisionSettings, onColorVisionSettingsChange]);\n\n  const handleCorrectionTypeChange = useCallback((type: ColorVisionType) => {\n    onColorVisionSettingsChange({\n      ...colorVisionSettings,\n      correction: {\n        ...colorVisionSettings.correction,\n        correctionType: type,\n      },\n    });\n  }, [colorVisionSettings, onColorVisionSettingsChange]);\n\n  const handleCorrectionStrengthChange = useCallback((strength: number) => {\n    onColorVisionSettingsChange({\n      ...colorVisionSettings,\n      correction: {\n        ...colorVisionSettings.correction,\n        strength: clamp(strength, 0, 1),\n      },\n    });\n  }, [colorVisionSettings, onColorVisionSettingsChange]);\n\n\n\n\n  return (\n    <div style={{\n      background: '#FFFFFF',\n      borderRadius: '0.75rem',\n      padding: '2rem',\n      boxShadow: '0 4px 6px -1px rgb(0 0 0 / 0.1)',\n      maxWidth: '500px',\n      width: '100%'\n    }}>\n\n      {/* 色覚シミュレーション設定 */}\n      <div style={{\n        marginBottom: '1.5rem',\n        padding: '1rem',\n        background: '#f8fafc',\n        borderRadius: '0.5rem',\n        border: '1px solid #e2e8f0'\n      }}>\n        <h3 style={{\n          fontSize: '1rem',\n          margin: '0 0 1rem 0',\n          color: '#374151'\n        }}>色覚シミュレーション</h3>\n        \n        <div style={{ marginBottom: '1rem' }}>\n          <label style={{\n            display: 'flex',\n            alignItems: 'center',\n            gap: '0.5rem',\n            cursor: 'pointer'\n          }}>\n            <input\n              type=\"checkbox\"\n              checked={colorVisionSettings.simulation.useSimulation}\n              onChange={handleSimulationToggle}\n              style={{ accentColor: '#3B82F6' }}\n            />\n            <span style={{ fontSize: '0.875rem', fontWeight: '500' }}>\n              色覚シミュレーションを有効にする\n            </span>\n          </label>\n        </div>\n\n        {colorVisionSettings.simulation.useSimulation && (\n          <>\n            <div style={{ marginBottom: '1rem' }}>\n              <label style={{\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                marginBottom: '0.5rem'\n              }}>\n                シミュレーションタイプ:\n              </label>\n              <select\n                value={colorVisionSettings.simulation.simulationType}\n                onChange={(e) => handleSimulationTypeChange(e.target.value as ColorVisionType)}\n                style={{\n                  width: '100%',\n                  padding: '0.5rem',\n                  border: '1px solid #D1D5DB',\n                  borderRadius: '0.375rem',\n                  fontSize: '0.875rem'\n                }}\n              >\n                <option value=\"deuteranopia\">デュータン（緑色覚異常）</option>\n                <option value=\"protanopia\">プロタン（赤色覚異常）</option>\n                <option value=\"tritanopia\">トリタン（青色覚異常）</option>\n              </select>\n            </div>\n\n            <div style={{ marginBottom: '1rem' }}>\n              <label style={{\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                marginBottom: '0.5rem'\n              }}>\n                シミュレーション強度: {(colorVisionSettings.simulation.severity * 100).toFixed(0)}%\n              </label>\n              <input\n                type=\"range\"\n                min=\"0\"\n                max=\"1\"\n                step=\"0.1\"\n                value={colorVisionSettings.simulation.severity}\n                onChange={(e) => handleSimulationSeverityChange(Number(e.target.value))}\n                style={{\n                  width: '100%',\n                  height: '6px'\n                }}\n              />\n            </div>\n          </>\n        )}\n      </div>\n\n      {/* 色覚補正設定 */}\n      <div style={{\n        marginBottom: '1.5rem',\n        padding: '1rem',\n        background: '#fff7ed',\n        borderRadius: '0.5rem',\n        border: '1px solid #fed7aa'\n      }}>\n        <h3 style={{\n          fontSize: '1rem',\n          margin: '0 0 1rem 0',\n          color: '#374151'\n        }}>色覚補正フィルター</h3>\n        \n        <div style={{ marginBottom: '1rem' }}>\n          <label style={{\n            display: 'flex',\n            alignItems: 'center',\n            gap: '0.5rem',\n            cursor: 'pointer'\n          }}>\n            <input\n              type=\"checkbox\"\n              checked={colorVisionSettings.correction.useCorrection}\n              onChange={handleCorrectionToggle}\n              style={{ accentColor: '#ea580c' }}\n            />\n            <span style={{ fontSize: '0.875rem', fontWeight: '500' }}>\n              色覚補正を有効にする\n            </span>\n          </label>\n        </div>\n\n        {colorVisionSettings.correction.useCorrection && (\n          <>\n            <div style={{ marginBottom: '1rem' }}>\n              <label style={{\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                marginBottom: '0.5rem'\n              }}>\n                補正対象:\n              </label>\n              <select\n                value={colorVisionSettings.correction.correctionType}\n                onChange={(e) => handleCorrectionTypeChange(e.target.value as ColorVisionType)}\n                style={{\n                  width: '100%',\n                  padding: '0.5rem',\n                  border: '1px solid #D1D5DB',\n                  borderRadius: '0.375rem',\n                  fontSize: '0.875rem'\n                }}\n              >\n                <option value=\"deuteranopia\">デュータン（緑色覚異常）</option>\n                <option value=\"protanopia\">プロタン（赤色覚異常）</option>\n                <option value=\"tritanopia\">トリタン（青色覚異常）</option>\n              </select>\n            </div>\n\n            <div style={{ marginBottom: '1rem' }}>\n              <label style={{\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                marginBottom: '0.5rem'\n              }}>\n                補正強度: {(colorVisionSettings.correction.strength * 100).toFixed(0)}%\n              </label>\n              <input\n                type=\"range\"\n                min=\"0\"\n                max=\"1\"\n                step=\"0.1\"\n                value={colorVisionSettings.correction.strength}\n                onChange={(e) => handleCorrectionStrengthChange(Number(e.target.value))}\n                style={{\n                  width: '100%',\n                  height: '6px'\n                }}\n              />\n            </div>\n\n            <div style={{ marginBottom: '1rem' }}>\n            </div>\n          </>\n        )}\n      </div>\n\n\n    </div>\n  );\n};","import { simulateDeutanPoly, correctForDeutan, type RGB8 } from './deutan-simulator';\nimport type { ColorVisionSettings } from '../types/color';\n\n/**\n * 画像に色変換を適用\n * @param imageData Canvas ImageData\n * @param colorVisionSettings 色覚設定\n * @param onProgress 進捗コールバック\n * @returns 変換されたImageData\n */\nexport async function processImageData(\n  imageData: ImageData,\n  colorVisionSettings: ColorVisionSettings,\n  onProgress?: (progress: number) => void\n): Promise<ImageData> {\n  console.log('processImageData called with settings:', colorVisionSettings);\n  console.log('Image data size:', imageData.width, 'x', imageData.height);\n  \n  const data = new Uint8ClampedArray(imageData.data);\n  const totalPixels = data.length / 4;\n  const batchSize = Math.max(1000, Math.floor(totalPixels / 100)); // バッチサイズ調整\n  \n  let processedPixels = 0;\n  let actuallyProcessed = false;\n\n  // バッチ処理でメインスレッドをブロックしないように\n  for (let i = 0; i < data.length; i += batchSize * 4) {\n    const endIndex = Math.min(i + batchSize * 4, data.length);\n    \n    // バッチ内のピクセルを処理\n    for (let j = i; j < endIndex; j += 4) {\n      const originalRgb: RGB8 = [data[j], data[j + 1], data[j + 2]];\n      let transformedRgb = originalRgb;\n      \n      // シミュレーションを適用\n      if (colorVisionSettings.simulation.useSimulation && \n          colorVisionSettings.simulation.simulationType === 'deuteranopia') {\n        transformedRgb = simulateDeutanPoly(\n          transformedRgb, \n          colorVisionSettings.simulation.severity\n        );\n        actuallyProcessed = true;\n      }\n      \n      // 補正を適用\n      if (colorVisionSettings.correction.useCorrection && \n          colorVisionSettings.correction.correctionType === 'deuteranopia') {\n        transformedRgb = correctForDeutan(\n          transformedRgb, \n          colorVisionSettings.correction.strength\n        );\n        actuallyProcessed = true;\n      }\n      \n      // 結果を書き戻し\n      data[j] = transformedRgb[0];\n      data[j + 1] = transformedRgb[1];\n      data[j + 2] = transformedRgb[2];\n      // alpha channel (data[j + 3]) はそのまま\n      \n      processedPixels++;\n    }\n    \n    // 進捗を報告\n    if (onProgress) {\n      const progress = Math.round((processedPixels / totalPixels) * 100);\n      onProgress(progress);\n    }\n    \n    // メインスレッドに制御を戻す\n    await new Promise(resolve => setTimeout(resolve, 0));\n  }\n  \n  console.log('Processing completed. Actually processed:', actuallyProcessed);\n  console.log('Total pixels processed:', processedPixels);\n  \n  return new ImageData(data, imageData.width, imageData.height);\n}\n\n/**\n * 画像ファイルをCanvasに読み込み\n * @param file 画像ファイル\n * @param maxWidth 最大幅（リサイズ用）\n * @param maxHeight 最大高さ（リサイズ用）\n * @returns Canvas要素とImageData\n */\nexport function loadImageToCanvas(\n  file: File, \n  maxWidth = 4096, \n  maxHeight = 4096\n): Promise<{canvas: HTMLCanvasElement, imageData: ImageData}> {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    \n    if (!ctx) {\n      reject(new Error('Canvas context not available'));\n      return;\n    }\n    \n    img.onload = () => {\n      // リサイズ計算\n      let { width, height } = img;\n      if (width > maxWidth || height > maxHeight) {\n        const ratio = Math.min(maxWidth / width, maxHeight / height);\n        width *= ratio;\n        height *= ratio;\n      }\n      \n      canvas.width = width;\n      canvas.height = height;\n      \n      // 画像を描画\n      ctx.drawImage(img, 0, 0, width, height);\n      \n      // ImageDataを取得\n      const imageData = ctx.getImageData(0, 0, width, height);\n      \n      resolve({ canvas, imageData });\n    };\n    \n    img.onerror = () => {\n      reject(new Error('Failed to load image'));\n    };\n    \n    img.src = URL.createObjectURL(file);\n  });\n}\n\n/**\n * ImageDataをCanvasに描画\n * @param canvas Canvas要素\n * @param imageData ImageData\n */\nexport function drawImageDataToCanvas(\n  canvas: HTMLCanvasElement, \n  imageData: ImageData\n): void {\n  const ctx = canvas.getContext('2d');\n  if (!ctx) throw new Error('Canvas context not available');\n  \n  canvas.width = imageData.width;\n  canvas.height = imageData.height;\n  ctx.putImageData(imageData, 0, 0);\n}\n\n/**\n * CanvasをBlob/File形式でダウンロード\n * @param canvas Canvas要素\n * @param filename ファイル名\n * @param format 画像フォーマット\n * @param quality 品質（JPEG用）\n */\nexport function downloadCanvasAsImage(\n  canvas: HTMLCanvasElement,\n  filename = 'colorwise-processed.png',\n  format: 'image/png' | 'image/jpeg' | 'image/webp' = 'image/png',\n  quality = 0.9\n): void {\n  canvas.toBlob((blob) => {\n    if (!blob) return;\n    \n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = filename;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  }, format, quality);\n}\n\n/**\n * ファイルサイズを人間に読みやすい形式に変換\n * @param bytes バイト数\n * @returns フォーマットされた文字列\n */\nexport function formatFileSize(bytes: number): string {\n  if (bytes === 0) return '0 Bytes';\n  \n  const k = 1024;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n  \n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n}\n\n/**\n * 画像ファイルの妥当性をチェック\n * @param file ファイル\n * @param maxSize 最大サイズ（バイト）\n * @returns エラーメッセージまたはnull\n */\nexport function validateImageFile(\n  file: File, \n  maxSize = 10 * 1024 * 1024 // 10MB\n): string | null {\n  // ファイルタイプチェック\n  if (!file.type.startsWith('image/')) {\n    return '画像ファイルを選択してください';\n  }\n  \n  // サポートされている形式チェック\n  const supportedTypes = ['image/jpeg', 'image/png', 'image/webp', 'image/gif'];\n  if (!supportedTypes.includes(file.type)) {\n    return 'サポートされていない画像形式です（JPEG, PNG, WebP, GIFのみ）';\n  }\n  \n  // ファイルサイズチェック\n  if (file.size > maxSize) {\n    return `ファイルサイズが大きすぎます（最大: ${formatFileSize(maxSize)}）`;\n  }\n  \n  return null;\n}","import React, { useCallback, useState } from 'react';\nimport type { ImageFileInfo, ImageProcessingState } from '../types/color';\nimport { validateImageFile } from '../utils/image-processor';\n\ninterface ImageUploaderProps {\n  onImageLoad: (imageInfo: ImageFileInfo) => void;\n  processingState: ImageProcessingState;\n  disabled?: boolean;\n}\n\n/**\n * 画像アップロードコンポーネント\n */\nexport const ImageUploader: React.FC<ImageUploaderProps> = ({\n  onImageLoad,\n  processingState,\n  disabled = false\n}) => {\n  const [dragOver, setDragOver] = useState(false);\n\n  const handleFileSelect = useCallback((file: File) => {\n    const validationError = validateImageFile(file);\n    if (validationError) {\n      alert(validationError);\n      return;\n    }\n\n    // 画像の寸法を取得\n    const img = new Image();\n    img.onload = () => {\n      const imageInfo: ImageFileInfo = {\n        file,\n        url: URL.createObjectURL(file),\n        width: img.width,\n        height: img.height,\n        size: file.size\n      };\n      onImageLoad(imageInfo);\n    };\n    img.src = URL.createObjectURL(file);\n  }, [onImageLoad]);\n\n  const handleFileInput = useCallback((event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      handleFileSelect(file);\n    }\n  }, [handleFileSelect]);\n\n  const handleDrop = useCallback((event: React.DragEvent) => {\n    event.preventDefault();\n    setDragOver(false);\n    \n    const file = event.dataTransfer.files[0];\n    if (file) {\n      handleFileSelect(file);\n    }\n  }, [handleFileSelect]);\n\n  const handleDragOver = useCallback((event: React.DragEvent) => {\n    event.preventDefault();\n    setDragOver(true);\n  }, []);\n\n  const handleDragLeave = useCallback((event: React.DragEvent) => {\n    event.preventDefault();\n    setDragOver(false);\n  }, []);\n\n  return (\n    <div style={{\n      background: '#FFFFFF',\n      borderRadius: '0.75rem',\n      padding: '2rem',\n      boxShadow: '0 4px 6px -1px rgb(0 0 0 / 0.1)',\n      width: '100%'\n    }}>\n      <h3 style={{\n        fontSize: '1.25rem',\n        fontWeight: '600',\n        color: '#111827',\n        margin: '0 0 1.5rem 0'\n      }}>\n        📸 写真をアップロード\n      </h3>\n\n      <div\n        onDrop={handleDrop}\n        onDragOver={handleDragOver}\n        onDragLeave={handleDragLeave}\n        style={{\n          border: dragOver \n            ? '2px dashed #3B82F6' \n            : '2px dashed #D1D5DB',\n          borderRadius: '0.5rem',\n          padding: '3rem 1rem',\n          textAlign: 'center',\n          transition: 'all 0.2s ease',\n          background: dragOver ? '#F0F9FF' : '#F9FAFB',\n          cursor: disabled ? 'not-allowed' : 'pointer',\n          opacity: disabled ? 0.5 : 1\n        }}\n      >\n        {processingState.isProcessing ? (\n          <div>\n            <div style={{\n              width: '48px',\n              height: '48px',\n              border: '4px solid #E5E7EB',\n              borderTop: '4px solid #3B82F6',\n              borderRadius: '50%',\n              animation: 'spin 1s linear infinite',\n              margin: '0 auto 1rem'\n            }} />\n            <p style={{\n              color: '#6B7280',\n              fontSize: '1rem',\n              margin: '0 0 0.5rem 0'\n            }}>\n              処理中... {processingState.progress}%\n            </p>\n            <div style={{\n              width: '100%',\n              height: '8px',\n              background: '#E5E7EB',\n              borderRadius: '4px',\n              overflow: 'hidden',\n              margin: '0 auto',\n              maxWidth: '200px'\n            }}>\n              <div style={{\n                width: `${processingState.progress}%`,\n                height: '100%',\n                background: '#3B82F6',\n                transition: 'width 0.3s ease'\n              }} />\n            </div>\n          </div>\n        ) : (\n          <div>\n            <div style={{\n              fontSize: '3rem',\n              marginBottom: '1rem'\n            }}>\n              📷\n            </div>\n            <p style={{\n              color: '#374151',\n              fontSize: '1.125rem',\n              fontWeight: '500',\n              margin: '0 0 0.5rem 0'\n            }}>\n              写真をドラッグ&ドロップ\n            </p>\n            <p style={{\n              color: '#6B7280',\n              fontSize: '0.875rem',\n              margin: '0 0 1.5rem 0'\n            }}>\n              または下のボタンから選択\n            </p>\n            \n            <label style={{\n              display: 'inline-block',\n              background: '#3B82F6',\n              color: 'white',\n              padding: '0.75rem 2rem',\n              borderRadius: '0.5rem',\n              fontWeight: '500',\n              cursor: disabled ? 'not-allowed' : 'pointer',\n              transition: 'background-color 0.2s ease'\n            }}>\n              ファイルを選択\n              <input\n                type=\"file\"\n                accept=\"image/*\"\n                onChange={handleFileInput}\n                disabled={disabled}\n                style={{ display: 'none' }}\n              />\n            </label>\n          </div>\n        )}\n      </div>\n\n      <div style={{\n        marginTop: '1rem',\n        padding: '1rem',\n        background: '#F0F9FF',\n        borderRadius: '0.5rem',\n        border: '1px solid #BFDBFE'\n      }}>\n        <p style={{\n          fontSize: '0.875rem',\n          color: '#374151',\n          margin: '0',\n          lineHeight: '1.5'\n        }}>\n          💡 <strong>対応形式:</strong> JPEG, PNG, WebP, GIF<br />\n          📏 <strong>推奨サイズ:</strong> 10MB以下、1920×1080px以下\n        </p>\n      </div>\n\n      {processingState.error && (\n        <div style={{\n          marginTop: '1rem',\n          padding: '1rem',\n          background: '#FEF2F2',\n          borderRadius: '0.5rem',\n          border: '1px solid #FECACA'\n        }}>\n          <p style={{\n            fontSize: '0.875rem',\n            color: '#DC2626',\n            margin: '0',\n            fontWeight: '500'\n          }}>\n            ❌ エラー: {processingState.error}\n          </p>\n        </div>\n      )}\n\n      <style>\n        {`\n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n        `}\n      </style>\n    </div>\n  );\n};","import React, { useRef, useEffect, useState } from 'react';\nimport type { ImageFileInfo, ColorVisionSettings } from '../types/color';\nimport { \n  loadImageToCanvas, \n  processImageData, \n  drawImageDataToCanvas, \n  downloadCanvasAsImage,\n  formatFileSize \n} from '../utils/image-processor';\n\ninterface ImageViewerProps {\n  imageInfo: ImageFileInfo | null;\n  colorVisionSettings: ColorVisionSettings;\n  onProcessingStateChange: (isProcessing: boolean, progress: number, error?: string) => void;\n}\n\ntype ViewMode = 'original' | 'processed' | 'split';\n\n/**\n * 画像表示・処理コンポーネント\n */\nexport const ImageViewer: React.FC<ImageViewerProps> = ({\n  imageInfo,\n  colorVisionSettings,\n  onProcessingStateChange\n}) => {\n  const originalCanvasRef = useRef<HTMLCanvasElement>(null);\n  const processedCanvasRef = useRef<HTMLCanvasElement>(null);\n  const [viewMode, setViewMode] = useState<ViewMode>('processed');\n  const [originalImageData, setOriginalImageData] = useState<ImageData | null>(null);\n  const [processedImageData, setProcessedImageData] = useState<ImageData | null>(null);\n\n  // 画像読み込み\n  useEffect(() => {\n    if (!imageInfo) {\n      setOriginalImageData(null);\n      setProcessedImageData(null);\n      return;\n    }\n\n    const loadImage = async () => {\n      try {\n        onProcessingStateChange(true, 0);\n        \n        const { imageData } = await loadImageToCanvas(imageInfo.file);\n        setOriginalImageData(imageData);\n        \n        // オリジナル画像をcanvasに描画\n        if (originalCanvasRef.current) {\n          drawImageDataToCanvas(originalCanvasRef.current, imageData);\n        }\n        \n        // 画像読み込み完了時は processing状態を継続（色覚処理待ち）\n        console.log('Image loaded, waiting for color processing...');\n      } catch (error) {\n        console.error('画像読み込みエラー:', error);\n        onProcessingStateChange(false, 0, '画像の読み込みに失敗しました');\n      }\n    };\n\n    loadImage();\n  }, [imageInfo]); // onProcessingStateChangeを依存配列から削除\n\n  // 色覚設定変更時の再処理\n  useEffect(() => {\n    if (!originalImageData) return;\n\n    // 処理を遅延させて連続実行を防ぐ\n    const timeoutId = setTimeout(() => {\n      const processImage = async () => {\n        try {\n          console.log('Starting color processing...', colorVisionSettings);\n          onProcessingStateChange(true, 0);\n          \n          const processed = await processImageData(\n            originalImageData, \n            colorVisionSettings,\n            (progress) => {\n              console.log('Processing progress:', progress);\n              onProcessingStateChange(true, progress);\n            }\n          );\n          \n          console.log('Color processing completed');\n          setProcessedImageData(processed);\n          \n          // 処理済み画像をcanvasに描画\n          if (processedCanvasRef.current) {\n            drawImageDataToCanvas(processedCanvasRef.current, processed);\n          }\n          \n          onProcessingStateChange(false, 100);\n        } catch (error) {\n          console.error('画像処理エラー:', error);\n          onProcessingStateChange(false, 0, '画像処理に失敗しました');\n        }\n      };\n\n      processImage();\n    }, 100); // 100ms遅延\n\n    return () => clearTimeout(timeoutId);\n  }, [originalImageData, colorVisionSettings]); // onProcessingStateChangeを依存配列から削除\n\n  const handleDownload = () => {\n    if (!processedCanvasRef.current || !processedImageData) return;\n    \n    const filename = `colorwise-${imageInfo?.file.name || 'processed'}.png`;\n    downloadCanvasAsImage(processedCanvasRef.current, filename);\n  };\n\n  if (!imageInfo) {\n    return (\n      <div style={{\n        background: '#F9FAFB',\n        borderRadius: '0.75rem',\n        padding: '3rem',\n        textAlign: 'center',\n        border: '2px dashed #D1D5DB'\n      }}>\n        <div style={{ fontSize: '3rem', marginBottom: '1rem' }}>🖼️</div>\n        <p style={{\n          color: '#6B7280',\n          fontSize: '1.125rem',\n          margin: '0'\n        }}>\n          画像を選択してください\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div style={{\n      background: '#FFFFFF',\n      borderRadius: '0.75rem',\n      padding: '1.5rem',\n      boxShadow: '0 4px 6px -1px rgb(0 0 0 / 0.1)',\n      width: '100%'\n    }}>\n      <div style={{\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginBottom: '1.5rem',\n        flexWrap: 'wrap',\n        gap: '1rem'\n      }}>\n        <div>\n          <h3 style={{\n            fontSize: '1.25rem',\n            fontWeight: '600',\n            color: '#111827',\n            margin: '0 0 0.5rem 0'\n          }}>\n            🖼️ 画像プレビュー\n          </h3>\n          <p style={{\n            fontSize: '0.875rem',\n            color: '#6B7280',\n            margin: '0'\n          }}>\n            {imageInfo.file.name} ({imageInfo.width}×{imageInfo.height}, {formatFileSize(imageInfo.size)})\n          </p>\n        </div>\n        \n        <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'center' }}>\n          <select\n            value={viewMode}\n            onChange={(e) => setViewMode(e.target.value as ViewMode)}\n            style={{\n              padding: '0.5rem',\n              border: '1px solid #D1D5DB',\n              borderRadius: '0.375rem',\n              fontSize: '0.875rem'\n            }}\n          >\n            <option value=\"original\">元画像</option>\n            <option value=\"processed\">変換済み</option>\n            <option value=\"split\">分割表示</option>\n          </select>\n          \n          <button\n            onClick={handleDownload}\n            disabled={!processedImageData}\n            style={{\n              background: processedImageData ? '#10B981' : '#D1D5DB',\n              color: 'white',\n              padding: '0.5rem 1rem',\n              borderRadius: '0.375rem',\n              fontWeight: '500',\n              border: 'none',\n              cursor: processedImageData ? 'pointer' : 'not-allowed',\n              fontSize: '0.875rem'\n            }}\n          >\n            💾 ダウンロード\n          </button>\n        </div>\n      </div>\n\n      <div style={{\n        borderRadius: '0.5rem',\n        overflow: 'auto',\n        background: '#F3F4F6',\n        position: 'relative',\n        maxHeight: '80vh'\n      }}>\n        {viewMode === 'split' && (\n          <div style={{ display: 'flex', gap: '4px', justifyContent: 'center' }}>\n            <div style={{ position: 'relative' }}>\n              <canvas\n                ref={originalCanvasRef}\n                style={{\n                  maxWidth: '100%',\n                  height: 'auto',\n                  display: 'block'\n                }}\n              />\n              <div style={{\n                position: 'absolute',\n                top: '0.5rem',\n                left: '0.5rem',\n                background: 'rgba(0,0,0,0.7)',\n                color: 'white',\n                padding: '0.25rem 0.5rem',\n                borderRadius: '0.25rem',\n                fontSize: '0.75rem',\n                fontWeight: '500'\n              }}>\n                元画像\n              </div>\n            </div>\n            <div style={{ position: 'relative' }}>\n              <canvas\n                ref={processedCanvasRef}\n                style={{\n                  maxWidth: '100%',\n                  height: 'auto',\n                  display: 'block'\n                }}\n              />\n              <div style={{\n                position: 'absolute',\n                top: '0.5rem',\n                left: '0.5rem',\n                background: 'rgba(0,0,0,0.7)',\n                color: 'white',\n                padding: '0.25rem 0.5rem',\n                borderRadius: '0.25rem',\n                fontSize: '0.75rem',\n                fontWeight: '500'\n              }}>\n                変換済み\n              </div>\n            </div>\n          </div>\n        )}\n        \n        {viewMode === 'original' && (\n          <div style={{ display: 'flex', justifyContent: 'center' }}>\n            <canvas\n              ref={originalCanvasRef}\n              style={{\n                maxWidth: '100%',\n                height: 'auto',\n                display: 'block'\n              }}\n            />\n          </div>\n        )}\n        \n        {viewMode === 'processed' && (\n          <div style={{ display: 'flex', justifyContent: 'center' }}>\n            <canvas\n              ref={processedCanvasRef}\n              style={{\n                maxWidth: '100%',\n                height: 'auto',\n                display: 'block'\n              }}\n            />\n          </div>\n        )}\n      </div>\n\n      <div style={{\n        marginTop: '1rem',\n        padding: '1rem',\n        background: '#F0F9FF',\n        borderRadius: '0.5rem',\n        border: '1px solid #BFDBFE'\n      }}>\n        <p style={{\n          fontSize: '0.875rem',\n          color: '#374151',\n          margin: '0',\n          lineHeight: '1.5'\n        }}>\n          🔄 <strong>リアルタイム処理:</strong> 左のスライダー調整が即座に反映されます<br />\n          💾 <strong>ダウンロード:</strong> 処理結果をPNG形式で保存できます\n        </p>\n      </div>\n    </div>\n  );\n};","import React, { useRef, useEffect, useState, useCallback } from 'react';\nimport type { CameraConfig, ColorVisionSettings } from '../types/color';\nimport { processImageData, drawImageDataToCanvas, downloadCanvasAsImage } from '../utils/image-processor';\n\ninterface CameraCaptureProps {\n  colorVisionSettings: ColorVisionSettings;\n  onProcessingStateChange: (isProcessing: boolean, progress: number, error?: string) => void;\n}\n\n/**\n * カメラキャプチャ・リアルタイム処理コンポーネント\n */\nexport const CameraCapture: React.FC<CameraCaptureProps> = ({\n  colorVisionSettings,\n  onProcessingStateChange\n}) => {\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const originalCanvasRef = useRef<HTMLCanvasElement>(null);\n  const processedCanvasRef = useRef<HTMLCanvasElement>(null);\n  \n  const [cameraConfig, setCameraConfig] = useState<CameraConfig>({\n    isActive: false,\n    facingMode: 'environment',\n    resolution: { width: 1280, height: 720 }\n  });\n  \n  const [devices, setDevices] = useState<MediaDeviceInfo[]>([]);\n  const [stream, setStream] = useState<MediaStream | null>(null);\n  const [isProcessingFrame, setIsProcessingFrame] = useState(false);\n  const [viewMode, setViewMode] = useState<'original' | 'processed' | 'split'>('processed');\n  \n  // カメラデバイス一覧を取得\n  useEffect(() => {\n    const getDevices = async () => {\n      try {\n        const deviceList = await navigator.mediaDevices.enumerateDevices();\n        const videoDevices = deviceList.filter(device => device.kind === 'videoinput');\n        setDevices(videoDevices);\n      } catch (error) {\n        console.error('デバイス取得エラー:', error);\n      }\n    };\n    \n    getDevices();\n  }, []);\n\n  // カメラストリーム開始/停止\n  const toggleCamera = useCallback(async () => {\n    console.log('toggleCamera called, current state:', cameraConfig.isActive);\n    \n    if (cameraConfig.isActive && stream) {\n      // カメラ停止\n      console.log('Stopping camera...');\n      stream.getTracks().forEach(track => track.stop());\n      setStream(null);\n      setCameraConfig(prev => ({ ...prev, isActive: false }));\n      return;\n    }\n\n    // getUserMedia対応チェック\n    if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n      console.error('getUserMedia not supported');\n      onProcessingStateChange(false, 0, 'お使いのブラウザはカメラアクセスに対応していません');\n      return;\n    }\n\n    try {\n      console.log('Starting camera...');\n      onProcessingStateChange(true, 0, '');\n      \n      // シンプルな設定でまず試す\n      const constraints = {\n        video: cameraConfig.deviceId \n          ? { deviceId: { exact: cameraConfig.deviceId } }\n          : { facingMode: cameraConfig.facingMode }\n      };\n      \n      console.log('Camera constraints:', constraints);\n      \n      const mediaStream = await navigator.mediaDevices.getUserMedia(constraints);\n      console.log('Camera stream obtained:', mediaStream);\n      \n      setStream(mediaStream);\n      setCameraConfig(prev => ({ ...prev, isActive: true }));\n      \n      if (videoRef.current) {\n        videoRef.current.srcObject = mediaStream;\n        console.log('Video element source set');\n        \n        // video要素の準備完了を待つ\n        videoRef.current.onloadedmetadata = () => {\n          console.log('Video metadata loaded');\n          onProcessingStateChange(false, 100, '');\n        };\n      }\n    } catch (error) {\n      console.error('カメラアクセスエラー:', error);\n      \n      let errorMessage = 'カメラにアクセスできませんでした';\n      if (error instanceof Error) {\n        if (error.name === 'NotAllowedError') {\n          errorMessage = 'カメラアクセスが拒否されました。ブラウザの設定を確認してください';\n        } else if (error.name === 'NotFoundError') {\n          errorMessage = 'カメラが見つかりませんでした';\n        } else if (error.name === 'NotReadableError') {\n          errorMessage = 'カメラが他のアプリケーションで使用中です';\n        } else {\n          errorMessage = `カメラエラー: ${error.message}`;\n        }\n      }\n      \n      onProcessingStateChange(false, 0, errorMessage);\n    }\n  }, [cameraConfig, stream, onProcessingStateChange]);\n\n  // 静止画キャプチャ・処理\n  const captureAndProcess = useCallback(async () => {\n    if (!videoRef.current || !originalCanvasRef.current || !processedCanvasRef.current) return;\n    if (isProcessingFrame) return;\n    \n    const video = videoRef.current;\n    const originalCanvas = originalCanvasRef.current;\n    const processedCanvas = processedCanvasRef.current;\n    \n    // ビデオフレームをcanvasに描画\n    originalCanvas.width = video.videoWidth;\n    originalCanvas.height = video.videoHeight;\n    processedCanvas.width = video.videoWidth;\n    processedCanvas.height = video.videoHeight;\n    \n    const ctx = originalCanvas.getContext('2d');\n    if (!ctx) return;\n    \n    ctx.drawImage(video, 0, 0);\n    const imageData = ctx.getImageData(0, 0, originalCanvas.width, originalCanvas.height);\n    \n    setIsProcessingFrame(true);\n    onProcessingStateChange(true, 50, '画像を処理中...');\n    \n    try {\n      // 色変換処理を適用\n      const processedImageData = await processImageData(imageData, colorVisionSettings);\n      drawImageDataToCanvas(processedCanvas, processedImageData);\n      onProcessingStateChange(false, 100, '処理完了');\n    } catch (error) {\n      console.error('フレーム処理エラー:', error);\n      onProcessingStateChange(false, 0, '処理中にエラーが発生しました');\n    } finally {\n      setIsProcessingFrame(false);\n    }\n  }, [colorVisionSettings, isProcessingFrame, onProcessingStateChange]);\n\n  // キャプチャ機能\n  const capturePhoto = useCallback(() => {\n    if (!processedCanvasRef.current) return;\n    \n    const timestamp = new Date().toISOString().replace(/[:.]/g, '-');\n    const filename = `colorwise-capture-${timestamp}.png`;\n    downloadCanvasAsImage(processedCanvasRef.current, filename);\n  }, []);\n\n  return (\n    <div style={{\n      background: '#FFFFFF',\n      borderRadius: '0.75rem',\n      padding: '1.5rem',\n      boxShadow: '0 4px 6px -1px rgb(0 0 0 / 0.1)',\n      width: '100%'\n    }}>\n      <div style={{\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginBottom: '1.5rem',\n        flexWrap: 'wrap',\n        gap: '1rem'\n      }}>\n        <h3 style={{\n          fontSize: '1.25rem',\n          fontWeight: '600',\n          color: '#111827',\n          margin: '0'\n        }}>\n          📷 カメラキャプチャ\n        </h3>\n        \n        <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'center' }}>\n          {devices.length > 1 && (\n            <select\n              value={cameraConfig.deviceId || ''}\n              onChange={(e) => setCameraConfig(prev => ({ ...prev, deviceId: e.target.value }))}\n              disabled={cameraConfig.isActive}\n              style={{\n                padding: '0.5rem',\n                border: '1px solid #D1D5DB',\n                borderRadius: '0.375rem',\n                fontSize: '0.875rem'\n              }}\n            >\n              <option value=\"\">デフォルト</option>\n              {devices.map(device => (\n                <option key={device.deviceId} value={device.deviceId}>\n                  {device.label || `カメラ ${device.deviceId.slice(0, 8)}`}\n                </option>\n              ))}\n            </select>\n          )}\n          \n          <select\n            value={viewMode}\n            onChange={(e) => setViewMode(e.target.value as any)}\n            style={{\n              padding: '0.5rem',\n              border: '1px solid #D1D5DB',\n              borderRadius: '0.375rem',\n              fontSize: '0.875rem'\n            }}\n          >\n            <option value=\"original\">元画像</option>\n            <option value=\"processed\">変換済み</option>\n            <option value=\"split\">分割表示</option>\n          </select>\n          \n          <button\n            onClick={toggleCamera}\n            style={{\n              background: cameraConfig.isActive ? '#DC2626' : '#10B981',\n              color: 'white',\n              padding: '0.5rem 1rem',\n              borderRadius: '0.375rem',\n              fontWeight: '500',\n              border: 'none',\n              cursor: 'pointer',\n              fontSize: '0.875rem'\n            }}\n          >\n            {cameraConfig.isActive ? '⏹️ 停止' : '📹 カメラを起動'}\n          </button>\n          \n          {cameraConfig.isActive && (\n            <>\n              <button\n                onClick={captureAndProcess}\n                disabled={isProcessingFrame}\n                style={{\n                  background: isProcessingFrame ? '#9CA3AF' : '#059669',\n                  color: 'white',\n                  padding: '0.5rem 1rem',\n                  borderRadius: '0.375rem',\n                  fontWeight: '500',\n                  border: 'none',\n                  cursor: isProcessingFrame ? 'not-allowed' : 'pointer',\n                  fontSize: '0.875rem'\n                }}\n              >\n                {isProcessingFrame ? '🔄 処理中...' : '📸 撮影'}\n              </button>\n              \n              <button\n                onClick={capturePhoto}\n                disabled={!processedCanvasRef.current}\n                style={{\n                  background: '#3B82F6',\n                  color: 'white',\n                  padding: '0.5rem 1rem',\n                  borderRadius: '0.375rem',\n                  fontWeight: '500',\n                  border: 'none',\n                  cursor: 'pointer',\n                  fontSize: '0.875rem'\n                }}\n              >\n                💾 保存\n              </button>\n            </>\n          )}\n        </div>\n      </div>\n\n      <div style={{\n        borderRadius: '0.5rem',\n        overflow: 'auto',\n        background: '#F3F4F6',\n        position: 'relative',\n        minHeight: '400px',\n        maxHeight: '80vh'\n      }}>\n        {!cameraConfig.isActive ? (\n          <div style={{\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            height: '300px',\n            flexDirection: 'column',\n            gap: '1rem'\n          }}>\n            <div style={{ fontSize: '3rem' }}>📹</div>\n            <p style={{\n              color: '#6B7280',\n              fontSize: '1.125rem',\n              margin: '0'\n            }}>\n              カメラを起動してください\n            </p>\n          </div>\n        ) : (\n          <>\n            <video\n              ref={videoRef}\n              autoPlay\n              playsInline\n              muted\n              style={{\n                display: 'none'\n              }}\n            />\n            \n            {viewMode === 'split' && (\n              <div style={{ display: 'flex', gap: '4px', justifyContent: 'center' }}>\n                <div style={{ position: 'relative' }}>\n                  <canvas\n                    ref={originalCanvasRef}\n                    style={{\n                      maxWidth: '100%',\n                      height: 'auto',\n                      display: 'block'\n                    }}\n                  />\n                  <div style={{\n                    position: 'absolute',\n                    top: '0.5rem',\n                    left: '0.5rem',\n                    background: 'rgba(0,0,0,0.7)',\n                    color: 'white',\n                    padding: '0.25rem 0.5rem',\n                    borderRadius: '0.25rem',\n                    fontSize: '0.75rem',\n                    fontWeight: '500'\n                  }}>\n                    オリジナル\n                  </div>\n                </div>\n                <div style={{ position: 'relative' }}>\n                  <canvas\n                    ref={processedCanvasRef}\n                    style={{\n                      maxWidth: '100%',\n                      height: 'auto',\n                      display: 'block'\n                    }}\n                  />\n                  <div style={{\n                    position: 'absolute',\n                    top: '0.5rem',\n                    left: '0.5rem',\n                    background: 'rgba(0,0,0,0.7)',\n                    color: 'white',\n                    padding: '0.25rem 0.5rem',\n                    borderRadius: '0.25rem',\n                    fontSize: '0.75rem',\n                    fontWeight: '500'\n                  }}>\n                    処理後\n                  </div>\n                  {isProcessingFrame && (\n                    <div style={{\n                      position: 'absolute',\n                      top: '0.5rem',\n                      right: '0.5rem',\n                      background: 'rgba(0,0,0,0.7)',\n                      color: 'white',\n                      padding: '0.25rem 0.5rem',\n                      borderRadius: '0.25rem',\n                      fontSize: '0.75rem'\n                    }}>\n                      処理中...\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n            \n            {viewMode === 'original' && (\n              <div style={{ display: 'flex', justifyContent: 'center' }}>\n                <canvas\n                  ref={originalCanvasRef}\n                  style={{\n                    maxWidth: '100%',\n                    height: 'auto',\n                    display: 'block'\n                  }}\n                />\n              </div>\n            )}\n            \n            {viewMode === 'processed' && (\n              <div style={{ display: 'flex', justifyContent: 'center' }}>\n                <canvas\n                  ref={processedCanvasRef}\n                  style={{\n                    maxWidth: '100%',\n                    height: 'auto',\n                    display: 'block'\n                  }}\n                />\n              </div>\n            )}\n          </>\n        )}\n      </div>\n\n      <div style={{\n        marginTop: '1rem',\n        padding: '1rem',\n        background: '#F0F9FF',\n        borderRadius: '0.5rem',\n        border: '1px solid #BFDBFE'\n      }}>\n        <p style={{\n          fontSize: '0.875rem',\n          color: '#374151',\n          margin: '0 0 0.5rem 0',\n          lineHeight: '1.5'\n        }}>\n          📸 <strong>撮影:</strong> 「撮影」ボタンで静止画をキャプチャし、色覚変換を適用<br />\n          💾 <strong>保存:</strong> 処理後の画像をPNG形式でダウンロードできます\n        </p>\n        <p style={{\n          fontSize: '0.75rem',\n          color: '#6B7280',\n          margin: '0',\n          lineHeight: '1.4',\n          fontStyle: 'italic'\n        }}>\n          ⚠️ <strong>カメラアクセスのヒント:</strong><br />\n          • ブラウザでカメラ許可が必要です<br />\n          • 他のアプリでカメラを使用中でないか確認してください<br />\n          • HTTPSでない場合、一部ブラウザで制限される場合があります\n        </p>\n      </div>\n    </div>\n  );\n};","import React from 'react';\n\ninterface AboutModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  activeSection: 'about' | 'credits' | 'privacy' | 'disclaimer';\n}\n\nexport const AboutModal: React.FC<AboutModalProps> = ({ isOpen, onClose, activeSection }) => {\n  if (!isOpen) return null;\n\n  const renderContent = () => {\n    switch (activeSection) {\n      case 'about':\n        return (\n          <div>\n            <h2 style={{ color: '#111827', marginBottom: '1rem' }}>このアプリについて</h2>\n            <div style={{ lineHeight: '1.6', color: '#374151' }}>\n              <p><strong>ColorWise（カラーワイズ）</strong>は、色覚の多様性に配慮した色表示支援ツールです。</p>\n              \n              <h3 style={{ marginTop: '1.5rem', marginBottom: '0.5rem' }}>🎯 目的</h3>\n              <ul style={{ paddingLeft: '1.5rem' }}>\n                <li>色覚の違いによる見え方の体験・理解促進</li>\n                <li>デジタルコンテンツの色調整支援</li>\n                <li>より包括的なデザイン環境の実現</li>\n              </ul>\n\n              <h3 style={{ marginTop: '1.5rem', marginBottom: '0.5rem' }}>⚠️ 重要な注意</h3>\n              <ul style={{ paddingLeft: '1.5rem' }}>\n                <li>本アプリは医療機器ではありません</li>\n                <li>色覚異常の診断・治療を目的としていません</li>\n                <li>医師の診断に代わるものではありません</li>\n              </ul>\n\n              <h3 style={{ marginTop: '1.5rem', marginBottom: '0.5rem' }}>🔒 プライバシー</h3>\n              <ul style={{ paddingLeft: '1.5rem' }}>\n                <li>すべての処理は端末内で完結</li>\n                <li>画像データの外部送信なし</li>\n                <li>個人情報の収集なし</li>\n              </ul>\n            </div>\n          </div>\n        );\n      \n      case 'credits':\n        return (\n          <div>\n            <h2 style={{ color: '#111827', marginBottom: '1rem' }}>クレジット・謝辞</h2>\n            <div style={{ lineHeight: '1.6', color: '#374151' }}>\n              <h3 style={{ marginTop: '1.5rem', marginBottom: '0.5rem' }}>🎓 学術的基盤</h3>\n              <p>本アプリの色覚シミュレーション機能は、以下の研究成果を参考に実装されています：</p>\n              <div style={{ \n                background: '#F9FAFB', \n                padding: '1rem', \n                borderRadius: '0.5rem', \n                border: '1px solid #E5E7EB',\n                marginTop: '0.5rem'\n              }}>\n                <p style={{ fontWeight: 'bold', margin: '0 0 0.5rem 0' }}>\n                  Machado, G.M., Oliveira, M.M., and Fernandes, L.A.F. (2009)\n                </p>\n                <p style={{ fontStyle: 'italic', margin: '0 0 0.5rem 0' }}>\n                  \"A Physiologically-based Model for Simulation of Color Vision Deficiency\"\n                </p>\n                <p style={{ fontSize: '0.875rem', margin: '0' }}>\n                  IEEE Transactions on Visualization and Computer Graphics, Vol.15, No.6, pp.1291-1298\n                </p>\n              </div>\n              \n              <h3 style={{ marginTop: '1.5rem', marginBottom: '0.5rem' }}>🛠️ 技術スタック</h3>\n              <ul style={{ paddingLeft: '1.5rem' }}>\n                <li>React 18 + TypeScript</li>\n                <li>Vite (ビルドツール)</li>\n                <li>PWA (Service Worker + Manifest)</li>\n                <li>Canvas API (画像処理)</li>\n              </ul>\n\n              <h3 style={{ marginTop: '1.5rem', marginBottom: '0.5rem' }}>🙏 謝辞</h3>\n              <p>\n                色覚の多様性に関する理解促進と、より包括的な技術環境の構築に貢献してくださる\n                研究者・開発者・コミュニティの皆様に深く感謝いたします。\n              </p>\n\n              <h3 style={{ marginTop: '1.5rem', marginBottom: '0.5rem' }}>☕ 開発を支援</h3>\n              <p style={{ marginBottom: '1rem' }}>\n                このアプリが役に立ちましたら、開発継続のためのご支援をいただけると大変嬉しいです（完全任意です）。\n              </p>\n              <div style={{ textAlign: 'center' }}>\n                <a\n                  href=\"https://github.com/sponsors\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  style={{\n                    display: 'inline-block',\n                    background: '#EA4AAA',\n                    color: 'white',\n                    padding: '0.75rem 1.5rem',\n                    borderRadius: '0.5rem',\n                    textDecoration: 'none',\n                    fontWeight: '500',\n                    transition: 'background 0.2s'\n                  }}\n                >\n                  💝 GitHub Sponsors で支援\n                </a>\n              </div>\n              <p style={{ \n                fontSize: '0.75rem', \n                color: '#6B7280', \n                textAlign: 'center', \n                margin: '0.5rem 0 0 0' \n              }}>\n                ※ 機能制限はありません。すべて任意のサポートです。\n              </p>\n            </div>\n          </div>\n        );\n      \n      case 'privacy':\n        return (\n          <div>\n            <h2 style={{ color: '#111827', marginBottom: '1rem' }}>プライバシーポリシー</h2>\n            <div style={{ lineHeight: '1.6', color: '#374151' }}>\n              <h3 style={{ marginTop: '1.5rem', marginBottom: '0.5rem' }}>🔒 データ収集について</h3>\n              <p><strong>本アプリは以下のデータを一切収集しません：</strong></p>\n              <ul style={{ paddingLeft: '1.5rem' }}>\n                <li>個人識別情報</li>\n                <li>画像・写真データ</li>\n                <li>位置情報</li>\n                <li>閲覧履歴</li>\n              </ul>\n\n              <h3 style={{ marginTop: '1.5rem', marginBottom: '0.5rem' }}>💾 ローカルデータ</h3>\n              <ul style={{ paddingLeft: '1.5rem' }}>\n                <li>設定情報のみをブラウザ内に保存</li>\n                <li>外部サーバーへの送信なし</li>\n                <li>ブラウザ設定から削除可能</li>\n              </ul>\n\n              <h3 style={{ marginTop: '1.5rem', marginBottom: '0.5rem' }}>📷 カメラ機能</h3>\n              <ul style={{ paddingLeft: '1.5rem' }}>\n                <li>すべての処理が端末内で完結</li>\n                <li>撮影データの外部送信なし</li>\n                <li>アプリ終了時に自動削除</li>\n              </ul>\n\n              <p style={{ \n                background: '#EFF6FF', \n                padding: '1rem', \n                borderRadius: '0.5rem',\n                border: '1px solid #DBEAFE',\n                marginTop: '1rem'\n              }}>\n                詳細は <a href=\"/PRIVACY.md\" target=\"_blank\" rel=\"noopener noreferrer\" style={{ color: '#3B82F6' }}>\n                  完全版プライバシーポリシー\n                </a> をご確認ください。\n              </p>\n            </div>\n          </div>\n        );\n      \n      case 'disclaimer':\n        return (\n          <div>\n            <h2 style={{ color: '#111827', marginBottom: '1rem' }}>免責事項</h2>\n            <div style={{ lineHeight: '1.6', color: '#374151' }}>\n              <div style={{ \n                background: '#FEF3C7', \n                padding: '1rem', \n                borderRadius: '0.5rem',\n                border: '1px solid #FCD34D',\n                marginBottom: '1rem'\n              }}>\n                <p style={{ margin: 0, fontWeight: 'bold' }}>\n                  ⚠️ 重要：本アプリケーションは医療機器ではありません\n                </p>\n              </div>\n\n              <h3 style={{ marginTop: '1.5rem', marginBottom: '0.5rem' }}>❌ 本アプリは以下ではありません</h3>\n              <ul style={{ paddingLeft: '1.5rem' }}>\n                <li>色覚異常の診断ツール</li>\n                <li>治療を目的とした製品</li>\n                <li>医師による診断・治療の代替手段</li>\n              </ul>\n\n              <h3 style={{ marginTop: '1.5rem', marginBottom: '0.5rem' }}>✅ 本アプリの目的</h3>\n              <ul style={{ paddingLeft: '1.5rem' }}>\n                <li>色覚の違いによる見え方の体験・理解促進</li>\n                <li>デジタルコンテンツの色調整支援</li>\n                <li>アクセシビリティ向上のための支援</li>\n              </ul>\n\n              <h3 style={{ marginTop: '1.5rem', marginBottom: '0.5rem' }}>🏥 医療相談の推奨</h3>\n              <p>色覚に関する疑問や不安がある場合は、必ず専門の眼科医師にご相談ください。</p>\n\n              <p style={{ \n                background: '#FEF2F2', \n                padding: '1rem', \n                borderRadius: '0.5rem',\n                border: '1px solid #FECACA',\n                marginTop: '1rem'\n              }}>\n                詳細は <a href=\"/DISCLAIMER.md\" target=\"_blank\" rel=\"noopener noreferrer\" style={{ color: '#3B82F6' }}>\n                  完全版免責事項\n                </a> をご確認ください。\n              </p>\n            </div>\n          </div>\n        );\n      \n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div style={{\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      backgroundColor: 'rgba(0, 0, 0, 0.5)',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      zIndex: 1000,\n      padding: '1rem'\n    }}>\n      <div style={{\n        backgroundColor: 'white',\n        borderRadius: '0.75rem',\n        padding: '2rem',\n        maxWidth: '600px',\n        maxHeight: '80vh',\n        overflow: 'auto',\n        position: 'relative',\n        boxShadow: '0 20px 25px -5px rgb(0 0 0 / 0.1), 0 10px 10px -5px rgb(0 0 0 / 0.04)'\n      }}>\n        <button\n          onClick={onClose}\n          style={{\n            position: 'absolute',\n            top: '1rem',\n            right: '1rem',\n            background: 'none',\n            border: 'none',\n            fontSize: '1.5rem',\n            cursor: 'pointer',\n            color: '#6B7280',\n            width: '2rem',\n            height: '2rem',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center'\n          }}\n        >\n          ×\n        </button>\n        \n        {renderContent()}\n      </div>\n    </div>\n  );\n};","import { useState, useEffect, useCallback } from 'react';\nimport { ColorCircles } from '@components/ColorCircles';\nimport { ColorAdjuster } from '@components/ColorAdjuster';\nimport { ImageUploader } from '@components/ImageUploader';\nimport { ImageViewer } from '@components/ImageViewer';\nimport { CameraCapture } from '@components/CameraCapture';\nimport { AboutModal } from '@components/AboutModal';\nimport type { ColorVisionSettings, ImageFileInfo, ImageProcessingState } from './types/color';\nimport './App.css';\n\n/**\n * ColorWise メインアプリケーションコンポーネント\n */\nfunction App() {\n\n  const [colorVisionSettings, setColorVisionSettings] = useState<ColorVisionSettings>({\n    simulation: {\n      useSimulation: false,\n      simulationType: 'deuteranopia',\n      severity: 1.0,\n      showSimulationInfo: false,\n    },\n    correction: {\n      useCorrection: false,\n      correctionType: 'deuteranopia',\n      strength: 0.2,\n    },\n  });\n\n  // 画像・カメラ機能の状態\n  const [currentTab, setCurrentTab] = useState<'rgb' | 'image' | 'camera'>('rgb');\n\n  // モーダル関連の状態\n  const [showModal, setShowModal] = useState(false);\n  const [modalSection, setModalSection] = useState<'about' | 'credits' | 'privacy' | 'disclaimer'>('about');\n  const [imageInfo, setImageInfo] = useState<ImageFileInfo | null>(null);\n  const [processingState, setProcessingState] = useState<ImageProcessingState>({\n    isProcessing: false,\n    progress: 0,\n    error: null\n  });\n\n  // ウィンドウサイズの管理\n  const [windowWidth, setWindowWidth] = useState<number>(window.innerWidth);\n\n  // 処理状態変更ハンドラ（useCallbackでメモ化）\n  const handleProcessingStateChange = useCallback((isProcessing: boolean, progress: number, error?: string) => {\n    setProcessingState({\n      isProcessing,\n      progress,\n      error: error || null\n    });\n  }, []);\n\n  // ウィンドウサイズの変更を監視\n  useEffect(() => {\n    const handleResize = () => {\n      setWindowWidth(window.innerWidth);\n    };\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // ローカルストレージから設定を読み込み\n  useEffect(() => {\n    const savedColorVisionSettings = localStorage.getItem('colorwise-color-vision-settings');\n    if (savedColorVisionSettings) {\n      try {\n        const parsed = JSON.parse(savedColorVisionSettings);\n        setColorVisionSettings(parsed);\n      } catch (error) {\n        console.error('色覚設定の読み込みに失敗しました:', error);\n      }\n    }\n  }, []);\n\n  // 設定が変更されたらローカルストレージに保存\n  useEffect(() => {\n    localStorage.setItem('colorwise-color-vision-settings', JSON.stringify(colorVisionSettings));\n  }, [colorVisionSettings]);\n\n  // モーダル制御ハンドラー\n  const openModal = (section: 'about' | 'credits' | 'privacy' | 'disclaimer') => {\n    setModalSection(section);\n    setShowModal(true);\n  };\n\n  const closeModal = () => {\n    setShowModal(false);\n  };\n\n  return (\n    <div className=\"app\">\n      <header className=\"app-header\">\n        <div className=\"container\">\n          <h1 className=\"app-title\">\n            <span className=\"app-logo\">🎨</span>\n            ColorWise\n          </h1>\n          <p className=\"app-subtitle\">\n            ColorWise - 色覚支援ツール\n          </p>\n          \n          {/* タブナビゲーション */}\n          <div style={{\n            display: 'flex',\n            gap: '0.5rem',\n            marginTop: '1.5rem',\n            justifyContent: 'center',\n            flexWrap: 'wrap'\n          }}>\n            <button\n              onClick={() => setCurrentTab('rgb')}\n              style={{\n                background: currentTab === 'rgb' ? '#3B82F6' : '#F3F4F6',\n                color: currentTab === 'rgb' ? 'white' : '#374151',\n                padding: '0.75rem 1.5rem',\n                borderRadius: '0.5rem',\n                fontWeight: '500',\n                border: 'none',\n                cursor: 'pointer',\n                fontSize: '0.875rem',\n                transition: 'all 0.2s ease'\n              }}\n            >\n              🎨 色のプレビュー\n            </button>\n            <button\n              onClick={() => setCurrentTab('image')}\n              style={{\n                background: currentTab === 'image' ? '#3B82F6' : '#F3F4F6',\n                color: currentTab === 'image' ? 'white' : '#374151',\n                padding: '0.75rem 1.5rem',\n                borderRadius: '0.5rem',\n                fontWeight: '500',\n                border: 'none',\n                cursor: 'pointer',\n                fontSize: '0.875rem',\n                transition: 'all 0.2s ease'\n              }}\n            >\n              📸 写真\n            </button>\n            <button\n              onClick={() => setCurrentTab('camera')}\n              style={{\n                background: currentTab === 'camera' ? '#3B82F6' : '#F3F4F6',\n                color: currentTab === 'camera' ? 'white' : '#374151',\n                padding: '0.75rem 1.5rem',\n                borderRadius: '0.5rem',\n                fontWeight: '500',\n                border: 'none',\n                cursor: 'pointer',\n                fontSize: '0.875rem',\n                transition: 'all 0.2s ease'\n              }}\n            >\n              📷 カメラ\n            </button>\n          </div>\n        </div>\n      </header>\n\n      <main className=\"app-main\">\n        <div className=\"container\">\n          <div className={currentTab === 'rgb' ? 'app-content' : ''}>\n            {/* RGB調整タブ */}\n            {currentTab === 'rgb' && (\n              <>\n                <section className=\"visualization-section\">\n                  <div className=\"visualization-wrapper\">\n                    <ColorCircles \n                      colorVisionSettings={colorVisionSettings}\n                    />\n                  </div>\n                  <div className=\"section-description\">\n                    <p>\n                      赤・緑・青の3原色の円が重なる様子で、色覚シミュレーションや補正の効果をリアルタイムでプレビューできます。\n                      設定パネルで調整してください。\n                    </p>\n                    {colorVisionSettings.simulation.useSimulation && (\n                      <p>\n                        <strong>シミュレーションモード:</strong> 有効\n                      </p>\n                    )}\n                    {colorVisionSettings.correction.useCorrection && (\n                      <p>\n                        <strong>補正フィルター:</strong> 色覚補正が適用されています\n                      </p>\n                    )}\n                  </div>\n                </section>\n\n                <section className=\"adjustment-section\">\n                  <ColorAdjuster\n                    colorVisionSettings={colorVisionSettings}\n                    onColorVisionSettingsChange={setColorVisionSettings}\n                  />\n                </section>\n              </>\n            )}\n\n            {/* 写真処理タブ */}\n            {currentTab === 'image' && (\n              <div style={{ \n                display: 'grid', \n                gridTemplateColumns: windowWidth > 768 ? '350px 1fr' : '1fr', \n                gap: '2rem',\n                alignItems: 'start'\n              }}>\n                <div style={{ \n                  position: windowWidth > 1400 ? 'sticky' : 'static',\n                  top: '1rem'\n                }}>\n                  <h2 className=\"section-title\" style={{ color: '#9CA3AF', marginBottom: '1rem' }}>Settings</h2>\n                  <ColorAdjuster\n                    colorVisionSettings={colorVisionSettings}\n                    onColorVisionSettingsChange={setColorVisionSettings}\n                  />\n                  <div style={{ marginTop: '2rem' }}>\n                    <ImageUploader\n                      onImageLoad={setImageInfo}\n                      processingState={processingState}\n                      disabled={processingState.isProcessing}\n                    />\n                  </div>\n                </div>\n                <div style={{ width: '100%' }}>\n                  <ImageViewer\n                    imageInfo={imageInfo}\n                    colorVisionSettings={colorVisionSettings}\n                    onProcessingStateChange={handleProcessingStateChange}\n                  />\n                </div>\n              </div>\n            )}\n\n            {/* カメラタブ */}\n            {currentTab === 'camera' && (\n              <div style={{ \n                display: 'grid', \n                gridTemplateColumns: windowWidth > 768 ? '350px 1fr' : '1fr', \n                gap: '2rem',\n                alignItems: 'start'\n              }}>\n                <div style={{ \n                  position: windowWidth > 1400 ? 'sticky' : 'static',\n                  top: '1rem'\n                }}>\n                  <h2 className=\"section-title\" style={{ color: '#9CA3AF', marginBottom: '1rem' }}>Settings</h2>\n                  <ColorAdjuster\n                    colorVisionSettings={colorVisionSettings}\n                    onColorVisionSettingsChange={setColorVisionSettings}\n                  />\n                </div>\n                <div style={{ width: '100%' }}>\n                  <CameraCapture\n                    colorVisionSettings={colorVisionSettings}\n                    onProcessingStateChange={handleProcessingStateChange}\n                  />\n                </div>\n              </div>\n            )}\n          </div>\n\n        </div>\n      </main>\n\n      <footer className=\"app-footer\">\n        <div className=\"container\">\n          <p className=\"footer-text\">\n            © 2025 ColorWise - 色覚支援ツール\n          </p>\n          <p className=\"footer-links\">\n            <button onClick={() => openModal('about')} className=\"footer-link\" style={{ background: 'none', border: 'none', color: 'inherit', textDecoration: 'underline', cursor: 'pointer' }}>このアプリについて</button>\n            <span className=\"footer-separator\">|</span>\n            <button onClick={() => openModal('credits')} className=\"footer-link\" style={{ background: 'none', border: 'none', color: 'inherit', textDecoration: 'underline', cursor: 'pointer' }}>クレジット</button>\n            <span className=\"footer-separator\">|</span>\n            <button onClick={() => openModal('privacy')} className=\"footer-link\" style={{ background: 'none', border: 'none', color: 'inherit', textDecoration: 'underline', cursor: 'pointer' }}>プライバシーポリシー</button>\n            <span className=\"footer-separator\">|</span>\n            <button onClick={() => openModal('disclaimer')} className=\"footer-link\" style={{ background: 'none', border: 'none', color: 'inherit', textDecoration: 'underline', cursor: 'pointer' }}>免責事項</button>\n          </p>\n        </div>\n      </footer>\n\n      <AboutModal \n        isOpen={showModal}\n        onClose={closeModal}\n        activeSection={modalSection}\n      />\n    </div>\n  );\n}\n\nexport default App;","import React from 'react'\nimport ReactDOM from 'react-dom/client'\nimport App from './App.tsx'\nimport './index.css'\n\nReactDOM.createRoot(document.getElementById('root')!).render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n)\n\n// Service Worker registration\nif ('serviceWorker' in navigator) {\n  window.addEventListener('load', () => {\n    navigator.serviceWorker.register('/sw.js')\n      .then((registration) => {\n        console.log('SW registered: ', registration);\n      })\n      .catch((registrationError) => {\n        console.log('SW registration failed: ', registrationError);\n      });\n  });\n}"],"names":["f","require$$0","k","l","m","n","p","q","c","a","g","b","d","e","h","reactJsxRuntime_production_min","jsxRuntimeModule","client","srgbToLinear","linearToSrgb","applyMat3","v","x","y","z","clamp01","clamp255","polyfitLeastSquares","xs","ys","degree","A","i","val","j","AT","transpose","ATA","matMul","ATb","matVecMul","gaussianSolve","M","rows","cols","T","B","r","out","sum","t","Ain","bIn","row","maxRow","pivot","factor","MACHADO_DEUTERANOMALY","buildPolynomialCoeffs","data","coeffs","evalPoly","acc","evaluateMatrix","s","ss","DEGREE","COEFFS","simulateDeutanPoly","rgb","severity","lin","R","G","daltonizeDeutan","alpha","steps","X","Y","simulateLin","Sx","err","correctForDeutan","strength","ColorCircles","colorVisionSettings","width","height","canvasRef","useRef","adjustment","applyColorTransform","transformedRgb","useEffect","canvas","ctx","centerX","centerY","radius","baseRed","baseGreen","baseBlue","transformedRed","transformedGreen","transformedBlue","circles","circle","gradient","jsxs","jsx","Fragment","clamp","value","min","max","ColorAdjuster","onColorVisionSettingsChange","handleSimulationToggle","useCallback","handleSimulationTypeChange","type","handleSimulationSeverityChange","handleCorrectionToggle","handleCorrectionTypeChange","handleCorrectionStrengthChange","processImageData","imageData","onProgress","totalPixels","batchSize","processedPixels","actuallyProcessed","endIndex","progress","resolve","loadImageToCanvas","file","maxWidth","maxHeight","reject","img","ratio","drawImageDataToCanvas","downloadCanvasAsImage","filename","format","quality","blob","url","formatFileSize","bytes","sizes","validateImageFile","maxSize","ImageUploader","onImageLoad","processingState","disabled","dragOver","setDragOver","useState","handleFileSelect","validationError","imageInfo","handleFileInput","event","_a","handleDrop","handleDragOver","handleDragLeave","ImageViewer","onProcessingStateChange","originalCanvasRef","processedCanvasRef","viewMode","setViewMode","originalImageData","setOriginalImageData","processedImageData","setProcessedImageData","error","timeoutId","processed","handleDownload","CameraCapture","videoRef","cameraConfig","setCameraConfig","devices","setDevices","stream","setStream","isProcessingFrame","setIsProcessingFrame","videoDevices","device","toggleCamera","track","prev","constraints","mediaStream","errorMessage","captureAndProcess","video","originalCanvas","processedCanvas","capturePhoto","AboutModal","isOpen","onClose","activeSection","renderContent","App","setColorVisionSettings","currentTab","setCurrentTab","showModal","setShowModal","modalSection","setModalSection","setImageInfo","setProcessingState","windowWidth","setWindowWidth","handleProcessingStateChange","isProcessing","handleResize","savedColorVisionSettings","parsed","openModal","section","closeModal","ReactDOM","React","registration","registrationError"],"mappings":"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","x_google_ignoreList":[0,1,2]}