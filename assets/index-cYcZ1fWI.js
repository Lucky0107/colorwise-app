import{r as p,a as De,R as ze}from"./vendor-nf7bT_Uh.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function o(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=o(s);fetch(s.href,i)}})();var pe={exports:{}},J={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Te=p,Ae=Symbol.for("react.element"),Oe=Symbol.for("react.fragment"),We=Object.prototype.hasOwnProperty,Pe=Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ie={key:!0,ref:!0,__self:!0,__source:!0};function ue(t,r,o){var n,s={},i=null,c=null;o!==void 0&&(i=""+o),r.key!==void 0&&(i=""+r.key),r.ref!==void 0&&(c=r.ref);for(n in r)We.call(r,n)&&!Ie.hasOwnProperty(n)&&(s[n]=r[n]);if(t&&t.defaultProps)for(n in r=t.defaultProps,r)s[n]===void 0&&(s[n]=r[n]);return{$$typeof:Ae,type:t,key:i,ref:c,props:s,_owner:Pe.current}}J.Fragment=Oe;J.jsx=ue;J.jsxs=ue;pe.exports=J;var e=pe.exports,se={},de=De;se.createRoot=de.createRoot,se.hydrateRoot=de.hydrateRoot;function O(t){return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function W(t){return t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055}function me(t,r){const[o,n,s]=r;return[t[0][0]*o+t[0][1]*n+t[0][2]*s,t[1][0]*o+t[1][1]*n+t[1][2]*s,t[2][0]*o+t[2][1]*n+t[2][2]*s]}function I(t){return Math.max(0,Math.min(1,t))}function P(t){return Math.max(0,Math.min(255,Math.round(t)))}function Ge(t,r,o){if(t.length!==r.length)throw new Error("xs and ys must have the same length");const n=t.length,s=o;if(n<s+1)throw new Error(`Need at least degree+1 points (got ${n}, degree ${s})`);const i=Array.from({length:n},()=>Array(s+1).fill(0)),c=r.slice();for(let b=0;b<n;b++){let C=1;for(let m=0;m<=s;m++)i[b][m]=C,C*=t[b]}const g=Le(i),u=Ne(g,i),f=$e(g,c);return Se(u,f)}function Le(t){const r=t.length,o=t[0].length,n=Array.from({length:o},()=>Array(r).fill(0));for(let s=0;s<r;s++)for(let i=0;i<o;i++)n[i][s]=t[s][i];return n}function Ne(t,r){const o=t.length,n=t[0].length,s=r[0].length,i=Array.from({length:o},()=>Array(s).fill(0));for(let c=0;c<o;c++)for(let g=0;g<s;g++){let u=0;for(let f=0;f<n;f++)u+=t[c][f]*r[f][g];i[c][g]=u}return i}function $e(t,r){const o=t.length,n=t[0].length,s=Array(o).fill(0);for(let i=0;i<o;i++){let c=0;for(let g=0;g<n;g++)c+=t[i][g]*r[g];s[i]=c}return s}function Se(t,r){const o=t.length,n=t.map((i,c)=>i.concat([r[c]]));for(let i=0;i<o;i++){let c=i;for(let u=i+1;u<o;u++)Math.abs(n[u][i])>Math.abs(n[c][i])&&(c=u);[n[i],n[c]]=[n[c],n[i]];const g=n[i][i];if(Math.abs(g)<1e-12)throw new Error("Singular matrix in gaussianSolve");for(let u=i;u<=o;u++)n[i][u]/=g;for(let u=0;u<o;u++){if(u===i)continue;const f=n[u][i];for(let y=i;y<=o;y++)n[u][y]-=f*n[i][y]}}return n.map(i=>i[o])}const _e=[{s:0,M:[[1,0,-0],[0,1,0],[-0,-0,1]]},{s:.1,M:[[.866435,.177704,-.044139],[.049567,.939063,.01137],[-.003453,.007233,.99622]]},{s:.2,M:[[.760729,.319078,-.079807],[.090568,.889315,.020117],[-.006027,.013325,.992702]]},{s:.3,M:[[.675425,.43385,-.109275],[.125303,.847755,.026942],[-.00795,.018572,.989378]]},{s:.4,M:[[.605511,.52856,-.134071],[.155318,.812366,.032316],[-.009376,.023176,.9862]]},{s:.5,M:[[.547494,.607765,-.155259],[.181692,.781742,.036566],[-.01041,.027275,.983136]]},{s:.6,M:[[.498864,.674741,-.173604],[.205199,.754872,.039929],[-.011131,.030969,.980162]]},{s:.7,M:[[.457771,.731899,-.18967],[.226409,.731012,.042579],[-.011595,.034333,.977261]]},{s:.8,M:[[.422823,.781057,-.203881],[.245752,.709602,.044646],[-.011843,.037423,.974421]]},{s:.9,M:[[.392952,.82361,-.216562],[.263559,.69021,.046232],[-.01191,.040281,.97163]]},{s:1,M:[[.367322,.860646,-.227968],[.280085,.672501,.047413],[-.01182,.04294,.968881]]}];function He(t,r){const o=t.map(s=>s.s),n=[[],[],[]];for(let s=0;s<3;s++){n[s]=[];for(let i=0;i<3;i++){const c=t.map(u=>u.M[s][i]),g=Ge(o,c,r);n[s][i]=g}}return n}function Ue(t,r){let o=0;for(let n=t.length-1;n>=0;n--)o=o*r+t[n];return o}function fe(t,r){const o=I(r),n=[[0,0,0],[0,0,0],[0,0,0]];for(let s=0;s<3;s++)for(let i=0;i<3;i++)n[s][i]=Ue(t[s][i],o);return n}const Ye=4,xe=He(_e,Ye);function ge(t,r){const o=[O(t[0]/255),O(t[1]/255),O(t[2]/255)],n=fe(xe,r),[s,i,c]=me(n,o);return[P(W(I(s))*255),P(W(I(i))*255),P(W(I(c))*255)]}function Xe(t,r,o=.6,n=3){let s=[O(t[0]/255),O(t[1]/255),O(t[2]/255)];const i=[...s],c=fe(xe,r),g=u=>me(c,u);for(let u=0;u<n;u++){const f=g(s),y=[i[0]-f[0],i[1]-f[1],i[2]-f[2]];s=[I(s[0]+o*y[0]),I(s[1]+o*y[1]),I(s[2]+o*y[2])]}return[P(W(s[0])*255),P(W(s[1])*255),P(W(s[2])*255)]}function ye(t,r=.2,o){const n=Math.max(0,Math.min(1,r));let s;o!==void 0?s=1-Math.max(0,Math.min(1,o)):s=1;const i=[O(t[0]/255),O(t[1]/255),O(t[2]/255)],c=[i[0]*s,i[1]*s,i[2]*s],g=[P(W(c[0])*255),P(W(c[1])*255),P(W(c[2])*255)],u=Xe(g,n,.6,3),y=Math.pow(n,1.2),b=[O(u[0]/255),O(u[1]/255),O(u[2]/255)];let C=[c[0]*(1-y)+b[0]*y,c[1]*(1-y)+b[1]*y,c[2]*(1-y)+b[2]*y];const m=.85,T=.5;if(n>m){const B=(n-m)/(1-m),G=T*B;C=C.map(F=>{const w=F/(1+F);return F*(1-G)+w*G})}return[P(W(I(C[0]))*255),P(W(I(C[1]))*255),P(W(I(C[2]))*255)]}function he(t,r,o){t=t/360,r=r/100,o=o/100;const n=(g,u,f)=>(f<0&&(f+=1),f>1&&(f-=1),f<1/6?g+(u-g)*6*f:f<1/2?u:f<2/3?g+(u-g)*(2/3-f)*6:g);let s,i,c;if(r===0)s=i=c=o;else{const g=o<.5?o*(1+r):o+r-o*r,u=2*o-g;s=n(u,g,t+1/3),i=n(u,g,t),c=n(u,g,t-1/3)}return[Math.round(s*255),Math.round(i*255),Math.round(c*255)]}const qe=({colorVisionSettings:t,width:r,height:o})=>{const n=p.useRef(null),[s,i]=p.useState(null),[c,g]=p.useState(!0),[u,f]=p.useState([]),[y,b]=p.useState(!1),C=Math.min(window.innerWidth-40,600),[m,T]=p.useState(r||o||C),[B,G]=p.useState([]),[F,w]=p.useState([]),M=p.useCallback(()=>{const a=n.current;if(!a)return[];const l=m,h=window.devicePixelRatio||1;a.width=l*h,a.height=l*h;const d=a.getContext("2d");d&&d.scale(h,h);const v=l/2,j=l/2,x=l/2-20,k=[x*.94,x*.74,x*.58,x*.44,x*.33,x*.23],E=[x*.082,x*.07,x*.058,x*.046,x*.036,x*.023],R=[];for(let D=0;D<6;D++){const N=k[D],U=E[D],Z=50+D*7,V=100-D*14;for(let ee=0;ee<24;ee++){const X=ee*15,ce=X*Math.PI/180,Ee=v+Math.cos(ce)*N,Fe=j+Math.sin(ce)*N,Re=`hsl(${X}, ${V}%, ${Z}%)`;let z=he(X,V,Z),te=[z[0],z[1],z[2]];t.simulation.useSimulation&&t.simulation.simulationType==="deuteranopia"&&(z=ge(z,t.simulation.severity),te=[z[0],z[1],z[2]]),t.correction.useCorrection&&t.correction.correctionType==="deuteranopia"&&(z=ye(z,t.correction.strength,t.correction.headroom),te=[z[0],z[1],z[2]]);const Be=`rgb(${z[0]}, ${z[1]}, ${z[2]})`;R.push({hue:X,saturation:V,lightness:Z,rgb:te,position:{x:Ee,y:Fe},ring:D+1,originalColor:Re,finalColor:Be,circleSize:U})}}const A=x*.12;return R.push({hue:0,saturation:0,lightness:100,rgb:[255,255,255],position:{x:v,y:j},ring:0,originalColor:"hsl(0, 0%, 100%)",finalColor:"#ffffff",circleSize:A}),R},[t,m]),L=a=>{const l=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return l?{r:parseInt(l[1],16),g:parseInt(l[2],16),b:parseInt(l[3],16)}:null},$=(a,l,h)=>{a/=255,l/=255,h/=255;const d=Math.max(a,l,h),v=Math.min(a,l,h);let j=0,x=0;const k=(d+v)/2;if(d!==v){const E=d-v;switch(x=k>.5?E/(2-d-v):E/(d+v),d){case a:j=(l-h)/E+(l<h?6:0);break;case l:j=(h-a)/E+2;break;case h:j=(a-l)/E+4;break}j/=6}return{h:j*360,s:x*100,l:k*100}},Y=p.useCallback((a,l,h,d)=>{if(!n.current)return null;const x=(N=>{const U=N.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);return U?{r:parseInt(U[1],10),g:parseInt(U[2],10),b:parseInt(U[3],10)}:null})(l.finalColor);if(!x)return null;a.save(),a.beginPath(),a.arc(l.position.x,l.position.y,h,0,2*Math.PI),a.clip();const k=a.createLinearGradient(l.position.x-h,l.position.y,l.position.x+h,l.position.y),E=d*.7,R=d*.7,A={r:Math.min(255,x.r+(255-x.r)*E*.8),g:Math.min(255,x.g+80*E*.4),b:Math.min(255,x.b+120*E*.4)},D={r:Math.min(255,x.r+80*R*.4),g:Math.min(255,x.g+180*R*.6),b:Math.min(255,x.b+(255-x.b)*R*.8)};return k.addColorStop(0,`rgb(${Math.round(A.r)}, ${Math.round(A.g)}, ${Math.round(A.b)})`),k.addColorStop(.5,l.finalColor),k.addColorStop(1,`rgb(${Math.round(D.r)}, ${Math.round(D.g)}, ${Math.round(D.b)})`),a.fillStyle=k,a.beginPath(),a.arc(l.position.x,l.position.y,h,0,2*Math.PI),a.fill(),a.globalCompositeOperation="overlay",a.globalAlpha=d*.3,a.beginPath(),a.arc(l.position.x,l.position.y,h,0,2*Math.PI),a.fill(),a.restore(),null},[]),S=p.useCallback((a,l)=>{if(!s)return{color:a.finalColor,size:1};const h=n.current;if(!h)return{color:a.finalColor,size:1};const d=Math.sqrt(Math.pow(a.position.x-s.position.x,2)+Math.pow(a.position.y-s.position.y,2)),v=h.width*.5,j=Math.min(1,d/v),x=L(a.finalColor);if(!x)return{color:a.finalColor,size:1};const k=j*l*.6,E=j*l*.3,R=$(x.r,x.g,x.b);R.s*=1-k,R.l=Math.min(100,R.l+E*100);const A=he(R.h,R.s,R.l),D=`rgb(${A[0]}, ${A[1]}, ${A[2]})`,N=1+(1-j)*l*.2;return{color:D,size:N}},[s]),ne=p.useCallback((a,l,h)=>{const{specialEffect:d}=t;if(!d.enabled)return{color:l.finalColor,size:h,gradient:null,skipDrawing:!1};let v=l.finalColor,j=h;const x=null;let k=!1;switch(d.type){case"double-light":Y(a,l,h,d.intensity),k=!0;break;case"depth":{const E=S(l,d.intensity);v=E.color,j=h*E.size;break}}return{color:v,size:j,gradient:x,skipDrawing:k}},[t,Y,S]),we=(a,l,h)=>{var k;const d=Math.max(4,Math.floor(l*.015)),v=Math.min(.4,h.specialEffect.intensity*.4),j=((k=h.specialEffect.details.munker)==null?void 0:k.stripePattern)||"red-green";let x;switch(j){case"red-green":case"red-blue":x=`rgba(255, 60, 60, ${v})`;break;case"green-red":case"green-blue":x=`rgba(60, 255, 60, ${v})`;break;case"blue-red":case"blue-green":x=`rgba(60, 60, 255, ${v})`;break}a.save(),a.fillStyle=x;for(let E=0;E<l;E+=d*2)a.fillRect(E,0,d,l);a.restore()},Ce=(a,l,h)=>{var k;const d=Math.max(4,Math.floor(l*.015)),v=Math.min(.4,h.specialEffect.intensity*.4),j=((k=h.specialEffect.details.munker)==null?void 0:k.stripePattern)||"red-green";let x;switch(j){case"red-green":case"blue-green":x=`rgba(60, 255, 60, ${v})`;break;case"green-red":case"blue-red":x=`rgba(255, 60, 60, ${v})`;break;case"red-blue":case"green-blue":x=`rgba(60, 60, 255, ${v})`;break}a.save(),a.fillStyle=x;for(let E=d;E<l;E+=d*2)a.fillRect(E,0,d,l);a.restore()},ke=(a,l,h,d)=>{const v=d*4;if(a.beginPath(),a.arc(l.position.x,l.position.y,h,0,Math.PI*2),a.fillStyle=l.finalColor,a.fill(),a.globalAlpha=.6,a.beginPath(),a.arc(l.position.x+v,l.position.y,h,0,Math.PI*2),a.fillStyle="rgba(255, 50, 50, 0.4)",a.fill(),a.beginPath(),a.arc(l.position.x-v,l.position.y,h,0,Math.PI*2),a.fillStyle="rgba(50, 255, 255, 0.4)",a.fill(),d>.5){a.globalAlpha=.3;const j=v*.3;a.beginPath(),a.arc(l.position.x,l.position.y-j,h,0,Math.PI*2),a.fillStyle="rgba(50, 255, 50, 0.3)",a.fill(),a.beginPath(),a.arc(l.position.x,l.position.y+j,h,0,Math.PI*2),a.fillStyle="rgba(255, 50, 255, 0.3)",a.fill()}a.globalAlpha=1},_=p.useCallback(()=>{const a=n.current;if(!a||u.length===0)return;const l=a.getContext("2d");if(!l)return;const h=m;l.fillStyle="#ffffff",l.fillRect(0,0,h,h),t.specialEffect.enabled&&t.specialEffect.type==="munker"&&we(l,h,t);const d=h/2-20,v=[d*.082,d*.07,d*.058,d*.046,d*.036,d*.023];u.forEach(j=>{if(j.ring===0)return;let x=v[j.ring-1];const k=ne(l,j,x);x=k.size,!k.skipDrawing&&(t.specialEffect.enabled&&t.specialEffect.type==="watercolor"&&(l.shadowColor=k.color,l.shadowBlur=t.specialEffect.intensity*10,l.shadowOffsetX=0,l.shadowOffsetY=0),t.specialEffect.enabled&&t.specialEffect.type==="glitch"?ke(l,j,x,t.specialEffect.intensity):(l.beginPath(),l.arc(j.position.x,j.position.y,x,0,Math.PI*2),l.fillStyle=k.color,l.fill()),l.shadowBlur=0)}),t.specialEffect.enabled&&t.specialEffect.type==="munker"&&Ce(l,h,t)},[u,t,ne,m]);p.useEffect(()=>{if(!y){const a=M();f(a),b(!0)}},[y,M]),p.useEffect(()=>{const a=()=>{const l=Math.min(window.innerWidth-40,600);T(l)};return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),p.useEffect(()=>{if(y){const a=M();f(a)}},[t,M,y]),p.useEffect(()=>{u.length>0&&_()},[u,_,s,c]),p.useEffect(()=>{s&&t.specialEffect.enabled&&t.specialEffect.type==="depth"&&u.length>0&&_()},[s,t.specialEffect.enabled,t.specialEffect.type,u.length,_]);const K=p.useCallback(a=>{const h={id:Date.now()+Math.random(),x:a.position.x,y:a.position.y,radius:10,opacity:1,color:`hsl(${a.hue}, ${a.saturation}%, ${a.lightness}%)`,startTime:Date.now(),maxRadius:300};G(d=>[...d,h])},[]),ae=p.useCallback(a=>{const l=[];for(let d=0;d<8;d++){const v=d/8*Math.PI*2+(Math.random()-.5)*.5,j=3+Math.random()*4,x=a.ring===0?"#ffffff":`hsl(${a.hue}, ${Math.min(100,a.saturation+20)}%, ${Math.min(80,a.lightness+10)}%)`,k=a.ring===0?4+Math.random()*6:2+Math.random()*3;l.push({id:Date.now()+d,x:a.position.x,y:a.position.y,vx:Math.cos(v)*j,vy:Math.sin(v)*j,life:1,maxLife:200+Math.random()*100,size:k,color:x})}w(d=>[...d,...l])},[]),Me=p.useCallback(a=>{const l=n.current;if(!l)return;const h=l.getBoundingClientRect(),d=a.clientX-h.left,v=a.clientY-h.top,j=m/h.width,x=m/h.height,k=d*j,E=v*x;let R=null,A=1/0;u.forEach(D=>{const N=Math.sqrt(Math.pow(k-D.position.x,2)+Math.pow(E-D.position.y,2));N<A&&(A=N,R=D)}),R&&A<30&&(t.specialEffect.enabled&&t.specialEffect.type==="depth"?(i(R),c&&K(R)):(i(R),c&&(K(R),ae(R))))},[u,c,K,ae,t,m]),le=p.useCallback(()=>{const a=Date.now(),l=h=>1-Math.pow(1-h,3);G(h=>h.map(d=>{const j=(a-d.startTime)/3e4;if(j>=1)return null;const x=d.radius,k=d.maxRadius||80,E=l(j);return{...d,radius:x+E*(k-x),opacity:Math.exp(-j*3)*d.opacity}}).filter(d=>d!==null)),w(h=>h.map(d=>{const v=n.current;if(!v)return null;const j=d.x+d.vx,x=d.y+d.vy,k=d.life-1/d.maxLife;return k<=0||j<-d.size||j>v.width+d.size||x<-d.size||x>v.height+d.size?null:{...d,x:j,y:x,life:k,vx:d.vx*.995,vy:d.vy*.995}}).filter(d=>d!==null))},[]),oe=p.useCallback(()=>{const a=n.current;if(!a||B.length===0&&F.length===0)return;const l=a.getContext("2d");l&&(B.forEach(h=>{l.beginPath(),l.arc(h.x,h.y,h.radius,0,Math.PI*2),l.strokeStyle=h.color;const d=(Date.now()-h.startTime)/3e3,v=Math.max(1.5,3*(1-d*.5));l.lineWidth=v,l.globalAlpha=h.opacity,l.stroke()}),F.forEach(h=>{h.life>.01&&(l.beginPath(),l.arc(h.x,h.y,h.size,0,Math.PI*2),l.fillStyle=h.color,l.globalAlpha=Math.max(0,h.life),l.fill(),l.shadowColor=h.color,l.shadowBlur=8,l.fill(),l.shadowBlur=0)}),l.globalAlpha=1)},[B,F]),H=p.useRef(),Q=p.useCallback(()=>{if(!c||B.length===0&&F.length===0)return;const a=n.current;if(!a)return;const l=a.getContext("2d");l&&(l.clearRect(0,0,a.width,a.height),_(),le(),oe(),H.current=requestAnimationFrame(Q))},[c,B.length,F.length,_,le,oe]);return p.useEffect(()=>(c&&(B.length>0||F.length>0)?H.current=requestAnimationFrame(Q):H.current&&cancelAnimationFrame(H.current),()=>{H.current&&cancelAnimationFrame(H.current)}),[c,B.length,F.length,Q]),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",background:"#ffffff",borderRadius:"1rem",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)",padding:"1.5rem"},children:e.jsx("canvas",{ref:n,onClick:Me,"aria-label":"RGB色調整の視覚化",width:m,height:m,style:{display:"block",width:`${m}px`,height:`${m}px`,cursor:"pointer"}})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"rgba(255, 255, 255, 0.95)",padding:"1rem",borderRadius:"0.5rem",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(0, 0, 0, 0.1)"},children:[e.jsx("input",{type:"checkbox",id:"effect-toggle",checked:c,onChange:a=>g(a.target.checked),style:{width:"18px",height:"18px",cursor:"pointer"}}),e.jsx("label",{htmlFor:"effect-toggle",style:{fontSize:"0.875rem",cursor:"pointer",userSelect:"none",color:"#333"},children:"✨ エフェクトを有効にする"})]})]})},Je=({colorVisionSettings:t,width:r,height:o})=>e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"0"},children:[e.jsx(qe,{colorVisionSettings:t,width:r,height:o}),t.simulation.showSimulationInfo&&e.jsx("div",{style:{position:"absolute",bottom:"1rem",left:"50%",transform:"translateX(-50%)",padding:"0.5rem 1rem",background:"rgba(240, 249, 255, 0.95)",borderRadius:"0.5rem",textAlign:"center",border:"1px solid #bfdbfe",backdropFilter:"blur(4px)",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},children:e.jsxs("span",{style:{fontSize:"0.875rem",color:"#374151",fontWeight:"500"},children:[t.simulation.useSimulation&&e.jsxs(e.Fragment,{children:[t.simulation.simulationType==="deuteranopia"&&"デュータン",t.simulation.simulationType==="protanopia"&&"プロタン",t.simulation.simulationType==="tritanopia"&&"トリタン","シミュレーション (",(t.simulation.severity*100).toFixed(0),"%)"]}),t.correction.useCorrection&&e.jsxs(e.Fragment,{children:[t.simulation.useSimulation&&" | ","補正フィルター (",(t.correction.strength*100).toFixed(0),"%)"]})]})})]});function q(t,r,o){return Math.min(Math.max(t,r),o)}const re=({colorVisionSettings:t,onColorVisionSettingsChange:r})=>{var C;const o=p.useCallback(()=>{r({...t,simulation:{...t.simulation,useSimulation:!t.simulation.useSimulation}})},[t,r]),n=p.useCallback(m=>{r({...t,simulation:{...t.simulation,simulationType:m}})},[t,r]),s=p.useCallback(m=>{r({...t,simulation:{...t.simulation,severity:q(m,0,1)}})},[t,r]),i=p.useCallback(()=>{r({...t,correction:{...t.correction,useCorrection:!t.correction.useCorrection}})},[t,r]),c=p.useCallback(m=>{r({...t,correction:{...t.correction,correctionType:m}})},[t,r]),g=p.useCallback(m=>{r({...t,correction:{...t.correction,strength:q(m,0,1)}})},[t,r]),u=p.useCallback(m=>{r({...t,correction:{...t.correction,headroom:m!==void 0?q(m,0,1):void 0}})},[t,r]),f=p.useCallback(()=>{r({...t,specialEffect:{...t.specialEffect,enabled:!t.specialEffect.enabled}})},[t,r]),y=p.useCallback(m=>{r({...t,specialEffect:{...t.specialEffect,type:m}})},[t,r]),b=p.useCallback(m=>{r({...t,specialEffect:{...t.specialEffect,intensity:q(m,0,1)}})},[t,r]);return e.jsxs("div",{style:{background:"#FFFFFF",borderRadius:"1rem",padding:"1.5rem",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)",maxWidth:"500px",width:"100%"},children:[e.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"#f8fafc",borderRadius:"0.5rem",border:"1px solid #e2e8f0"},children:[e.jsx("h3",{style:{fontSize:"1rem",margin:"0 0 1rem 0",color:"#374151"},children:"色覚シミュレーション"}),e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:t.simulation.useSimulation,onChange:o,style:{accentColor:"#3B82F6"}}),e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500"},children:"色覚シミュレーションを有効にする"})]})}),t.simulation.useSimulation&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:"シミュレーションタイプ:"}),e.jsxs("select",{value:t.simulation.simulationType,onChange:m=>n(m.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #D1D5DB",borderRadius:"0.375rem",fontSize:"0.875rem"},children:[e.jsx("option",{value:"deuteranopia",children:"デュータン（緑色覚異常）"}),e.jsx("option",{value:"protanopia",children:"プロタン（赤色覚異常）"}),e.jsx("option",{value:"tritanopia",children:"トリタン（青色覚異常）"})]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:["シミュレーション強度: ",(t.simulation.severity*100).toFixed(0),"%"]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:t.simulation.severity,onChange:m=>s(Number(m.target.value)),style:{width:"100%",height:"6px"}})]})]})]}),e.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"#fff7ed",borderRadius:"0.5rem",border:"1px solid #fed7aa"},children:[e.jsx("h3",{style:{fontSize:"1rem",margin:"0 0 1rem 0",color:"#374151"},children:"色覚補正フィルター"}),e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:t.correction.useCorrection,onChange:i,style:{accentColor:"#ea580c"}}),e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500"},children:"色覚補正を有効にする"})]})}),t.correction.useCorrection&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:"補正対象:"}),e.jsxs("select",{value:t.correction.correctionType,onChange:m=>c(m.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #D1D5DB",borderRadius:"0.375rem",fontSize:"0.875rem"},children:[e.jsx("option",{value:"deuteranopia",children:"デュータン（緑色覚異常）"}),e.jsx("option",{value:"protanopia",children:"プロタン（赤色覚異常）"}),e.jsx("option",{value:"tritanopia",children:"トリタン（青色覚異常）"})]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:["補正強度: ",(t.correction.strength*100).toFixed(0),"%"]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:t.correction.strength,onChange:m=>g(Number(m.target.value)),style:{width:"100%",height:"6px"}})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[e.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500"},children:["補正ヘッドルーム: ",t.correction.headroom!==void 0?(t.correction.headroom*100).toFixed(0)+"%":"自動"]}),t.correction.headroom!==void 0&&e.jsx("button",{onClick:()=>u(void 0),style:{padding:"0.25rem 0.5rem",fontSize:"0.75rem",background:"#E5E7EB",border:"none",borderRadius:"0.25rem",cursor:"pointer"},children:"自動に戻す"})]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:t.correction.headroom??0,onChange:m=>u(Number(m.target.value)),style:{width:"100%",height:"6px"}}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#6B7280",marginTop:"0.25rem"},children:"飽和を防ぐため入力を暗くします（0%=暗くしない、100%=最大限暗く）"})]})]})]}),e.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"#f3f4ff",borderRadius:"0.5rem",border:"1px solid #c7d2fe"},children:[e.jsx("h3",{style:{fontSize:"1rem",margin:"0 0 1rem 0",color:"#374151"},children:"特殊視覚効果"}),e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:t.specialEffect.enabled,onChange:f,style:{accentColor:"#7c3aed"}}),e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500"},children:"特殊視覚効果を有効にする"})]})}),t.specialEffect.enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:"効果タイプ:"}),e.jsxs("select",{value:t.specialEffect.type,onChange:m=>y(m.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #D1D5DB",borderRadius:"0.375rem",fontSize:"0.875rem"},children:[e.jsx("option",{value:"double-light",children:"💡 ダブルライト効果"}),e.jsx("option",{value:"glitch",children:"🔸 グリッチ効果"}),e.jsx("option",{value:"depth",children:"🎯 遠近感効果"}),e.jsx("option",{value:"watercolor",children:"🎨 ウォーターカラー効果"}),e.jsx("option",{value:"munker",children:"📐 ムンカー錯視"})]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:["効果強度: ",(t.specialEffect.intensity*100).toFixed(0),"%"]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:t.specialEffect.intensity,onChange:m=>b(Number(m.target.value)),style:{width:"100%",height:"6px"}})]}),t.specialEffect.type==="munker"&&e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:"ストライプ色パターン:"}),e.jsxs("select",{value:((C=t.specialEffect.details.munker)==null?void 0:C.stripePattern)||"red-green",onChange:m=>{var B;const T=m.target.value;r({...t,specialEffect:{...t.specialEffect,details:{...t.specialEffect.details,munker:{stripeWidth:((B=t.specialEffect.details.munker)==null?void 0:B.stripeWidth)||8,stripePattern:T}}}})},style:{width:"100%",padding:"0.5rem",border:"1px solid #D1D5DB",borderRadius:"0.375rem",fontSize:"0.875rem"},children:[e.jsx("option",{value:"red-green",children:"🔴Bottom 🟢Top"}),e.jsx("option",{value:"green-red",children:"🟢Bottom 🔴Top"}),e.jsx("option",{value:"red-blue",children:"🔴Bottom 🔵Top"}),e.jsx("option",{value:"blue-red",children:"🔵Bottom 🔴Top"}),e.jsx("option",{value:"green-blue",children:"🟢Bottom 🔵Top"}),e.jsx("option",{value:"blue-green",children:"🔵Bottom 🟢Top"})]})]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280",background:"rgba(255,255,255,0.5)",padding:"0.5rem",borderRadius:"0.25rem",marginTop:"1rem"},children:[t.specialEffect.type==="double-light"&&"2つの光源から照らされているような効果を追加します",t.specialEffect.type==="glitch"&&"映像のバグのような色ズレやノイズを意図的に加えます",t.specialEffect.type==="depth"&&"遠近感を色で表現し、選択した円を近くに見せます",t.specialEffect.type==="watercolor"&&"境界線の色が内側ににじんで見えるような効果を追加します",t.specialEffect.type==="munker"&&"背景のストライプパターンにより色が違って見える錯視効果"]})]})]})]})};async function be(t,r,o){const n=new Uint8ClampedArray(t.data),s=n.length/4,i=Math.max(1e3,Math.floor(s/100));let c=0;for(let g=0;g<n.length;g+=i*4){const u=Math.min(g+i*4,n.length);for(let f=g;f<u;f+=4){let b=[n[f],n[f+1],n[f+2]];r.simulation.useSimulation&&r.simulation.simulationType==="deuteranopia"&&(b=ge(b,r.simulation.severity)),r.correction.useCorrection&&r.correction.correctionType==="deuteranopia"&&(b=ye(b,r.correction.strength,r.correction.headroom)),n[f]=b[0],n[f+1]=b[1],n[f+2]=b[2],c++}if(o){const f=Math.round(c/s*100);o(f)}await new Promise(f=>setTimeout(f,0))}return new ImageData(n,t.width,t.height)}function Ke(t,r=4096,o=4096){return new Promise((n,s)=>{const i=new Image,c=document.createElement("canvas"),g=c.getContext("2d");if(!g){s(new Error("Canvas context not available"));return}i.onload=()=>{let{width:u,height:f}=i;if(u>r||f>o){const b=Math.min(r/u,o/f);u*=b,f*=b}c.width=u,c.height=f,g.drawImage(i,0,0,u,f);const y=g.getImageData(0,0,u,f);n({canvas:c,imageData:y})},i.onerror=()=>{s(new Error("Failed to load image"))},i.src=URL.createObjectURL(t)})}function ie(t,r){const o=t.getContext("2d");if(!o)throw new Error("Canvas context not available");t.width=r.width,t.height=r.height,o.putImageData(r,0,0)}function je(t,r="colorwise-processed.png",o="image/png",n=.9){t.toBlob(s=>{if(!s)return;const i=URL.createObjectURL(s),c=document.createElement("a");c.href=i,c.download=r,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(i)},o,n)}function ve(t){if(t===0)return"0 Bytes";const r=1024,o=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(t)/Math.log(r));return parseFloat((t/Math.pow(r,n)).toFixed(2))+" "+o[n]}function Qe(t,r=10*1024*1024){return t.type.startsWith("image/")?["image/jpeg","image/png","image/webp","image/gif"].includes(t.type)?t.size>r?`ファイルサイズが大きすぎます（最大: ${ve(r)}）`:null:"サポートされていない画像形式です（JPEG, PNG, WebP, GIFのみ）":"画像ファイルを選択してください"}const Ze=({onImageLoad:t,processingState:r,disabled:o=!1})=>{const[n,s]=p.useState(!1),i=p.useCallback(y=>{const b=Qe(y);if(b){alert(b);return}const C=new Image;C.onload=()=>{const m={file:y,url:URL.createObjectURL(y),width:C.width,height:C.height,size:y.size};t(m)},C.src=URL.createObjectURL(y)},[t]),c=p.useCallback(y=>{var C;const b=(C=y.target.files)==null?void 0:C[0];b&&i(b)},[i]),g=p.useCallback(y=>{y.preventDefault(),s(!1);const b=y.dataTransfer.files[0];b&&i(b)},[i]),u=p.useCallback(y=>{y.preventDefault(),s(!0)},[]),f=p.useCallback(y=>{y.preventDefault(),s(!1)},[]);return e.jsxs("div",{style:{background:"#FFFFFF",borderRadius:"0.75rem",padding:"2rem",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)",width:"100%"},children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#111827",margin:"0 0 1.5rem 0"},children:"📸 写真をアップロード"}),e.jsx("div",{onDrop:g,onDragOver:u,onDragLeave:f,style:{border:n?"2px dashed #3B82F6":"2px dashed #D1D5DB",borderRadius:"0.5rem",padding:"3rem 1rem",textAlign:"center",transition:"all 0.2s ease",background:n?"#F0F9FF":"#F9FAFB",cursor:o?"not-allowed":"pointer",opacity:o?.5:1},children:r.isProcessing?e.jsxs("div",{children:[e.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid #E5E7EB",borderTop:"4px solid #3B82F6",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),e.jsxs("p",{style:{color:"#6B7280",fontSize:"1rem",margin:"0 0 0.5rem 0"},children:["処理中... ",r.progress,"%"]}),e.jsx("div",{style:{width:"100%",height:"8px",background:"#E5E7EB",borderRadius:"4px",overflow:"hidden",margin:"0 auto",maxWidth:"200px"},children:e.jsx("div",{style:{width:`${r.progress}%`,height:"100%",background:"#3B82F6",transition:"width 0.3s ease"}})})]}):e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"📷"}),e.jsx("p",{style:{color:"#374151",fontSize:"1.125rem",fontWeight:"500",margin:"0 0 0.5rem 0"},children:"写真をドラッグ&ドロップ"}),e.jsx("p",{style:{color:"#6B7280",fontSize:"0.875rem",margin:"0 0 1.5rem 0"},children:"または下のボタンから選択"}),e.jsxs("label",{style:{display:"inline-block",background:"#3B82F6",color:"white",padding:"0.75rem 2rem",borderRadius:"0.5rem",fontWeight:"500",cursor:o?"not-allowed":"pointer",transition:"background-color 0.2s ease"},children:["ファイルを選択",e.jsx("input",{type:"file",accept:"image/*",onChange:c,disabled:o,style:{display:"none"}})]})]})}),e.jsx("div",{style:{marginTop:"1rem",padding:"1rem",background:"#F0F9FF",borderRadius:"0.5rem",border:"1px solid #BFDBFE"},children:e.jsxs("p",{style:{fontSize:"0.875rem",color:"#374151",margin:"0",lineHeight:"1.5"},children:["💡 ",e.jsx("strong",{children:"対応形式:"})," JPEG, PNG, WebP, GIF",e.jsx("br",{}),"📏 ",e.jsx("strong",{children:"推奨サイズ:"})," 10MB以下、1920×1080px以下"]})}),r.error&&e.jsx("div",{style:{marginTop:"1rem",padding:"1rem",background:"#FEF2F2",borderRadius:"0.5rem",border:"1px solid #FECACA"},children:e.jsxs("p",{style:{fontSize:"0.875rem",color:"#DC2626",margin:"0",fontWeight:"500"},children:["❌ エラー: ",r.error]})}),e.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]})},Ve=({imageInfo:t,colorVisionSettings:r,onProcessingStateChange:o})=>{const n=p.useRef(null),s=p.useRef(null),[i,c]=p.useState("processed"),[g,u]=p.useState(null),[f,y]=p.useState(null);p.useEffect(()=>{if(!t){u(null),y(null);return}(async()=>{try{o(!0,0);const{imageData:m}=await Ke(t.file);u(m),n.current&&ie(n.current,m)}catch{o(!1,0,"画像の読み込みに失敗しました")}})()},[t]),p.useEffect(()=>{if(!g)return;const C=setTimeout(()=>{(async()=>{try{o(!0,0);const T=await be(g,r,B=>{o(!0,B)});y(T),s.current&&ie(s.current,T),o(!1,100)}catch{o(!1,0,"画像処理に失敗しました")}})()},100);return()=>clearTimeout(C)},[g,r]);const b=()=>{if(!s.current||!f)return;const C=`colorwise-${(t==null?void 0:t.file.name)||"processed"}.png`;je(s.current,C)};return t?e.jsxs("div",{style:{background:"#FFFFFF",borderRadius:"0.75rem",padding:"1.5rem",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)",width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#111827",margin:"0 0 0.5rem 0"},children:"🖼️ 画像プレビュー"}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"#6B7280",margin:"0"},children:[t.file.name," (",t.width,"×",t.height,", ",ve(t.size),")"]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsxs("select",{value:i,onChange:C=>c(C.target.value),style:{padding:"0.5rem",border:"1px solid #D1D5DB",borderRadius:"0.375rem",fontSize:"0.875rem"},children:[e.jsx("option",{value:"original",children:"元画像"}),e.jsx("option",{value:"processed",children:"変換済み"}),e.jsx("option",{value:"split",children:"分割表示"})]}),e.jsx("button",{onClick:b,disabled:!f,style:{background:f?"#10B981":"#D1D5DB",color:"white",padding:"0.5rem 1rem",borderRadius:"0.375rem",fontWeight:"500",border:"none",cursor:f?"pointer":"not-allowed",fontSize:"0.875rem"},children:"💾 ダウンロード"})]})]}),e.jsxs("div",{style:{borderRadius:"0.5rem",overflow:"auto",background:"#F3F4F6",position:"relative",maxHeight:"80vh"},children:[i==="split"&&e.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx("canvas",{ref:n,style:{maxWidth:"100%",height:"auto",display:"block"}}),e.jsx("div",{style:{position:"absolute",top:"0.5rem",left:"0.5rem",background:"rgba(0,0,0,0.7)",color:"white",padding:"0.25rem 0.5rem",borderRadius:"0.25rem",fontSize:"0.75rem",fontWeight:"500"},children:"元画像"})]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("canvas",{ref:s,style:{maxWidth:"100%",height:"auto",display:"block"}}),e.jsx("div",{style:{position:"absolute",top:"0.5rem",left:"0.5rem",background:"rgba(0,0,0,0.7)",color:"white",padding:"0.25rem 0.5rem",borderRadius:"0.25rem",fontSize:"0.75rem",fontWeight:"500"},children:"変換済み"})]})]}),i==="original"&&e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx("canvas",{ref:n,style:{maxWidth:"100%",height:"auto",display:"block"}})}),i==="processed"&&e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx("canvas",{ref:s,style:{maxWidth:"100%",height:"auto",display:"block"}})})]}),e.jsx("div",{style:{marginTop:"1rem",padding:"1rem",background:"#F0F9FF",borderRadius:"0.5rem",border:"1px solid #BFDBFE"},children:e.jsxs("p",{style:{fontSize:"0.875rem",color:"#374151",margin:"0",lineHeight:"1.5"},children:["🔄 ",e.jsx("strong",{children:"リアルタイム処理:"})," 左のスライダー調整が即座に反映されます",e.jsx("br",{}),"💾 ",e.jsx("strong",{children:"ダウンロード:"})," 処理結果をPNG形式で保存できます"]})})]}):e.jsxs("div",{style:{background:"#F9FAFB",borderRadius:"0.75rem",padding:"3rem",textAlign:"center",border:"2px dashed #D1D5DB"},children:[e.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"🖼️"}),e.jsx("p",{style:{color:"#6B7280",fontSize:"1.125rem",margin:"0"},children:"画像を選択してください"})]})},et=({colorVisionSettings:t,onProcessingStateChange:r})=>{const o=p.useRef(null),n=p.useRef(null),s=p.useRef(null),[i,c]=p.useState({isActive:!1,facingMode:"environment",resolution:{width:1280,height:720}}),[g,u]=p.useState([]),[f,y]=p.useState(null),[b,C]=p.useState(!1),[m,T]=p.useState("processed");p.useEffect(()=>{(async()=>{try{const L=(await navigator.mediaDevices.enumerateDevices()).filter($=>$.kind==="videoinput");u(L)}catch(M){console.error("デバイス取得エラー:",M)}})()},[]);const B=p.useCallback(async()=>{if(i.isActive&&f){f.getTracks().forEach(w=>w.stop()),y(null),c(w=>({...w,isActive:!1}));return}if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){r(!1,0,"お使いのブラウザはカメラアクセスに対応していません");return}try{r(!0,0,"");const w={video:i.deviceId?{deviceId:{exact:i.deviceId}}:{facingMode:i.facingMode}},M=await navigator.mediaDevices.getUserMedia(w);y(M),c(L=>({...L,isActive:!0})),o.current&&(o.current.srcObject=M,o.current.onloadedmetadata=()=>{r(!1,100,"")})}catch(w){let M="カメラにアクセスできませんでした";w instanceof Error&&(w.name==="NotAllowedError"?M="カメラアクセスが拒否されました。ブラウザの設定を確認してください":w.name==="NotFoundError"?M="カメラが見つかりませんでした":w.name==="NotReadableError"?M="カメラが他のアプリケーションで使用中です":M=`カメラエラー: ${w.message}`),r(!1,0,M)}},[i,f,r]),G=p.useCallback(async()=>{if(!o.current||!n.current||!s.current||b)return;const w=o.current,M=n.current,L=s.current;M.width=w.videoWidth,M.height=w.videoHeight,L.width=w.videoWidth,L.height=w.videoHeight;const $=M.getContext("2d");if(!$)return;$.drawImage(w,0,0);const Y=$.getImageData(0,0,M.width,M.height);C(!0),r(!0,50,"画像を処理中...");try{const S=await be(Y,t);ie(L,S),r(!1,100,"処理完了")}catch(S){console.error("フレーム処理エラー:",S),r(!1,0,"処理中にエラーが発生しました")}finally{C(!1)}},[t,b,r]),F=p.useCallback(()=>{if(!s.current)return;const M=`colorwise-capture-${new Date().toISOString().replace(/[:.]/g,"-")}.png`;je(s.current,M)},[]);return e.jsxs("div",{style:{background:"#FFFFFF",borderRadius:"0.75rem",padding:"1.5rem",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)",width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#111827",margin:"0"},children:"📷 カメラキャプチャ"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[g.length>1&&e.jsxs("select",{value:i.deviceId||"",onChange:w=>c(M=>({...M,deviceId:w.target.value})),disabled:i.isActive,style:{padding:"0.5rem",border:"1px solid #D1D5DB",borderRadius:"0.375rem",fontSize:"0.875rem"},children:[e.jsx("option",{value:"",children:"デフォルト"}),g.map(w=>e.jsx("option",{value:w.deviceId,children:w.label||`カメラ ${w.deviceId.slice(0,8)}`},w.deviceId))]}),e.jsxs("select",{value:m,onChange:w=>T(w.target.value),style:{padding:"0.5rem",border:"1px solid #D1D5DB",borderRadius:"0.375rem",fontSize:"0.875rem"},children:[e.jsx("option",{value:"original",children:"元画像"}),e.jsx("option",{value:"processed",children:"変換済み"}),e.jsx("option",{value:"split",children:"分割表示"})]}),e.jsx("button",{onClick:B,style:{background:i.isActive?"#DC2626":"#10B981",color:"white",padding:"0.5rem 1rem",borderRadius:"0.375rem",fontWeight:"500",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:i.isActive?"⏹️ 停止":"📹 カメラを起動"}),i.isActive&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:G,disabled:b,style:{background:b?"#9CA3AF":"#059669",color:"white",padding:"0.5rem 1rem",borderRadius:"0.375rem",fontWeight:"500",border:"none",cursor:b?"not-allowed":"pointer",fontSize:"0.875rem"},children:b?"🔄 処理中...":"📸 撮影"}),e.jsx("button",{onClick:F,disabled:!s.current,style:{background:"#3B82F6",color:"white",padding:"0.5rem 1rem",borderRadius:"0.375rem",fontWeight:"500",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:"💾 保存"})]})]})]}),e.jsx("div",{style:{borderRadius:"0.5rem",overflow:"auto",background:"#F3F4F6",position:"relative",minHeight:"400px",maxHeight:"80vh"},children:i.isActive?e.jsxs(e.Fragment,{children:[e.jsx("video",{ref:o,autoPlay:!0,playsInline:!0,muted:!0,style:{display:"none"}}),m==="split"&&e.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx("canvas",{ref:n,style:{maxWidth:"100%",height:"auto",display:"block"}}),e.jsx("div",{style:{position:"absolute",top:"0.5rem",left:"0.5rem",background:"rgba(0,0,0,0.7)",color:"white",padding:"0.25rem 0.5rem",borderRadius:"0.25rem",fontSize:"0.75rem",fontWeight:"500"},children:"オリジナル"})]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("canvas",{ref:s,style:{maxWidth:"100%",height:"auto",display:"block"}}),e.jsx("div",{style:{position:"absolute",top:"0.5rem",left:"0.5rem",background:"rgba(0,0,0,0.7)",color:"white",padding:"0.25rem 0.5rem",borderRadius:"0.25rem",fontSize:"0.75rem",fontWeight:"500"},children:"処理後"}),b&&e.jsx("div",{style:{position:"absolute",top:"0.5rem",right:"0.5rem",background:"rgba(0,0,0,0.7)",color:"white",padding:"0.25rem 0.5rem",borderRadius:"0.25rem",fontSize:"0.75rem"},children:"処理中..."})]})]}),m==="original"&&e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx("canvas",{ref:n,style:{maxWidth:"100%",height:"auto",display:"block"}})}),m==="processed"&&e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx("canvas",{ref:s,style:{maxWidth:"100%",height:"auto",display:"block"}})})]}):e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"300px",flexDirection:"column",gap:"1rem"},children:[e.jsx("div",{style:{fontSize:"3rem"},children:"📹"}),e.jsx("p",{style:{color:"#6B7280",fontSize:"1.125rem",margin:"0"},children:"カメラを起動してください"})]})}),e.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"#F0F9FF",borderRadius:"0.5rem",border:"1px solid #BFDBFE"},children:[e.jsxs("p",{style:{fontSize:"0.875rem",color:"#374151",margin:"0 0 0.5rem 0",lineHeight:"1.5"},children:["📸 ",e.jsx("strong",{children:"撮影:"})," 「撮影」ボタンで静止画をキャプチャし、色覚変換を適用",e.jsx("br",{}),"💾 ",e.jsx("strong",{children:"保存:"})," 処理後の画像をPNG形式でダウンロードできます"]}),e.jsxs("p",{style:{fontSize:"0.75rem",color:"#6B7280",margin:"0",lineHeight:"1.4",fontStyle:"italic"},children:["⚠️ ",e.jsx("strong",{children:"カメラアクセスのヒント:"}),e.jsx("br",{}),"• ブラウザでカメラ許可が必要です",e.jsx("br",{}),"• 他のアプリでカメラを使用中でないか確認してください",e.jsx("br",{}),"• HTTPSでない場合、一部ブラウザで制限される場合があります"]})]})]})},tt=({isOpen:t,onClose:r,activeSection:o})=>{if(!t)return null;const n=()=>{switch(o){case"about":return e.jsxs("div",{children:[e.jsx("h2",{style:{color:"#111827",marginBottom:"1rem"},children:"このアプリについて"}),e.jsxs("div",{style:{lineHeight:"1.6",color:"#374151"},children:[e.jsxs("p",{children:[e.jsx("strong",{children:"ColorWise（カラーワイズ）"}),"は、色覚の多様性に配慮した色表示支援ツールです。"]}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"🎯 目的"}),e.jsxs("ul",{style:{paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"色覚の違いによる見え方の体験・理解促進"}),e.jsx("li",{children:"デジタルコンテンツの色調整支援"}),e.jsx("li",{children:"より包括的なデザイン環境の実現"})]}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"⚠️ 重要な注意"}),e.jsxs("ul",{style:{paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"本アプリは医療機器ではありません"}),e.jsx("li",{children:"色覚異常の診断・治療を目的としていません"}),e.jsx("li",{children:"医師の診断に代わるものではありません"})]}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"🔒 プライバシー"}),e.jsxs("ul",{style:{paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"すべての処理は端末内で完結"}),e.jsx("li",{children:"画像データの外部送信なし"}),e.jsx("li",{children:"個人情報の収集なし"})]}),e.jsx("div",{style:{marginTop:"2rem",paddingTop:"1rem",borderTop:"1px solid #E5E7EB",fontSize:"0.75rem",color:"#6B7280"},children:e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{children:"Version:"})," ","3.0.2",e.jsxs("span",{children:[" (Built: ",new Date("2025-10-19T14:31:52.156Z").toLocaleString("ja-JP"),")"]})]})})]})]});case"credits":return e.jsxs("div",{children:[e.jsx("h2",{style:{color:"#111827",marginBottom:"1rem"},children:"クレジット・謝辞"}),e.jsxs("div",{style:{lineHeight:"1.6",color:"#374151"},children:[e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"🎓 学術的基盤"}),e.jsx("p",{children:"本アプリの色覚シミュレーション機能は、以下の研究成果を参考に実装されています："}),e.jsxs("div",{style:{background:"#F9FAFB",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #E5E7EB",marginTop:"0.5rem"},children:[e.jsx("p",{style:{fontWeight:"bold",margin:"0 0 0.5rem 0"},children:"Machado, G.M., Oliveira, M.M., and Fernandes, L.A.F. (2009)"}),e.jsx("p",{style:{fontStyle:"italic",margin:"0 0 0.5rem 0"},children:'"A Physiologically-based Model for Simulation of Color Vision Deficiency"'}),e.jsx("p",{style:{fontSize:"0.875rem",margin:"0"},children:"IEEE Transactions on Visualization and Computer Graphics, Vol.15, No.6, pp.1291-1298"})]}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"🛠️ 技術スタック"}),e.jsxs("ul",{style:{paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"React 18 + TypeScript"}),e.jsx("li",{children:"Vite (ビルドツール)"}),e.jsx("li",{children:"PWA (Service Worker + Manifest)"}),e.jsx("li",{children:"Canvas API (画像処理)"})]}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"🙏 謝辞"}),e.jsx("p",{children:"色覚の多様性に関する理解促進と、より包括的な技術環境の構築に貢献してくださる 研究者・開発者・コミュニティの皆様に深く感謝いたします。"}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"☕ 開発を支援"}),e.jsx("p",{style:{marginBottom:"1rem"},children:"このアプリが役に立ちましたら、開発継続のためのご支援をいただけると大変嬉しいです（完全任意です）。"}),e.jsx("div",{style:{textAlign:"center"},children:e.jsx("a",{href:"https://github.com/sponsors",target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",background:"#EA4AAA",color:"white",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",textDecoration:"none",fontWeight:"500",transition:"background 0.2s"},children:"💝 GitHub Sponsors で支援"})}),e.jsx("p",{style:{fontSize:"0.75rem",color:"#6B7280",textAlign:"center",margin:"0.5rem 0 0 0"},children:"※ 機能制限はありません。すべて任意のサポートです。"})]})]});case"privacy":return e.jsxs("div",{children:[e.jsx("h2",{style:{color:"#111827",marginBottom:"1rem"},children:"プライバシーポリシー"}),e.jsxs("div",{style:{lineHeight:"1.6",color:"#374151"},children:[e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"🔒 データ収集について"}),e.jsx("p",{children:e.jsx("strong",{children:"本アプリは以下のデータを一切収集しません："})}),e.jsxs("ul",{style:{paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"個人識別情報"}),e.jsx("li",{children:"画像・写真データ"}),e.jsx("li",{children:"位置情報"}),e.jsx("li",{children:"閲覧履歴"})]}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"💾 ローカルデータ"}),e.jsxs("ul",{style:{paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"設定情報のみをブラウザ内に保存"}),e.jsx("li",{children:"外部サーバーへの送信なし"}),e.jsx("li",{children:"ブラウザ設定から削除可能"})]}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"📷 カメラ機能"}),e.jsxs("ul",{style:{paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"すべての処理が端末内で完結"}),e.jsx("li",{children:"撮影データの外部送信なし"}),e.jsx("li",{children:"アプリ終了時に自動削除"})]}),e.jsxs("p",{style:{background:"#EFF6FF",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #DBEAFE",marginTop:"1rem"},children:["詳細は ",e.jsx("a",{href:"/PRIVACY.md",target:"_blank",rel:"noopener noreferrer",style:{color:"#3B82F6"},children:"完全版プライバシーポリシー"})," をご確認ください。"]})]})]});case"disclaimer":return e.jsxs("div",{children:[e.jsx("h2",{style:{color:"#111827",marginBottom:"1rem"},children:"免責事項"}),e.jsxs("div",{style:{lineHeight:"1.6",color:"#374151"},children:[e.jsx("div",{style:{background:"#FEF3C7",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #FCD34D",marginBottom:"1rem"},children:e.jsx("p",{style:{margin:0,fontWeight:"bold"},children:"⚠️ 重要：本アプリケーションは医療機器ではありません"})}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"❌ 本アプリは以下ではありません"}),e.jsxs("ul",{style:{paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"色覚異常の診断ツール"}),e.jsx("li",{children:"治療を目的とした製品"}),e.jsx("li",{children:"医師による診断・治療の代替手段"})]}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"✅ 本アプリの目的"}),e.jsxs("ul",{style:{paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"色覚の違いによる見え方の体験・理解促進"}),e.jsx("li",{children:"デジタルコンテンツの色調整支援"}),e.jsx("li",{children:"アクセシビリティ向上のための支援"})]}),e.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"🏥 医療相談の推奨"}),e.jsx("p",{children:"色覚に関する疑問や不安がある場合は、必ず専門の眼科医師にご相談ください。"}),e.jsxs("p",{style:{background:"#FEF2F2",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #FECACA",marginTop:"1rem"},children:["詳細は ",e.jsx("a",{href:"/DISCLAIMER.md",target:"_blank",rel:"noopener noreferrer",style:{color:"#3B82F6"},children:"完全版免責事項"})," をご確認ください。"]})]})]});default:return null}};return e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",padding:"2rem",maxWidth:"600px",maxHeight:"80vh",overflow:"auto",position:"relative",boxShadow:"0 20px 25px -5px rgb(0 0 0 / 0.1), 0 10px 10px -5px rgb(0 0 0 / 0.04)"},children:[e.jsx("button",{onClick:r,style:{position:"absolute",top:"1rem",right:"1rem",background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#6B7280",width:"2rem",height:"2rem",display:"flex",alignItems:"center",justifyContent:"center"},children:"×"}),n()]})})},rt=({size:t="medium",className:r="",style:o={}})=>{const s=(()=>{if(typeof t=="number")return t;switch(t){case"small":return 24;case"medium":return 32;case"large":return 48;default:return 32}})();return e.jsxs("svg",{width:s,height:s,viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",className:r,style:{...o,shapeRendering:"geometricPrecision",imageRendering:"optimizeQuality",filter:"drop-shadow(0 0 8px rgba(255, 255, 255, 0.4))"},children:[e.jsxs("defs",{children:[e.jsxs("filter",{id:"flare",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsxs("radialGradient",{id:"purpleGlow",children:[e.jsx("stop",{offset:"0%",stopColor:"hsl(270, 85%, 75%)",stopOpacity:"1"}),e.jsx("stop",{offset:"70%",stopColor:"hsl(270, 85%, 60%)",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"hsl(270, 85%, 50%)",stopOpacity:"1"})]}),e.jsxs("radialGradient",{id:"magentaGlow",children:[e.jsx("stop",{offset:"0%",stopColor:"hsl(300, 85%, 75%)",stopOpacity:"1"}),e.jsx("stop",{offset:"70%",stopColor:"hsl(300, 85%, 60%)",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"hsl(300, 85%, 50%)",stopOpacity:"1"})]}),e.jsxs("radialGradient",{id:"pinkGlow",children:[e.jsx("stop",{offset:"0%",stopColor:"hsl(330, 85%, 75%)",stopOpacity:"1"}),e.jsx("stop",{offset:"70%",stopColor:"hsl(330, 85%, 60%)",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"hsl(330, 85%, 50%)",stopOpacity:"1"})]}),e.jsxs("radialGradient",{id:"redGlow",children:[e.jsx("stop",{offset:"0%",stopColor:"hsl(0, 85%, 75%)",stopOpacity:"1"}),e.jsx("stop",{offset:"70%",stopColor:"hsl(0, 85%, 60%)",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"hsl(0, 85%, 50%)",stopOpacity:"1"})]}),e.jsxs("radialGradient",{id:"orangeGlow",children:[e.jsx("stop",{offset:"0%",stopColor:"hsl(30, 85%, 75%)",stopOpacity:"1"}),e.jsx("stop",{offset:"70%",stopColor:"hsl(30, 85%, 60%)",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"hsl(30, 85%, 50%)",stopOpacity:"1"})]}),e.jsxs("radialGradient",{id:"yellowGlow",children:[e.jsx("stop",{offset:"0%",stopColor:"hsl(60, 85%, 75%)",stopOpacity:"1"}),e.jsx("stop",{offset:"70%",stopColor:"hsl(60, 85%, 60%)",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"hsl(60, 85%, 50%)",stopOpacity:"1"})]}),e.jsxs("radialGradient",{id:"yellowGreenGlow",children:[e.jsx("stop",{offset:"0%",stopColor:"hsl(90, 85%, 75%)",stopOpacity:"1"}),e.jsx("stop",{offset:"70%",stopColor:"hsl(90, 85%, 60%)",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"hsl(90, 85%, 50%)",stopOpacity:"1"})]}),e.jsxs("radialGradient",{id:"greenGlow",children:[e.jsx("stop",{offset:"0%",stopColor:"hsl(120, 85%, 75%)",stopOpacity:"1"}),e.jsx("stop",{offset:"70%",stopColor:"hsl(120, 85%, 60%)",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"hsl(120, 85%, 50%)",stopOpacity:"1"})]}),e.jsxs("radialGradient",{id:"blueGreenGlow",children:[e.jsx("stop",{offset:"0%",stopColor:"hsl(150, 85%, 75%)",stopOpacity:"1"}),e.jsx("stop",{offset:"70%",stopColor:"hsl(150, 85%, 60%)",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"hsl(150, 85%, 50%)",stopOpacity:"1"})]}),e.jsxs("radialGradient",{id:"cyanGlow",children:[e.jsx("stop",{offset:"0%",stopColor:"hsl(180, 85%, 75%)",stopOpacity:"1"}),e.jsx("stop",{offset:"70%",stopColor:"hsl(180, 85%, 60%)",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"hsl(180, 85%, 50%)",stopOpacity:"1"})]}),e.jsxs("radialGradient",{id:"lightBlueGlow",children:[e.jsx("stop",{offset:"0%",stopColor:"hsl(210, 85%, 75%)",stopOpacity:"1"}),e.jsx("stop",{offset:"70%",stopColor:"hsl(210, 85%, 60%)",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"hsl(210, 85%, 50%)",stopOpacity:"1"})]}),e.jsxs("radialGradient",{id:"blueGlow",children:[e.jsx("stop",{offset:"0%",stopColor:"hsl(240, 85%, 75%)",stopOpacity:"1"}),e.jsx("stop",{offset:"70%",stopColor:"hsl(240, 85%, 60%)",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"hsl(240, 85%, 50%)",stopOpacity:"1"})]})]}),e.jsx("circle",{cx:"256",cy:"106",r:"32",fill:"url(#purpleGlow)",filter:"url(#flare)"})," ",e.jsx("circle",{cx:"331",cy:"131",r:"32",fill:"url(#magentaGlow)",filter:"url(#flare)"})," ",e.jsx("circle",{cx:"385.8",cy:"181",r:"32",fill:"url(#pinkGlow)",filter:"url(#flare)"})," ",e.jsx("circle",{cx:"406",cy:"256",r:"32",fill:"url(#redGlow)",filter:"url(#flare)"})," ",e.jsx("circle",{cx:"385.8",cy:"331",r:"32",fill:"url(#orangeGlow)",filter:"url(#flare)"})," ",e.jsx("circle",{cx:"331",cy:"381",r:"32",fill:"url(#yellowGlow)",filter:"url(#flare)"})," ",e.jsx("circle",{cx:"256",cy:"406",r:"32",fill:"url(#yellowGreenGlow)",filter:"url(#flare)"})," ",e.jsx("circle",{cx:"181",cy:"381",r:"32",fill:"url(#greenGlow)",filter:"url(#flare)"})," ",e.jsx("circle",{cx:"126.2",cy:"331",r:"32",fill:"url(#blueGreenGlow)",filter:"url(#flare)"})," ",e.jsx("circle",{cx:"106",cy:"256",r:"32",fill:"url(#cyanGlow)",filter:"url(#flare)"})," ",e.jsx("circle",{cx:"126.2",cy:"181",r:"32",fill:"url(#lightBlueGlow)",filter:"url(#flare)"})," ",e.jsx("circle",{cx:"181",cy:"131",r:"32",fill:"url(#blueGlow)",filter:"url(#flare)"})," "]})};function st(){const[t,r]=p.useState({simulation:{useSimulation:!1,simulationType:"deuteranopia",severity:.2,showSimulationInfo:!1},correction:{useCorrection:!1,correctionType:"deuteranopia",strength:.2},specialEffect:{enabled:!1,type:"double-light",intensity:.5,details:{doubleLight:{light1Position:{x:.25,y:.25},light2Position:{x:.75,y:.75}},glitch:{offsetAmount:2,noiseLevel:.1},depth:{focusedRing:void 0},munker:{stripeWidth:8,stripePattern:"red-green"},watercolor:{blurRadius:5,spreadAmount:.3}}}}),[o,n]=p.useState("rgb"),[s,i]=p.useState(!1),[c,g]=p.useState("about"),[u,f]=p.useState(null),[y,b]=p.useState({isProcessing:!1,progress:0,error:null}),[C,m]=p.useState(window.innerWidth),T=p.useCallback((F,w,M)=>{b({isProcessing:F,progress:w,error:M||null})},[]);p.useEffect(()=>{const F=()=>{m(window.innerWidth)};return window.addEventListener("resize",F),()=>window.removeEventListener("resize",F)},[]),p.useEffect(()=>{const F=localStorage.getItem("colorwise-color-vision-settings");if(F)try{const w=JSON.parse(F);r(w)}catch(w){console.error("色覚設定の読み込みに失敗しました:",w)}},[]),p.useEffect(()=>{localStorage.setItem("colorwise-color-vision-settings",JSON.stringify(t))},[t]);const B=F=>{g(F),i(!0)},G=()=>{i(!1)};return e.jsxs("div",{className:"app",children:[e.jsx("header",{className:"app-header",children:e.jsxs("div",{className:"container",children:[e.jsxs("h1",{className:"app-title",children:[e.jsx(rt,{size:"large",className:"app-logo"}),"ColorWise"]}),e.jsx("p",{className:"app-subtitle",children:"ColorWise - 色の世界を、もっと楽しく"})]})}),e.jsxs("main",{className:"app-main",children:[e.jsx("nav",{className:"tab-navigation",children:e.jsxs("div",{className:"tab-buttons",children:[e.jsx("button",{onClick:()=>n("rgb"),className:`tab-button ${o==="rgb"?"active":""}`,children:"プレビュー"}),e.jsxs("button",{onClick:()=>n("image"),className:`tab-button ${o==="image"?"active":""}`,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",style:{marginRight:"0.5rem",verticalAlign:"middle"},children:[e.jsx("path",{d:"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"写真"]}),e.jsxs("button",{onClick:()=>n("camera"),className:`tab-button ${o==="camera"?"active":""}`,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{marginRight:"0.5rem",verticalAlign:"middle"},children:[e.jsx("path",{d:"M14.5 4h-5L7 7H4a2 2 0 00-2 2v9a2 2 0 002 2h16a2 2 0 002-2V9a2 2 0 00-2-2h-3l-2.5-3z"}),e.jsx("circle",{cx:"12",cy:"13",r:"3"})]}),"カメラ"]})]})}),e.jsx("div",{className:"container",children:e.jsxs("div",{className:o==="rgb"?"app-content":"",children:[o==="rgb"&&e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"visualization-section",children:[e.jsx("div",{className:"visualization-wrapper",children:e.jsx(Je,{colorVisionSettings:t})}),e.jsx("div",{className:"section-description",children:e.jsx("p",{children:"24色相環で様々な色の見え方を、色覚シミュレーションや補正の効果をリアルタイムでプレビューできます。 設定パネルで調整してください。"})})]}),e.jsx("section",{className:"adjustment-section",children:e.jsx(re,{colorVisionSettings:t,onColorVisionSettingsChange:r})})]}),o==="image"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:C>768?"350px 1fr":"1fr",gap:"2rem",alignItems:"start"},children:[e.jsxs("div",{style:{position:C>1400?"sticky":"static",top:"1rem"},children:[e.jsx("h2",{className:"section-title",style:{color:"#9CA3AF",marginBottom:"1rem"},children:"Settings"}),e.jsx(re,{colorVisionSettings:t,onColorVisionSettingsChange:r}),e.jsx("div",{style:{marginTop:"2rem"},children:e.jsx(Ze,{onImageLoad:f,processingState:y,disabled:y.isProcessing})})]}),e.jsx("div",{style:{width:"100%"},children:e.jsx(Ve,{imageInfo:u,colorVisionSettings:t,onProcessingStateChange:T})})]}),o==="camera"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:C>768?"350px 1fr":"1fr",gap:"2rem",alignItems:"start"},children:[e.jsxs("div",{style:{position:C>1400?"sticky":"static",top:"1rem"},children:[e.jsx("h2",{className:"section-title",style:{color:"#9CA3AF",marginBottom:"1rem"},children:"Settings"}),e.jsx(re,{colorVisionSettings:t,onColorVisionSettingsChange:r})]}),e.jsx("div",{style:{width:"100%"},children:e.jsx(et,{colorVisionSettings:t,onProcessingStateChange:T})})]})]})})]}),e.jsx("footer",{className:"app-footer",children:e.jsxs("div",{className:"container",children:[e.jsxs("p",{className:"footer-text",children:["© 2025 ColorWise - 色の世界を、もっと楽しく | v","3.0.2"]}),e.jsxs("p",{className:"footer-links",children:[e.jsx("button",{onClick:()=>B("about"),className:"footer-link",style:{background:"none",border:"none",color:"inherit",textDecoration:"underline",cursor:"pointer"},children:"このアプリについて"}),e.jsx("span",{className:"footer-separator",children:"|"}),e.jsx("button",{onClick:()=>B("credits"),className:"footer-link",style:{background:"none",border:"none",color:"inherit",textDecoration:"underline",cursor:"pointer"},children:"クレジット"}),e.jsx("span",{className:"footer-separator",children:"|"}),e.jsx("button",{onClick:()=>B("privacy"),className:"footer-link",style:{background:"none",border:"none",color:"inherit",textDecoration:"underline",cursor:"pointer"},children:"プライバシーポリシー"}),e.jsx("span",{className:"footer-separator",children:"|"}),e.jsx("button",{onClick:()=>B("disclaimer"),className:"footer-link",style:{background:"none",border:"none",color:"inherit",textDecoration:"underline",cursor:"pointer"},children:"免責事項"})]})]})}),e.jsx(tt,{isOpen:s,onClose:G,activeSection:c})]})}se.createRoot(document.getElementById("root")).render(e.jsx(ze.StrictMode,{children:e.jsx(st,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/colorwise-app/sw.js").then(async t=>{t.waiting?t.waiting.postMessage({type:"SKIP_WAITING"}):t.installing&&t.installing.addEventListener("statechange",()=>{t.waiting&&t.waiting.postMessage({type:"SKIP_WAITING"})})}).catch(()=>{})});
//# sourceMappingURL=index-cYcZ1fWI.js.map
